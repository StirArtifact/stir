void	O
cg_tally	O
(	O
bfd_vma	long
from_pc	O
,	O
bfd_vma	long
self_pc	O
,	O
unsigned	O
long	O
count	int
)	O
{	O
Sym	O
*	O
parent	O
;	O
Sym	O
*	O
child	O
;	O
parent	O
=	O
sym_lookup	O
(	O
&	O
symtab	O
,	O
from_pc	O
)	O
;	O
child	O
=	O
sym_lookup	O
(	O
&	O
symtab	O
,	O
self_pc	O
)	O
;	O
if	O
(	O
child	O
==	O
NULL	O
||	O
parent	O
==	O
NULL	O
)	O
return	O
;	O
while	O
(	O
child	O
>=	O
symtab	O
.	O
base	int
&&	O
!	O
child	O
->	O
is_func	O
)	O
--	O
child	O
;	O
if	O
(	O
child	O
<	O
symtab	O
.	O
base	int
)	O
return	O
;	O
if	O
(	O
sym_id_arc_is_present	O
(	O
&	O
syms	*(*(struct(*(struct(*`,*`,*`,*`,*`,*`,long,long,int,enum(int,int,int,int,int),enum(int,int,int,int),int,int,int,int,int,int,int,int,int,int,int,int,int,enum(int,int,int),int,int,*`,long,long,struct`,*`,*`,int,int,long,*`,int,int,*`,*`,*`,*`,*`,*`,union`,union`,*`,*`,*`)),*(char),long,int,*(struct(*`,int,int,*`,*`,int,int,int,int,int,int,int,int,int,int,int,int,int,int,int,long,long,long,long,long,*`,int,long,*`,int,*`,*`,int,long,long,long,*`,*`,*`,int,int,*`,long,int,*`,*`,*`,*`,*`,union`,union`)),union(*(void),long))))
[	O
INCL_ARCS	O
]	O
,	O
parent	O
,	O
child	O
)	O
||	O
(	O
syms	*(*(struct(*(struct(*`,*`,*`,*`,*`,*`,long,long,int,enum(int,int,int,int,int),enum(int,int,int,int),int,int,int,int,int,int,int,int,int,int,int,int,int,enum(int,int,int),int,int,*`,long,long,struct`,*`,*`,int,int,long,*`,int,int,*`,*`,*`,*`,*`,*`,union`,union`,*`,*`,*`)),*(char),long,int,*(struct(*`,int,int,*`,*`,int,int,int,int,int,int,int,int,int,int,int,int,int,int,int,long,long,long,long,long,*`,int,long,*`,int,*`,*`,int,long,long,long,*`,*`,*`,int,int,*`,long,int,*`,*`,*`,*`,*`,union`,union`)),union(*(void),long))))
[	O
INCL_ARCS	O
]	O
.	O
len	long
==	O
0	int
&&	O
!	O
sym_id_arc_is_present	O
(	O
&	O
syms	*(*(struct(*(struct(*`,*`,*`,*`,*`,*`,long,long,int,enum(int,int,int,int,int),enum(int,int,int,int),int,int,int,int,int,int,int,int,int,int,int,int,int,enum(int,int,int),int,int,*`,long,long,struct`,*`,*`,int,int,long,*`,int,int,*`,*`,*`,*`,*`,*`,union`,union`,*`,*`,*`)),*(char),long,int,*(struct(*`,int,int,*`,*`,int,int,int,int,int,int,int,int,int,int,int,int,int,int,int,long,long,long,long,long,*`,int,long,*`,int,*`,*`,int,long,long,long,*`,*`,*`,int,int,*`,long,int,*`,*`,*`,*`,*`,union`,union`)),union(*(void),long))))
[	O
EXCL_ARCS	O
]	O
,	O
parent	O
,	O
child	O
)	O
)	O
)	O
{	O
child	O
->	O
ncalls	O
+=	O
count	int
;	O
DBG	O
(	O
TALLYDEBUG	O
,	O
printf	(*(char))->(int)
(	O
_	O
(	O
"[cg_tally] arc from %s to %s traversed %lu times\n"	*(char)
)	O
,	O
parent	O
->	O
name	*(char)
,	O
child	O
->	O
name	*(char)
,	O
count	int
)	O
)	O
;	O
arc_add	O
(	O
parent	O
,	O
child	O
,	O
count	int
)	O
;	O
}	O
}	O
void	O
cg_read_rec	O
(	O
FILE	struct
*	O
ifp	O
,	O
const	O
char	O
*	O
filename	*(char)
)	O
{	O
bfd_vma	long
from_pc	O
,	O
self_pc	O
;	O
unsigned	O
int	O
count	int
;	O
if	O
(	O
gmon_io_read_vma	O
(	O
ifp	O
,	O
&	O
from_pc	O
)	O
||	O
gmon_io_read_vma	O
(	O
ifp	O
,	O
&	O
self_pc	O
)	O
||	O
gmon_io_read_32	O
(	O
ifp	O
,	O
&	O
count	int
)	O
)	O
{	O
fprintf	(*(struct(int,*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(struct),*(struct(int,*`,*`,*`,*`,*`,*`,*`,*`,*`,*`,*`,*`,*`,int,int,long,short,char,array(char),*`,long,*`,*`,*`,*`,long,int,array(char))),int,int,long,short,char,array(char),*(void),long,*(struct),*(struct),*(struct(int,*`,*`,*`,*`,*`,*`,*`,*`,*`,*`,*`,*`,*`,int,int,long,short,char,array(char),*`,long,*`,*`,*`,*`,long,int,array(char))),*(void),long,int,array(char))),*(char))->(int)
(	O
stderr	*(struct(int,*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(struct),*(struct(int,*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(struct`),*(struct`),int,int,long,short,char,array(char),*(void),long,*(struct`),*(struct`),*(struct`),*(void),long,int,array(char))),int,int,long,short,char,array(char),*(void),long,*(struct),*(struct),*(struct(int,*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(char),*(struct`),*(struct`),int,int,long,short,char,array(char),*(void),long,*(struct`),*(struct`),*(struct`),*(void),long,int,array(char))),*(void),long,int,array(char)))
,	O
_	O
(	O
"%s: %s: unexpected end of file\n"	*(char)
)	O
,	O
whoami	O
,	O
filename	*(char)
)	O
;	O
done	O
(	O
1	int
)	O
;	O
}	O
DBG	O
(	O
SAMPLEDEBUG	O
,	O
printf	(*(char))->(int)
(	O
"[cg_read_rec] frompc 0x%lx selfpc 0x%lx count %lu\n"	*(char)
,	O
(	O
unsigned	O
long	O
)	O
from_pc	O
,	O
(	O
unsigned	O
long	O
)	O
self_pc	O
,	O
(	O
unsigned	O
long	O
)	O
count	int
)	O
)	O
;	O
cg_tally	O
(	O
from_pc	O
,	O
self_pc	O
,	O
count	int
)	O
;	O
}	O
void	O
cg_write_arcs	O
(	O
FILE	struct
*	O
ofp	O
,	O
const	O
char	O
*	O
filename	*(char)
)	O
{	O
Arc	O
*	O
arc	O
;	O
Sym	O
*	O
sym	*(struct)
;	O
for	O
(	O
sym	*(struct)
=	O
symtab	O
.	O
base	int
;	O
sym	*(struct)
<	O
symtab	O
.	O
limit	O
;	O
sym	*(struct)
++	O
)	O
{	O
for	O
(	O
arc	O
=	O
sym	*(struct)
->	O
cg	O
.	O
children	O
;	O
arc	O
;	O
arc	O
=	O
arc	O
->	O
next_child	O
)	O
{	O
if	O
(	O
gmon_io_write_8	O
(	O
ofp	O
,	O
GMON_TAG_CG_ARC	O
)	O
||	O
gmon_io_write_vma	O
(	O
ofp	O
,	O
arc	O
->	O
parent	O
->	O
addr	*(void)
)	O
||	O
gmon_io_write_vma	O
(	O
ofp	O
,	O
arc	O
->	O
child	O
->	O
addr	*(void)
)	O
||	O
gmon_io_write_32	O
(	O
ofp	O
,	O
arc	O
->	O
count	int
)	O
)	O
{	O
perror	(*(char))->(void)
(	O
filename	*(char)
)	O
;	O
done	O
(	O
1	int
)	O
;	O
}	O
DBG	O
(	O
SAMPLEDEBUG	O
,	O
printf	(*(char))->(int)
(	O
"[cg_write_arcs] frompc 0x%lx selfpc 0x%lx count %lu\n"	*(char)
,	O
(	O
unsigned	O
long	O
)	O
arc	O
->	O
parent	O
->	O
addr	*(void)
,	O
(	O
unsigned	O
long	O
)	O
arc	O
->	O
child	O
->	O
addr	*(void)
,	O
arc	O
->	O
count	int
)	O
)	O
;	O
}	O
}	O
}	O
