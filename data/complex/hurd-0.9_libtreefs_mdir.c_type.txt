error_t	(*(int))->(int)
treefs_mdir_add	(*(struct),*(char),*(struct),*(*(struct)))->(int)
(	O
struct	O
treefs_node	O
*	O
dir	*(struct)
,	O
char	O
*	O
name	*(char)
,	O
struct	O
treefs_node	O
*	O
child	*(struct)
,	O
struct	O
treefs_node	O
*	O
*	O
old_child	*(*(struct))
)	O
{	O
if	O
(	O
!	O
treefs_node_isdir	()->(int)
(	O
dir	*(struct)
)	O
)	O
return	O
ENOTDIR	O
;	O
else	O
{	O
if	O
(	O
dir	*(struct)
->	O
children	O
==	O
NULL	O
)	O
{	O
dir	*(struct)
->	O
children	O
=	O
treefs_make_node_list	()->(int)
(	O
)	O
;	O
if	O
(	O
dir	*(struct)
->	O
children	O
==	O
NULL	O
)	O
return	O
ENOMEM	O
;	O
}	O
return	O
treefs_node_list_add	()->(int)
(	O
dir	*(struct)
->	O
children	O
,	O
name	*(char)
,	O
child	*(struct)
,	O
old_child	*(*(struct))
)	O
;	O
}	O
}	O
error_t	(*(int))->(int)
treefs_mdir_remove	(*(struct),*(char),*(struct))->(int)
(	O
struct	O
treefs_node	O
*	O
dir	*(struct)
,	O
char	O
*	O
name	*(char)
,	O
struct	O
treefs_node	O
*	O
old_child	*(*(struct))
)	O
{	O
if	O
(	O
!	O
treefs_node_isdir	()->(int)
(	O
dir	*(struct)
)	O
)	O
return	O
ENOTDIR	O
;	O
else	O
if	O
(	O
dir	*(struct)
->	O
children	O
==	O
NULL	O
)	O
return	O
ENOENT	O
;	O
else	O
return	O
treefs_node_list_remove	()->(int)
(	O
dir	*(struct)
->	O
children	O
,	O
name	*(char)
,	O
old_child	*(*(struct))
)	O
;	O
}	O
error_t	(*(int))->(int)
treefs_mdir_get	(*(struct),*(char),*(*(struct)))->(int)
(	O
struct	O
treefs_node	O
*	O
dir	*(struct)
,	O
char	O
*	O
name	*(char)
,	O
struct	O
treefs_node	O
*	O
*	O
child	*(struct)
)	O
{	O
if	O
(	O
!	O
treefs_node_isdir	()->(int)
(	O
dir	*(struct)
)	O
)	O
return	O
ENOTDIR	O
;	O
else	O
if	O
(	O
dir	*(struct)
->	O
children	O
==	O
NULL	O
)	O
return	O
ENOENT	O
;	O
else	O
return	O
treefs_node_list_get	()->(int)
(	O
dir	*(struct)
->	O
children	O
,	O
name	*(char)
,	O
child	*(struct)
)	O
;	O
}	O
error_t	(*(int))->(int)
treefs_mdir_for_each	(*(struct),(*(int))->(int))->(int)
(	O
struct	O
treefs_node	O
*	O
dir	*(struct)
,	O
error_t	(*(int))->(int)
(	O
*	O
fun	*(int)
)	O
(	O
char	O
*	O
name	*(char)
,	O
struct	O
treefs_node	O
*	O
child	*(struct)
)	O
)	O
{	O
if	O
(	O
!	O
treefs_node_isdir	()->(int)
(	O
dir	*(struct)
)	O
)	O
return	O
ENOTDIR	O
;	O
else	O
if	O
(	O
dir	*(struct)
->	O
children	O
==	O
NULL	O
)	O
return	O
0	int
;	O
else	O
return	O
treefs_node_list_for_each	()->(int)
(	O
dir	*(struct)
->	O
children	O
,	O
fun	*(int)
)	O
;	O
}	O
