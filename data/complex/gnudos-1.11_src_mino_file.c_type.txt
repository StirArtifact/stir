int	O
checkFileModified	(*(char))->(int)
(	O
char	O
*	O
open_file_name	*(char)
)	O
{	O
int	O
res	int
=	O
0	int
;	O
if	O
(	O
FILE_STATE	enum(int,int,int,int,int)
==	O
MODIFIED	int
)	O
{	O
int	O
i	int
=	O
msgBox	(*(char),int,enum(int,int,int))->(int)
(	O
"File has been changed. Save changes?"	*(char)
,	O
YES	int
|	O
NO	int
,	O
INFO	int
)	O
;	O
if	O
(	O
i	int
==	O
YES	int
)	O
{	O
if	O
(	O
NEW_FILE	int
)	O
{	O
if	O
(	O
!	O
openSaveFile	(enum(int,int),int,*(char))->(*(char))
(	O
SAVE	int
,	O
YES	int
,	O
open_file_name	*(char)
)	O
)	O
{	O
msgBox	(*(char),int,enum(int,int,int))->(int)
(	O
"Failed to save file."	*(char)
,	O
OK	int
,	O
ERROR	int
)	O
;	O
}	O
else	O
res	int
=	O
1	int
;	O
}	O
else	O
{	O
if	O
(	O
!	O
openSaveFile	(enum(int,int),int,*(char))->(*(char))
(	O
SAVE	int
,	O
NO	int
,	O
open_file_name	*(char)
)	O
)	O
{	O
msgBox	(*(char),int,enum(int,int,int))->(int)
(	O
"Failed to save file."	*(char)
,	O
OK	int
,	O
ERROR	int
)	O
;	O
}	O
else	O
res	int
=	O
1	int
;	O
}	O
}	O
else	O
res	int
=	O
1	int
;	O
}	O
else	O
res	int
=	O
1	int
;	O
return	O
res	int
;	O
}	O
void	O
fileMenu_New	(*(char))->(void)
(	O
char	O
*	O
open_file_name	*(char)
)	O
{	O
if	O
(	O
FILE_STATE	enum(int,int,int,int,int)
==	O
NEW	int
)	O
{	O
refreshView	()->(void)
(	O
)	O
;	O
return	O
;	O
}	O
if	O
(	O
checkFileModified	(*(char))->(int)
(	O
open_file_name	*(char)
)	O
)	O
{	O
NEW_FILE	int
=	O
1	int
;	O
FILE_STATE	enum(int,int,int,int,int)
=	O
NEW	int
;	O
}	O
if	O
(	O
FILE_STATE	enum(int,int,int,int,int)
==	O
NEW	int
)	O
{	O
initNewDocument	()->(int)
(	O
)	O
;	O
resetLineCounters	()->(void)
(	O
)	O
;	O
}	O
BG_COLOR	array(int)
[	O
COLOR_WINDOW	int
]	O
=	O
old_window_color	int
;	O
refreshView	()->(void)
(	O
)	O
;	O
}	O
void	O
fileMenu_Open	(*(char))->(void)
(	O
char	O
*	O
open_file_name	*(char)
)	O
{	O
if	O
(	O
checkFileModified	(*(char))->(int)
(	O
open_file_name	*(char)
)	O
)	O
{	O
FILE_STATE	enum(int,int,int,int,int)
=	O
SAVED	int
;	O
}	O
if	O
(	O
!	O
openSaveFile	(enum(int,int),int,*(char))->(*(char))
(	O
OPEN	int
,	O
YES	int
,	O
open_file_name	*(char)
)	O
)	O
{	O
msgBox	(*(char),int,enum(int,int,int))->(int)
(	O
"Failed to open file."	*(char)
,	O
OK	int
,	O
ERROR	int
)	O
;	O
}	O
else	O
{	O
FILE_STATE	enum(int,int,int,int,int)
=	O
OPENED	int
;	O
NEW_FILE	int
=	O
0	int
;	O
initEdit	()->(void)
(	O
)	O
;	O
}	O
refreshView	()->(void)
(	O
)	O
;	O
}	O
void	O
fileMenu_Save	(*(char))->(void)
(	O
char	O
*	O
open_file_name	*(char)
)	O
{	O
if	O
(	O
NEW_FILE	int
)	O
{	O
if	O
(	O
strcmp	(*(char),*(char))->(int)
(	O
documentTitle	*(char)
,	O
DEFAULT_TITLE	*(char)
)	O
==	O
0	int
)	O
{	O
if	O
(	O
!	O
openSaveFile	(enum(int,int),int,*(char))->(*(char))
(	O
SAVE	int
,	O
YES	int
,	O
open_file_name	*(char)
)	O
)	O
{	O
msgBox	(*(char),int,enum(int,int,int))->(int)
(	O
"Failed to save file."	*(char)
,	O
OK	int
,	O
ERROR	int
)	O
;	O
}	O
else	O
{	O
FILE_STATE	enum(int,int,int,int,int)
=	O
SAVED	int
;	O
}	O
}	O
else	O
{	O
if	O
(	O
!	O
openSaveFile	(enum(int,int),int,*(char))->(*(char))
(	O
SAVE	int
,	O
NO	int
,	O
open_file_name	*(char)
)	O
)	O
{	O
msgBox	(*(char),int,enum(int,int,int))->(int)
(	O
"Failed to save file."	*(char)
,	O
OK	int
,	O
ERROR	int
)	O
;	O
}	O
else	O
{	O
FILE_STATE	enum(int,int,int,int,int)
=	O
SAVED	int
;	O
}	O
}	O
}	O
else	O
{	O
if	O
(	O
!	O
openSaveFile	(enum(int,int),int,*(char))->(*(char))
(	O
SAVE	int
,	O
NO	int
,	O
open_file_name	*(char)
)	O
)	O
{	O
msgBox	(*(char),int,enum(int,int,int))->(int)
(	O
"Failed to save file."	*(char)
,	O
OK	int
,	O
ERROR	int
)	O
;	O
}	O
else	O
{	O
FILE_STATE	enum(int,int,int,int,int)
=	O
SAVED	int
;	O
}	O
}	O
refreshView	()->(void)
(	O
)	O
;	O
}	O
void	O
fileMenu_SaveAs	(*(char))->(void)
(	O
char	O
*	O
open_file_name	*(char)
)	O
{	O
if	O
(	O
!	O
openSaveFile	(enum(int,int),int,*(char))->(*(char))
(	O
SAVE	int
,	O
YES	int
,	O
open_file_name	*(char)
)	O
)	O
{	O
msgBox	(*(char),int,enum(int,int,int))->(int)
(	O
"Failed to save file."	*(char)
,	O
OK	int
,	O
ERROR	int
)	O
;	O
}	O
else	O
{	O
FILE_STATE	enum(int,int,int,int,int)
=	O
SAVED	int
;	O
}	O
refreshView	()->(void)
(	O
)	O
;	O
}	O
void	O
fileMenu_Print	(*(char))->(void)
(	O
char	O
*	O
open_file_name	*(char)
)	O
{	O
msgBox	(*(char),int,enum(int,int,int))->(int)
(	O
"Oops! This function is not currently implemented!."	*(char)
,	O
OK	int
,	O
INFO	int
)	O
;	O
refreshView	()->(void)
(	O
)	O
;	O
}	O
void	O
fileMenu_Exit	(*(char))->(void)
(	O
char	O
*	O
open_file_name	*(char)
)	O
{	O
exit_gracefully	(int,*(char))->(void)
(	O
0	int
,	O
open_file_name	*(char)
)	O
;	O
}	O
