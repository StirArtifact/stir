const	O
typeinfo_t	O
html_styled_ostream_typeinfo	O
=	O
{	O
"html_styled_ostream"	*(char)
}	O
;	O
static	O
const	O
typeinfo_t	O
*	O
const	O
html_styled_ostream_superclasses	array(*(int))
[	O
]	O
=	O
{	O
html_styled_ostream_SUPERCLASSES	O
}	O
;	O
static	O
void	O
html_styled_ostream__write_mem	(int,*(void),int)->(void)
(	O
html_styled_ostream_t	O
stream	int
,	O
const	O
void	O
*	O
data	*(void)
,	O
size_t	O
len	int
)	O
{	O
html_ostream_write_mem	()->(int)
(	O
stream	int
->	O
html_destination	O
,	O
data	*(void)
,	O
len	int
)	O
;	O
}	O
static	O
void	O
html_styled_ostream__flush	(int,int)->(void)
(	O
html_styled_ostream_t	O
stream	int
,	O
ostream_flush_scope_t	O
scope	int
)	O
{	O
html_ostream_flush	()->(int)
(	O
stream	int
->	O
html_destination	O
,	O
scope	int
)	O
;	O
}	O
static	O
void	O
html_styled_ostream__free	(int)->(void)
(	O
html_styled_ostream_t	O
stream	int
)	O
{	O
html_ostream_free	()->(int)
(	O
stream	int
->	O
html_destination	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	int
->	O
destination	int
,	O
"</body>\n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	int
->	O
destination	int
,	O
"</html>\n"	*(char)
)	O
;	O
free	()->(int)
(	O
stream	int
)	O
;	O
}	O
static	O
void	O
html_styled_ostream__begin_use_class	(int,*(char))->(void)
(	O
html_styled_ostream_t	O
stream	int
,	O
const	O
char	O
*	O
classname	*(char)
)	O
{	O
html_ostream_begin_span	()->(int)
(	O
stream	int
->	O
html_destination	O
,	O
classname	*(char)
)	O
;	O
}	O
static	O
void	O
html_styled_ostream__end_use_class	(int,*(char))->(void)
(	O
html_styled_ostream_t	O
stream	int
,	O
const	O
char	O
*	O
classname	*(char)
)	O
{	O
html_ostream_end_span	()->(int)
(	O
stream	int
->	O
html_destination	O
,	O
classname	*(char)
)	O
;	O
}	O
static	O
void	O
html_styled_ostream__flush_to_current_style	(int)->(void)
(	O
html_styled_ostream_t	O
stream	int
)	O
{	O
html_ostream_flush_to_current_style	()->(int)
(	O
stream	int
->	O
html_destination	O
)	O
;	O
}	O
html_styled_ostream_t	O
html_styled_ostream_create	(int,*(char))->(int)
(	O
ostream_t	O
destination	int
,	O
const	O
char	O
*	O
css_filename	*(char)
)	O
{	O
html_styled_ostream_t	O
stream	int
=	O
XMALLOC	O
(	O
struct	O
html_styled_ostream_representation	O
)	O
;	O
stream	int
->	O
base	O
.	O
base	O
.	O
vtable	*(struct)
=	O
&	O
html_styled_ostream_vtable	O
;	O
stream	int
->	O
destination	int
=	O
destination	int
;	O
stream	int
->	O
html_destination	O
=	O
html_ostream_create	()->(int)
(	O
destination	int
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	int
->	O
destination	int
,	O
"<?xml version=\"1.0\"?>\n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	int
->	O
destination	int
,	O
"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">\n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	int
->	O
destination	int
,	O
"<html>\n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	int
->	O
destination	int
,	O
"<head>\n"	*(char)
)	O
;	O
if	O
(	O
css_filename	*(char)
!=	O
NULL	O
)	O
{	O
ostream_write_str	()->(int)
(	O
stream	int
->	O
destination	int
,	O
"<style type=\"text/css\">\n"	*(char)
"<!--\n"	*(char)
)	O
;	O
{	O
int	O
fd	int
;	O
char	O
buf	array(char)
[	O
4096	int
]	O
;	O
fd	int
=	O
open	()->(int)
(	O
css_filename	*(char)
,	O
O_RDONLY	O
|	O
O_TEXT	int
)	O
;	O
if	O
(	O
fd	int
<	O
0	int
)	O
error	()->(int)
(	O
EXIT_FAILURE	O
,	O
errno	O
,	O
_	O
(	O
"error while opening \"%s\" for reading"	*(char)
)	O
,	O
css_filename	*(char)
)	O
;	O
for	O
(	O
;	O
;	O
)	O
{	O
size_t	O
n_read	O
=	O
safe_read	O
(	O
fd	int
,	O
buf	array(char)
,	O
sizeof	O
(	O
buf	array(char)
)	O
)	O
;	O
if	O
(	O
n_read	O
==	O
SAFE_READ_ERROR	O
)	O
error	()->(int)
(	O
EXIT_FAILURE	O
,	O
errno	O
,	O
_	O
(	O
"error reading \"%s\""	*(char)
)	O
,	O
css_filename	*(char)
)	O
;	O
if	O
(	O
n_read	O
==	O
0	int
)	O
break	O
;	O
ostream_write_mem	()->(int)
(	O
stream	int
->	O
destination	int
,	O
buf	array(char)
,	O
n_read	O
)	O
;	O
}	O
if	O
(	O
close	()->(int)
(	O
fd	int
)	O
<	O
0	int
)	O
error	()->(int)
(	O
EXIT_FAILURE	O
,	O
errno	O
,	O
_	O
(	O
"error after reading \"%s\""	*(char)
)	O
,	O
css_filename	*(char)
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	int
->	O
destination	int
,	O
"-->\n"	*(char)
"</style>\n"	*(char)
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	int
->	O
destination	int
,	O
"</head>\n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	int
->	O
destination	int
,	O
"<body>\n"	*(char)
)	O
;	O
return	O
stream	int
;	O
}	O
const	O
struct	O
html_styled_ostream_implementation	O
html_styled_ostream_vtable	O
=	O
{	O
html_styled_ostream_superclasses	array(*(int))
,	O
sizeof	O
(	O
html_styled_ostream_superclasses	array(*(int))
)	O
/	O
sizeof	O
(	O
html_styled_ostream_superclasses	array(*(int))
[	O
0	int
]	O
)	O
,	O
sizeof	O
(	O
struct	O
html_styled_ostream_representation	O
)	O
,	O
html_styled_ostream__write_mem	(int,*(void),int)->(void)
,	O
html_styled_ostream__flush	(int,int)->(void)
,	O
html_styled_ostream__free	(int)->(void)
,	O
html_styled_ostream__begin_use_class	(int,*(char))->(void)
,	O
html_styled_ostream__end_use_class	(int,*(char))->(void)
,	O
html_styled_ostream__flush_to_current_style	(int)->(void)
,	O
}	O
;	O
void	O
html_styled_ostream_write_mem	(int,*(void),int)->(void)
(	O
html_styled_ostream_t	O
first_arg	int
,	O
const	O
void	O
*	O
data	*(void)
,	O
size_t	O
len	int
)	O
{	O
const	O
struct	O
html_styled_ostream_implementation	O
*	O
vtable	*(struct)
=	O
(	O
(	O
struct	O
html_styled_ostream_representation_header	O
*	O
)	O
(	O
struct	O
html_styled_ostream_representation	O
*	O
)	O
first_arg	int
)	O
->	O
vtable	*(struct)
;	O
vtable	*(struct)
->	O
write_mem	O
(	O
first_arg	int
,	O
data	*(void)
,	O
len	int
)	O
;	O
}	O
void	O
html_styled_ostream_flush	(int,int)->(void)
(	O
html_styled_ostream_t	O
first_arg	int
,	O
ostream_flush_scope_t	O
scope	int
)	O
{	O
const	O
struct	O
html_styled_ostream_implementation	O
*	O
vtable	*(struct)
=	O
(	O
(	O
struct	O
html_styled_ostream_representation_header	O
*	O
)	O
(	O
struct	O
html_styled_ostream_representation	O
*	O
)	O
first_arg	int
)	O
->	O
vtable	*(struct)
;	O
vtable	*(struct)
->	O
flush	O
(	O
first_arg	int
,	O
scope	int
)	O
;	O
}	O
void	O
html_styled_ostream_free	(int)->(void)
(	O
html_styled_ostream_t	O
first_arg	int
)	O
{	O
const	O
struct	O
html_styled_ostream_implementation	O
*	O
vtable	*(struct)
=	O
(	O
(	O
struct	O
html_styled_ostream_representation_header	O
*	O
)	O
(	O
struct	O
html_styled_ostream_representation	O
*	O
)	O
first_arg	int
)	O
->	O
vtable	*(struct)
;	O
vtable	*(struct)
->	O
free	()->(int)
(	O
first_arg	int
)	O
;	O
}	O
void	O
html_styled_ostream_begin_use_class	(int,*(char))->(void)
(	O
html_styled_ostream_t	O
first_arg	int
,	O
const	O
char	O
*	O
classname	*(char)
)	O
{	O
const	O
struct	O
html_styled_ostream_implementation	O
*	O
vtable	*(struct)
=	O
(	O
(	O
struct	O
html_styled_ostream_representation_header	O
*	O
)	O
(	O
struct	O
html_styled_ostream_representation	O
*	O
)	O
first_arg	int
)	O
->	O
vtable	*(struct)
;	O
vtable	*(struct)
->	O
begin_use_class	O
(	O
first_arg	int
,	O
classname	*(char)
)	O
;	O
}	O
void	O
html_styled_ostream_end_use_class	(int,*(char))->(void)
(	O
html_styled_ostream_t	O
first_arg	int
,	O
const	O
char	O
*	O
classname	*(char)
)	O
{	O
const	O
struct	O
html_styled_ostream_implementation	O
*	O
vtable	*(struct)
=	O
(	O
(	O
struct	O
html_styled_ostream_representation_header	O
*	O
)	O
(	O
struct	O
html_styled_ostream_representation	O
*	O
)	O
first_arg	int
)	O
->	O
vtable	*(struct)
;	O
vtable	*(struct)
->	O
end_use_class	O
(	O
first_arg	int
,	O
classname	*(char)
)	O
;	O
}	O
void	O
html_styled_ostream_flush_to_current_style	(int)->(void)
(	O
html_styled_ostream_t	O
first_arg	int
)	O
{	O
const	O
struct	O
html_styled_ostream_implementation	O
*	O
vtable	*(struct)
=	O
(	O
(	O
struct	O
html_styled_ostream_representation_header	O
*	O
)	O
(	O
struct	O
html_styled_ostream_representation	O
*	O
)	O
first_arg	int
)	O
->	O
vtable	*(struct)
;	O
vtable	*(struct)
->	O
flush_to_current_style	O
(	O
first_arg	int
)	O
;	O
}	O
