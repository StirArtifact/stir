static	O
const	O
char	O
ascii	array(char)
[	O
]	O
=	O
"ASCII"	*(char)
;	O
const	O
char	O
*	O
po_charset_ascii	*(char)
=	O
ascii	array(char)
;	O
static	O
const	O
char	O
utf8	array(char)
[	O
]	O
=	O
"UTF-8"	*(char)
;	O
const	O
char	O
*	O
po_charset_utf8	*(char)
=	O
utf8	array(char)
;	O
const	O
char	O
*	O
po_charset_canonicalize	(*(char))->(*(char))
(	O
const	O
char	O
*	O
charset	*(char)
)	O
{	O
static	O
const	O
char	O
*	O
standard_charsets	array(*(char))
[	O
]	O
=	O
{	O
ascii	array(char)
,	O
"ANSI_X3.4-1968"	*(char)
,	O
"US-ASCII"	*(char)
,	O
"ISO-8859-1"	*(char)
,	O
"ISO_8859-1"	*(char)
,	O
"ISO-8859-2"	*(char)
,	O
"ISO_8859-2"	*(char)
,	O
"ISO-8859-3"	*(char)
,	O
"ISO_8859-3"	*(char)
,	O
"ISO-8859-4"	*(char)
,	O
"ISO_8859-4"	*(char)
,	O
"ISO-8859-5"	*(char)
,	O
"ISO_8859-5"	*(char)
,	O
"ISO-8859-6"	*(char)
,	O
"ISO_8859-6"	*(char)
,	O
"ISO-8859-7"	*(char)
,	O
"ISO_8859-7"	*(char)
,	O
"ISO-8859-8"	*(char)
,	O
"ISO_8859-8"	*(char)
,	O
"ISO-8859-9"	*(char)
,	O
"ISO_8859-9"	*(char)
,	O
"ISO-8859-13"	*(char)
,	O
"ISO_8859-13"	*(char)
,	O
"ISO-8859-14"	*(char)
,	O
"ISO_8859-14"	*(char)
,	O
"ISO-8859-15"	*(char)
,	O
"ISO_8859-15"	*(char)
,	O
"KOI8-R"	*(char)
,	O
"KOI8-U"	*(char)
,	O
"KOI8-T"	*(char)
,	O
"CP850"	*(char)
,	O
"CP866"	*(char)
,	O
"CP874"	*(char)
,	O
"CP932"	*(char)
,	O
"CP949"	*(char)
,	O
"CP950"	*(char)
,	O
"CP1250"	*(char)
,	O
"CP1251"	*(char)
,	O
"CP1252"	*(char)
,	O
"CP1253"	*(char)
,	O
"CP1254"	*(char)
,	O
"CP1255"	*(char)
,	O
"CP1256"	*(char)
,	O
"CP1257"	*(char)
,	O
"GB2312"	*(char)
,	O
"EUC-JP"	*(char)
,	O
"EUC-KR"	*(char)
,	O
"EUC-TW"	*(char)
,	O
"BIG5"	*(char)
,	O
"BIG5-HKSCS"	*(char)
,	O
"GBK"	*(char)
,	O
"GB18030"	*(char)
,	O
"SHIFT_JIS"	*(char)
,	O
"JOHAB"	*(char)
,	O
"TIS-620"	*(char)
,	O
"VISCII"	*(char)
,	O
"GEORGIAN-PS"	*(char)
,	O
utf8	array(char)
}	O
;	O
size_t	long
i	long
;	O
for	O
(	O
i	long
=	O
0	int
;	O
i	long
<	O
SIZEOF	O
(	O
standard_charsets	array(*(char))
)	O
;	O
i	long
++	O
)	O
if	O
(	O
c_strcasecmp	(*(char),*(char))->(int)
(	O
charset	*(char)
,	O
standard_charsets	array(*(char))
[	O
i	long
]	O
)	O
==	O
0	int
)	O
return	O
standard_charsets	array(*(char))
[	O
i	long
<	O
3	int
?	O
0	int
:	O
i	long
<	O
27	int
?	O
(	O
(	O
i	long
-	O
3	int
)	O
&	O
~	O
1	int
)	O
+	O
3	int
:	O
i	long
]	O
;	O
return	O
NULL	O
;	O
}	O
bool	bool
po_charset_ascii_compatible	(*(char))->(bool)
(	O
const	O
char	O
*	O
canon_charset	*(char)
)	O
{	O
if	O
(	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
"SHIFT_JIS"	*(char)
)	O
==	O
0	int
||	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
"JOHAB"	*(char)
)	O
==	O
0	int
||	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
"VISCII"	*(char)
)	O
==	O
0	int
)	O
return	O
false	int
;	O
else	O
return	O
true	int
;	O
}	O
bool	bool
po_is_charset_weird	(*(char))->(bool)
(	O
const	O
char	O
*	O
canon_charset	*(char)
)	O
{	O
static	O
const	O
char	O
*	O
weird_charsets	array(*(char))
[	O
]	O
=	O
{	O
"BIG5"	*(char)
,	O
"BIG5-HKSCS"	*(char)
,	O
"GBK"	*(char)
,	O
"GB18030"	*(char)
,	O
"SHIFT_JIS"	*(char)
,	O
"JOHAB"	*(char)
}	O
;	O
size_t	long
i	long
;	O
for	O
(	O
i	long
=	O
0	int
;	O
i	long
<	O
SIZEOF	O
(	O
weird_charsets	array(*(char))
)	O
;	O
i	long
++	O
)	O
if	O
(	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
weird_charsets	array(*(char))
[	O
i	long
]	O
)	O
==	O
0	int
)	O
return	O
true	int
;	O
return	O
false	int
;	O
}	O
bool	bool
po_is_charset_weird_cjk	(*(char))->(bool)
(	O
const	O
char	O
*	O
canon_charset	*(char)
)	O
{	O
static	O
const	O
char	O
*	O
weird_cjk_charsets	array(*(char))
[	O
]	O
=	O
{	O
"BIG5"	*(char)
,	O
"BIG5-HKSCS"	*(char)
,	O
"GBK"	*(char)
,	O
"GB18030"	*(char)
,	O
"SHIFT_JIS"	*(char)
,	O
"JOHAB"	*(char)
}	O
;	O
size_t	long
i	long
;	O
for	O
(	O
i	long
=	O
0	int
;	O
i	long
<	O
SIZEOF	O
(	O
weird_cjk_charsets	array(*(char))
)	O
;	O
i	long
++	O
)	O
if	O
(	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
weird_cjk_charsets	array(*(char))
[	O
i	long
]	O
)	O
==	O
0	int
)	O
return	O
true	int
;	O
return	O
false	int
;	O
}	O
static	O
size_t	long
char_iterator	(*(char))->(long)
(	O
const	O
char	O
*	O
s	*(char)
)	O
{	O
return	O
1	int
;	O
}	O
static	O
size_t	long
euc_character_iterator	(*(char))->(long)
(	O
const	O
char	O
*	O
s	*(char)
)	O
{	O
unsigned	O
char	O
c	char
=	O
*	O
s	*(char)
;	O
if	O
(	O
c	char
>=	O
0xa1	int
&&	O
c	char
<	O
0xff	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
c2	char
>=	O
0xa1	int
&&	O
c2	char
<	O
0xff	int
)	O
return	O
2	int
;	O
}	O
return	O
1	int
;	O
}	O
static	O
size_t	long
euc_jp_character_iterator	(*(char))->(long)
(	O
const	O
char	O
*	O
s	*(char)
)	O
{	O
unsigned	O
char	O
c	char
=	O
*	O
s	*(char)
;	O
if	O
(	O
c	char
>=	O
0xa1	int
&&	O
c	char
<	O
0xff	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
c2	char
>=	O
0xa1	int
&&	O
c2	char
<	O
0xff	int
)	O
return	O
2	int
;	O
}	O
else	O
if	O
(	O
c	char
==	O
0x8e	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
c2	char
>=	O
0xa1	int
&&	O
c2	char
<	O
0xe0	int
)	O
return	O
2	int
;	O
}	O
else	O
if	O
(	O
c	char
==	O
0x8f	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
c2	char
>=	O
0xa1	int
&&	O
c2	char
<	O
0xff	int
)	O
{	O
unsigned	O
char	O
c3	char
=	O
s	*(char)
[	O
2	int
]	O
;	O
if	O
(	O
c3	char
>=	O
0xa1	int
&&	O
c3	char
<	O
0xff	int
)	O
return	O
3	int
;	O
}	O
}	O
return	O
1	int
;	O
}	O
static	O
size_t	long
euc_tw_character_iterator	(*(char))->(long)
(	O
const	O
char	O
*	O
s	*(char)
)	O
{	O
unsigned	O
char	O
c	char
=	O
*	O
s	*(char)
;	O
if	O
(	O
c	char
>=	O
0xa1	int
&&	O
c	char
<	O
0xff	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
c2	char
>=	O
0xa1	int
&&	O
c2	char
<	O
0xff	int
)	O
return	O
2	int
;	O
}	O
else	O
if	O
(	O
c	char
==	O
0x8e	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
c2	char
>=	O
0xa1	int
&&	O
c2	char
<=	O
0xb0	int
)	O
{	O
unsigned	O
char	O
c3	char
=	O
s	*(char)
[	O
2	int
]	O
;	O
if	O
(	O
c3	char
>=	O
0xa1	int
&&	O
c3	char
<	O
0xff	int
)	O
{	O
unsigned	O
char	O
c4	char
=	O
s	*(char)
[	O
3	int
]	O
;	O
if	O
(	O
c4	char
>=	O
0xa1	int
&&	O
c4	char
<	O
0xff	int
)	O
return	O
4	int
;	O
}	O
}	O
}	O
return	O
1	int
;	O
}	O
static	O
size_t	long
big5_character_iterator	(*(char))->(long)
(	O
const	O
char	O
*	O
s	*(char)
)	O
{	O
unsigned	O
char	O
c	char
=	O
*	O
s	*(char)
;	O
if	O
(	O
c	char
>=	O
0xa1	int
&&	O
c	char
<	O
0xff	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
(	O
c2	char
>=	O
0x40	int
&&	O
c2	char
<	O
0x7f	int
)	O
||	O
(	O
c2	char
>=	O
0xa1	int
&&	O
c2	char
<	O
0xff	int
)	O
)	O
return	O
2	int
;	O
}	O
return	O
1	int
;	O
}	O
static	O
size_t	long
big5hkscs_character_iterator	(*(char))->(long)
(	O
const	O
char	O
*	O
s	*(char)
)	O
{	O
unsigned	O
char	O
c	char
=	O
*	O
s	*(char)
;	O
if	O
(	O
c	char
>=	O
0x88	int
&&	O
c	char
<	O
0xff	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
(	O
c2	char
>=	O
0x40	int
&&	O
c2	char
<	O
0x7f	int
)	O
||	O
(	O
c2	char
>=	O
0xa1	int
&&	O
c2	char
<	O
0xff	int
)	O
)	O
return	O
2	int
;	O
}	O
return	O
1	int
;	O
}	O
static	O
size_t	long
gbk_character_iterator	(*(char))->(long)
(	O
const	O
char	O
*	O
s	*(char)
)	O
{	O
unsigned	O
char	O
c	char
=	O
*	O
s	*(char)
;	O
if	O
(	O
c	char
>=	O
0x81	int
&&	O
c	char
<	O
0xff	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
(	O
c2	char
>=	O
0x40	int
&&	O
c2	char
<	O
0x7f	int
)	O
||	O
(	O
c2	char
>=	O
0x80	int
&&	O
c2	char
<	O
0xff	int
)	O
)	O
return	O
2	int
;	O
}	O
return	O
1	int
;	O
}	O
static	O
size_t	long
gb18030_character_iterator	(*(char))->(long)
(	O
const	O
char	O
*	O
s	*(char)
)	O
{	O
unsigned	O
char	O
c	char
=	O
*	O
s	*(char)
;	O
if	O
(	O
c	char
>=	O
0x81	int
&&	O
c	char
<	O
0xff	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
(	O
c2	char
>=	O
0x40	int
&&	O
c2	char
<	O
0x7f	int
)	O
||	O
(	O
c2	char
>=	O
0x80	int
&&	O
c2	char
<	O
0xff	int
)	O
)	O
return	O
2	int
;	O
}	O
if	O
(	O
c	char
>=	O
0x81	int
&&	O
c	char
<=	O
0x84	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
c2	char
>=	O
0x30	int
&&	O
c2	char
<=	O
0x39	int
)	O
{	O
unsigned	O
char	O
c3	char
=	O
s	*(char)
[	O
2	int
]	O
;	O
if	O
(	O
c3	char
>=	O
0x81	int
&&	O
c3	char
<	O
0xff	int
)	O
{	O
unsigned	O
char	O
c4	char
=	O
s	*(char)
[	O
3	int
]	O
;	O
if	O
(	O
c4	char
>=	O
0x30	int
&&	O
c4	char
<=	O
0x39	int
)	O
return	O
4	int
;	O
}	O
}	O
}	O
return	O
1	int
;	O
}	O
static	O
size_t	long
shift_jis_character_iterator	(*(char))->(long)
(	O
const	O
char	O
*	O
s	*(char)
)	O
{	O
unsigned	O
char	O
c	char
=	O
*	O
s	*(char)
;	O
if	O
(	O
(	O
c	char
>=	O
0x81	int
&&	O
c	char
<=	O
0x9f	int
)	O
||	O
(	O
c	char
>=	O
0xe0	int
&&	O
c	char
<=	O
0xf9	int
)	O
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
(	O
c2	char
>=	O
0x40	int
&&	O
c2	char
<=	O
0x7e	int
)	O
||	O
(	O
c2	char
>=	O
0x80	int
&&	O
c2	char
<=	O
0xfc	int
)	O
)	O
return	O
2	int
;	O
}	O
return	O
1	int
;	O
}	O
static	O
size_t	long
johab_character_iterator	(*(char))->(long)
(	O
const	O
char	O
*	O
s	*(char)
)	O
{	O
unsigned	O
char	O
c	char
=	O
*	O
s	*(char)
;	O
if	O
(	O
c	char
>=	O
0x84	int
&&	O
c	char
<=	O
0xd3	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
(	O
c2	char
>=	O
0x41	int
&&	O
c2	char
<	O
0x7f	int
)	O
||	O
(	O
c2	char
>=	O
0x81	int
&&	O
c2	char
<	O
0xff	int
)	O
)	O
return	O
2	int
;	O
}	O
else	O
if	O
(	O
c	char
>=	O
0xd9	int
&&	O
c	char
<=	O
0xf9	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
(	O
c2	char
>=	O
0x31	int
&&	O
c2	char
<=	O
0x7e	int
)	O
||	O
(	O
c2	char
>=	O
0x91	int
&&	O
c2	char
<=	O
0xfe	int
)	O
)	O
return	O
2	int
;	O
}	O
return	O
1	int
;	O
}	O
static	O
size_t	long
utf8_character_iterator	(*(char))->(long)
(	O
const	O
char	O
*	O
s	*(char)
)	O
{	O
unsigned	O
char	O
c	char
=	O
*	O
s	*(char)
;	O
if	O
(	O
c	char
>=	O
0xc2	int
)	O
{	O
if	O
(	O
c	char
<	O
0xe0	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
c2	char
>=	O
0x80	int
&&	O
c2	char
<	O
0xc0	int
)	O
return	O
2	int
;	O
}	O
else	O
if	O
(	O
c	char
<	O
0xf0	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
c2	char
>=	O
0x80	int
&&	O
c2	char
<	O
0xc0	int
)	O
{	O
unsigned	O
char	O
c3	char
=	O
s	*(char)
[	O
2	int
]	O
;	O
if	O
(	O
c3	char
>=	O
0x80	int
&&	O
c3	char
<	O
0xc0	int
)	O
return	O
3	int
;	O
}	O
}	O
else	O
if	O
(	O
c	char
<	O
0xf8	int
)	O
{	O
unsigned	O
char	O
c2	char
=	O
s	*(char)
[	O
1	int
]	O
;	O
if	O
(	O
c2	char
>=	O
0x80	int
&&	O
c2	char
<	O
0xc0	int
)	O
{	O
unsigned	O
char	O
c3	char
=	O
s	*(char)
[	O
2	int
]	O
;	O
if	O
(	O
c3	char
>=	O
0x80	int
&&	O
c3	char
<	O
0xc0	int
)	O
{	O
unsigned	O
char	O
c4	char
=	O
s	*(char)
[	O
3	int
]	O
;	O
if	O
(	O
c4	char
>=	O
0x80	int
&&	O
c4	char
<	O
0xc0	int
)	O
return	O
4	int
;	O
}	O
}	O
}	O
}	O
return	O
1	int
;	O
}	O
character_iterator_t	*((*(char))->(long))
po_charset_character_iterator	(*(char))->(*((*(char))->(long)))
(	O
const	O
char	O
*	O
canon_charset	*(char)
)	O
{	O
if	O
(	O
canon_charset	*(char)
==	O
utf8	array(char)
)	O
return	O
utf8_character_iterator	(*(char))->(long)
;	O
if	O
(	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
"GB2312"	*(char)
)	O
==	O
0	int
||	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
"EUC-KR"	*(char)
)	O
==	O
0	int
)	O
return	O
euc_character_iterator	(*(char))->(long)
;	O
if	O
(	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
"EUC-JP"	*(char)
)	O
==	O
0	int
)	O
return	O
euc_jp_character_iterator	(*(char))->(long)
;	O
if	O
(	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
"EUC-TW"	*(char)
)	O
==	O
0	int
)	O
return	O
euc_tw_character_iterator	(*(char))->(long)
;	O
if	O
(	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
"BIG5"	*(char)
)	O
==	O
0	int
)	O
return	O
big5_character_iterator	(*(char))->(long)
;	O
if	O
(	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
"BIG5-HKSCS"	*(char)
)	O
==	O
0	int
)	O
return	O
big5hkscs_character_iterator	(*(char))->(long)
;	O
if	O
(	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
"GBK"	*(char)
)	O
==	O
0	int
)	O
return	O
gbk_character_iterator	(*(char))->(long)
;	O
if	O
(	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
"GB18030"	*(char)
)	O
==	O
0	int
)	O
return	O
gb18030_character_iterator	(*(char))->(long)
;	O
if	O
(	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
"SHIFT_JIS"	*(char)
)	O
==	O
0	int
)	O
return	O
shift_jis_character_iterator	(*(char))->(long)
;	O
if	O
(	O
strcmp	(*(char),*(char))->(int)
(	O
canon_charset	*(char)
,	O
"JOHAB"	*(char)
)	O
==	O
0	int
)	O
return	O
johab_character_iterator	(*(char))->(long)
;	O
return	O
char_iterator	(*(char))->(long)
;	O
}	O
const	O
char	O
*	O
po_lex_charset	*(char)
;	O
iconv_t	*(void)
po_lex_iconv	*(void)
;	O
bool	bool
po_lex_weird_cjk	bool
;	O
void	O
po_lex_charset_init	()->(void)
(	O
)	O
{	O
po_lex_charset	*(char)
=	O
NULL	O
;	O
po_lex_iconv	*(void)
=	O
(	O
iconv_t	*(void)
)	O
(	O
-	O
1	int
)	O
;	O
po_lex_weird_cjk	bool
=	O
false	int
;	O
}	O
void	O
po_lex_charset_set	(*(char),*(char))->(void)
(	O
const	O
char	O
*	O
header_entry	*(char)
,	O
const	O
char	O
*	O
filename	*(char)
)	O
{	O
const	O
char	O
*	O
charsetstr	*(char)
=	O
c_strstr	(*(char),*(char))->(*(char))
(	O
header_entry	*(char)
,	O
"charset="	*(char)
)	O
;	O
if	O
(	O
charsetstr	*(char)
!=	O
NULL	O
)	O
{	O
size_t	long
len	long
;	O
char	O
*	O
charset	*(char)
;	O
const	O
char	O
*	O
canon_charset	*(char)
;	O
charsetstr	*(char)
+=	O
strlen	(*(char))->(long)
(	O
"charset="	*(char)
)	O
;	O
len	long
=	O
strcspn	(*(char),*(char))->(long)
(	O
charsetstr	*(char)
,	O
" \t\n"	*(char)
)	O
;	O
charset	*(char)
=	O
(	O
char	O
*	O
)	O
xmalloca	O
(	O
len	long
+	O
1	int
)	O
;	O
memcpy	(*(void),*(void),long)->(*(void))
(	O
charset	*(char)
,	O
charsetstr	*(char)
,	O
len	long
)	O
;	O
charset	*(char)
[	O
len	long
]	O
=	O
'\0'	O
;	O
canon_charset	*(char)
=	O
po_charset_canonicalize	(*(char))->(*(char))
(	O
charset	*(char)
)	O
;	O
if	O
(	O
canon_charset	*(char)
==	O
NULL	O
)	O
{	O
size_t	long
filenamelen	long
=	O
strlen	(*(char))->(long)
(	O
filename	*(char)
)	O
;	O
if	O
(	O
!	O
(	O
filenamelen	long
>=	O
4	int
&&	O
memcmp	(*(void),*(void),long)->(int)
(	O
filename	*(char)
+	O
filenamelen	long
-	O
4	int
,	O
".pot"	*(char)
,	O
4	int
)	O
==	O
0	int
&&	O
strcmp	(*(char),*(char))->(int)
(	O
charset	*(char)
,	O
"CHARSET"	*(char)
)	O
==	O
0	int
)	O
)	O
{	O
char	O
*	O
warning_message	*(char)
=	O
xasprintf	(*(char))->(*(char))
(	O
_	O
(	O
"Charset \"%s\" is not a portable encoding name.\nMessage conversion to user's charset might not work.\n"	*(char)
)	O
,	O
charset	*(char)
)	O
;	O
po_xerror	*((int,*(struct),*(char),long,long,int,*(char))->(void))
(	O
PO_SEVERITY_WARNING	int
,	O
NULL	O
,	O
filename	*(char)
,	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
,	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
,	O
true	int
,	O
warning_message	*(char)
)	O
;	O
free	(*(void))->(void)
(	O
warning_message	*(char)
)	O
;	O
}	O
}	O
else	O
{	O
const	O
char	O
*	O
envval	*(char)
;	O
po_lex_charset	*(char)
=	O
canon_charset	*(char)
;	O
if	O
(	O
po_lex_iconv	*(void)
!=	O
(	O
iconv_t	*(void)
)	O
(	O
-	O
1	int
)	O
)	O
iconv_close	(*(void))->(int)
(	O
po_lex_iconv	*(void)
)	O
;	O
envval	*(char)
=	O
getenv	(*(char))->(*(char))
(	O
"OLD_PO_FILE_INPUT"	*(char)
)	O
;	O
if	O
(	O
envval	*(char)
!=	O
NULL	O
&&	O
*	O
envval	*(char)
!=	O
'\0'	O
)	O
{	O
po_lex_iconv	*(void)
=	O
(	O
iconv_t	*(void)
)	O
(	O
-	O
1	int
)	O
;	O
po_lex_weird_cjk	bool
=	O
false	int
;	O
}	O
else	O
{	O
po_lex_iconv	*(void)
=	O
iconv_open	(*(char),*(char))->(*(void))
(	O
"UTF-8"	*(char)
,	O
po_lex_charset	*(char)
)	O
;	O
if	O
(	O
po_lex_iconv	*(void)
==	O
(	O
iconv_t	*(void)
)	O
(	O
-	O
1	int
)	O
)	O
{	O
const	O
char	O
*	O
progname	*(char)
;	O
char	O
*	O
warning_message	*(char)
;	O
const	O
char	O
*	O
recommendation	*(char)
;	O
const	O
char	O
*	O
note	*(char)
;	O
char	O
*	O
whole_message	*(char)
;	O
progname	*(char)
=	O
basename	(*(char))->(*(char))
(	O
program_name	*(char)
)	O
;	O
warning_message	*(char)
=	O
xasprintf	(*(char))->(*(char))
(	O
_	O
(	O
"Charset \"%s\" is not supported. %s relies on iconv(),\nand iconv() does not support \"%s\".\n"	*(char)
)	O
,	O
po_lex_charset	*(char)
,	O
progname	*(char)
,	O
po_lex_charset	*(char)
)	O
;	O
recommendation	*(char)
=	O
_	O
(	O
"Installing GNU libiconv and then reinstalling GNU gettext\nwould fix this problem.\n"	*(char)
)	O
;	O
po_lex_weird_cjk	bool
=	O
po_is_charset_weird_cjk	(*(char))->(bool)
(	O
po_lex_charset	*(char)
)	O
;	O
if	O
(	O
po_is_charset_weird	(*(char))->(bool)
(	O
po_lex_charset	*(char)
)	O
&&	O
!	O
po_lex_weird_cjk	bool
)	O
note	*(char)
=	O
_	O
(	O
"Continuing anyway, expect parse errors."	*(char)
)	O
;	O
else	O
note	*(char)
=	O
_	O
(	O
"Continuing anyway."	*(char)
)	O
;	O
whole_message	*(char)
=	O
xasprintf	(*(char))->(*(char))
(	O
"%s%s%s\n"	*(char)
,	O
warning_message	*(char)
,	O
recommendation	*(char)
,	O
note	*(char)
)	O
;	O
po_xerror	*((int,*(struct),*(char),long,long,int,*(char))->(void))
(	O
PO_SEVERITY_WARNING	int
,	O
NULL	O
,	O
filename	*(char)
,	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
,	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
,	O
true	int
,	O
whole_message	*(char)
)	O
;	O
free	(*(void))->(void)
(	O
whole_message	*(char)
)	O
;	O
free	(*(void))->(void)
(	O
warning_message	*(char)
)	O
;	O
}	O
}	O
}	O
freea	(*(void))->(void)
(	O
charset	*(char)
)	O
;	O
}	O
else	O
{	O
size_t	long
filenamelen	long
=	O
strlen	(*(char))->(long)
(	O
filename	*(char)
)	O
;	O
if	O
(	O
!	O
(	O
filenamelen	long
>=	O
4	int
&&	O
memcmp	(*(void),*(void),long)->(int)
(	O
filename	*(char)
+	O
filenamelen	long
-	O
4	int
,	O
".pot"	*(char)
,	O
4	int
)	O
==	O
0	int
)	O
)	O
po_xerror	*((int,*(struct),*(char),long,long,int,*(char))->(void))
(	O
PO_SEVERITY_WARNING	int
,	O
NULL	O
,	O
filename	*(char)
,	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
,	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
,	O
true	int
,	O
_	O
(	O
"Charset missing in header.\nMessage conversion to user's charset will not work.\n"	*(char)
)	O
)	O
;	O
}	O
}	O
void	O
po_lex_charset_close	()->(void)
(	O
)	O
{	O
po_lex_charset	*(char)
=	O
NULL	O
;	O
if	O
(	O
po_lex_iconv	*(void)
!=	O
(	O
iconv_t	*(void)
)	O
(	O
-	O
1	int
)	O
)	O
{	O
iconv_close	(*(void))->(int)
(	O
po_lex_iconv	*(void)
)	O
;	O
po_lex_iconv	*(void)
=	O
(	O
iconv_t	*(void)
)	O
(	O
-	O
1	int
)	O
;	O
}	O
po_lex_weird_cjk	bool
=	O
false	int
;	O
}	O
