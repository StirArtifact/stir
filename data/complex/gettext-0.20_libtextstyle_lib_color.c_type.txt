bool	O
color_test_mode	O
;	O
enum	O
color_option	O
color_mode	enum
=	O
color_tty	O
;	O
const	O
char	O
*	O
style_file_name	*(char)
;	O
bool	O
handle_color_option	(*(char))->(int)
(	O
const	O
char	O
*	O
option	*(char)
)	O
{	O
if	O
(	O
option	*(char)
!=	O
NULL	O
)	O
{	O
if	O
(	O
strcmp	O
(	O
option	*(char)
,	O
"never"	*(char)
)	O
==	O
0	int
||	O
strcmp	O
(	O
option	*(char)
,	O
"no"	*(char)
)	O
==	O
0	int
)	O
color_mode	enum
=	O
color_no	O
;	O
else	O
if	O
(	O
strcmp	O
(	O
option	*(char)
,	O
"auto"	*(char)
)	O
==	O
0	int
||	O
strcmp	O
(	O
option	*(char)
,	O
"tty"	*(char)
)	O
==	O
0	int
)	O
color_mode	enum
=	O
color_tty	O
;	O
else	O
if	O
(	O
strcmp	O
(	O
option	*(char)
,	O
"always"	*(char)
)	O
==	O
0	int
||	O
strcmp	O
(	O
option	*(char)
,	O
"yes"	*(char)
)	O
==	O
0	int
)	O
color_mode	enum
=	O
color_yes	O
;	O
else	O
if	O
(	O
strcmp	O
(	O
option	*(char)
,	O
"html"	*(char)
)	O
==	O
0	int
)	O
color_mode	enum
=	O
color_html	O
;	O
else	O
if	O
(	O
strcmp	O
(	O
option	*(char)
,	O
"test"	*(char)
)	O
==	O
0	int
)	O
color_test_mode	O
=	O
true	O
;	O
else	O
{	O
fprintf	()->(int)
(	O
stderr	O
,	O
"invalid --color argument: %s\n"	*(char)
,	O
option	*(char)
)	O
;	O
return	O
true	O
;	O
}	O
}	O
else	O
color_mode	enum
=	O
color_yes	O
;	O
return	O
false	O
;	O
}	O
void	O
handle_style_option	(*(char))->(void)
(	O
const	O
char	O
*	O
option	*(char)
)	O
{	O
style_file_name	*(char)
=	O
option	*(char)
;	O
}	O
void	O
print_color_test	()->(void)
(	O
)	O
{	O
static	O
struct	O
{	O
const	O
char	O
*	O
name	*(char)
;	O
term_color_t	O
c	int
;	O
int	O
r	int
;	O
int	O
g	int
;	O
int	O
b	int
;	O
}	O
colors	array(struct(*(char),int,int,int,int))
[	O
]	O
=	O
{	O
{	O
"black"	*(char)
,	O
-	O
2	int
,	O
0	int
,	O
0	int
,	O
0	int
}	O
,	O
{	O
"blue"	*(char)
,	O
-	O
2	int
,	O
0	int
,	O
0	int
,	O
255	int
}	O
,	O
{	O
"green"	*(char)
,	O
-	O
2	int
,	O
0	int
,	O
255	int
,	O
0	int
}	O
,	O
{	O
"cyan"	*(char)
,	O
-	O
2	int
,	O
0	int
,	O
255	int
,	O
255	int
}	O
,	O
{	O
"red"	*(char)
,	O
-	O
2	int
,	O
255	int
,	O
0	int
,	O
0	int
}	O
,	O
{	O
"magenta"	*(char)
,	O
-	O
2	int
,	O
255	int
,	O
0	int
,	O
255	int
}	O
,	O
{	O
"yellow"	*(char)
,	O
-	O
2	int
,	O
255	int
,	O
255	int
,	O
0	int
}	O
,	O
{	O
"white"	*(char)
,	O
-	O
2	int
,	O
255	int
,	O
255	int
,	O
255	int
}	O
,	O
{	O
"default"	*(char)
,	O
COLOR_DEFAULT	O
}	O
}	O
;	O
term_ostream_t	O
stream	O
;	O
int	O
i	int
,	O
row	int
,	O
col	int
;	O
stream	O
=	O
term_ostream_create	()->(int)
(	O
1	int
,	O
"stdout"	*(char)
,	O
TTYCTL_AUTO	O
)	O
;	O
for	O
(	O
i	int
=	O
0	int
;	O
i	int
<	O
8	int
;	O
i	int
++	O
)	O
colors	array(struct(*(char),int,int,int,int))
[	O
i	int
]	O
.	O
c	int
=	O
term_ostream_rgb_to_color	()->(int)
(	O
stream	O
,	O
colors	array(struct(*(char),int,int,int,int))
[	O
i	int
]	O
.	O
r	int
,	O
colors	array(struct(*(char),int,int,int,int))
[	O
i	int
]	O
.	O
g	int
,	O
colors	array(struct(*(char),int,int,int,int))
[	O
i	int
]	O
.	O
b	int
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"Colors (foreground/background):\n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"       "	*(char)
)	O
;	O
for	O
(	O
col	int
=	O
0	int
;	O
col	int
<=	O
8	int
;	O
col	int
++	O
)	O
{	O
const	O
char	O
*	O
name	*(char)
=	O
colors	array(struct(*(char),int,int,int,int))
[	O
col	int
]	O
.	O
name	*(char)
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
name	*(char)
)	O
;	O
ostream_write_mem	()->(int)
(	O
stream	O
,	O
"        "	*(char)
,	O
7	int
-	O
strlen	O
(	O
name	*(char)
)	O
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
for	O
(	O
row	int
=	O
0	int
;	O
row	int
<=	O
8	int
;	O
row	int
++	O
)	O
{	O
const	O
char	O
*	O
name	*(char)
=	O
colors	array(struct(*(char),int,int,int,int))
[	O
row	int
]	O
.	O
name	*(char)
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
name	*(char)
)	O
;	O
ostream_write_mem	()->(int)
(	O
stream	O
,	O
"        "	*(char)
,	O
7	int
-	O
strlen	O
(	O
name	*(char)
)	O
)	O
;	O
for	O
(	O
col	int
=	O
0	int
;	O
col	int
<=	O
8	int
;	O
col	int
++	O
)	O
{	O
term_color_t	O
row_color	O
=	O
colors	array(struct(*(char),int,int,int,int))
[	O
row	int
]	O
.	O
c	int
;	O
term_color_t	O
col_color	O
=	O
colors	array(struct(*(char),int,int,int,int))
[	O
col	int
]	O
.	O
c	int
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|"	*(char)
)	O
;	O
term_ostream_set_color	()->(int)
(	O
stream	O
,	O
row_color	O
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
col_color	O
)	O
;	O
if	O
(	O
!	O
(	O
term_ostream_get_color	()->(int)
(	O
stream	O
)	O
==	O
row_color	O
&&	O
term_ostream_get_bgcolor	()->(int)
(	O
stream	O
)	O
==	O
col_color	O
)	O
)	O
abort	O
(	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
" Words "	*(char)
)	O
;	O
term_ostream_set_color	()->(int)
(	O
stream	O
,	O
COLOR_DEFAULT	O
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
COLOR_DEFAULT	O
)	O
;	O
if	O
(	O
!	O
(	O
term_ostream_get_color	()->(int)
(	O
stream	O
)	O
==	O
COLOR_DEFAULT	O
&&	O
term_ostream_get_bgcolor	()->(int)
(	O
stream	O
)	O
==	O
COLOR_DEFAULT	O
)	O
)	O
abort	O
(	O
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"Colors (hue/saturation):\n"	*(char)
)	O
;	O
for	O
(	O
row	int
=	O
0	int
;	O
row	int
<=	O
17	int
;	O
row	int
++	O
)	O
{	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
row	int
==	O
0	int
?	O
"red:     "	*(char)
:	O
"         "	*(char)
)	O
;	O
for	O
(	O
col	int
=	O
0	int
;	O
col	int
<=	O
64	int
;	O
col	int
++	O
)	O
{	O
int	O
r	int
=	O
255	int
;	O
int	O
b	int
=	O
(	O
int	O
)	O
(	O
255.0f	int
/	O
64.0f	int
*	O
col	int
+	O
0.5f	int
)	O
;	O
int	O
g	int
=	O
b	int
+	O
(	O
int	O
)	O
(	O
row	int
/	O
17.0f	int
*	O
(	O
r	int
-	O
b	int
)	O
+	O
0.5f	int
)	O
;	O
term_color_t	O
c	int
=	O
term_ostream_rgb_to_color	()->(int)
(	O
stream	O
,	O
r	int
,	O
g	int
,	O
b	int
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
c	int
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
" "	*(char)
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
COLOR_DEFAULT	O
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
}	O
for	O
(	O
row	int
=	O
17	int
;	O
row	int
>=	O
0	int
;	O
row	int
--	O
)	O
{	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
row	int
==	O
17	int
?	O
"yellow:  "	*(char)
:	O
"         "	*(char)
)	O
;	O
for	O
(	O
col	int
=	O
0	int
;	O
col	int
<=	O
64	int
;	O
col	int
++	O
)	O
{	O
int	O
g	int
=	O
255	int
;	O
int	O
b	int
=	O
(	O
int	O
)	O
(	O
255.0f	int
/	O
64.0f	int
*	O
col	int
+	O
0.5f	int
)	O
;	O
int	O
r	int
=	O
b	int
+	O
(	O
int	O
)	O
(	O
row	int
/	O
17.0f	int
*	O
(	O
g	int
-	O
b	int
)	O
+	O
0.5f	int
)	O
;	O
term_color_t	O
c	int
=	O
term_ostream_rgb_to_color	()->(int)
(	O
stream	O
,	O
r	int
,	O
g	int
,	O
b	int
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
c	int
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
" "	*(char)
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
COLOR_DEFAULT	O
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
}	O
for	O
(	O
row	int
=	O
0	int
;	O
row	int
<=	O
17	int
;	O
row	int
++	O
)	O
{	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
row	int
==	O
0	int
?	O
"green:   "	*(char)
:	O
"         "	*(char)
)	O
;	O
for	O
(	O
col	int
=	O
0	int
;	O
col	int
<=	O
64	int
;	O
col	int
++	O
)	O
{	O
int	O
g	int
=	O
255	int
;	O
int	O
r	int
=	O
(	O
int	O
)	O
(	O
255.0f	int
/	O
64.0f	int
*	O
col	int
+	O
0.5f	int
)	O
;	O
int	O
b	int
=	O
r	int
+	O
(	O
int	O
)	O
(	O
row	int
/	O
17.0f	int
*	O
(	O
g	int
-	O
r	int
)	O
+	O
0.5f	int
)	O
;	O
term_color_t	O
c	int
=	O
term_ostream_rgb_to_color	()->(int)
(	O
stream	O
,	O
r	int
,	O
g	int
,	O
b	int
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
c	int
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
" "	*(char)
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
COLOR_DEFAULT	O
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
}	O
for	O
(	O
row	int
=	O
17	int
;	O
row	int
>=	O
0	int
;	O
row	int
--	O
)	O
{	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
row	int
==	O
17	int
?	O
"cyan:    "	*(char)
:	O
"         "	*(char)
)	O
;	O
for	O
(	O
col	int
=	O
0	int
;	O
col	int
<=	O
64	int
;	O
col	int
++	O
)	O
{	O
int	O
b	int
=	O
255	int
;	O
int	O
r	int
=	O
(	O
int	O
)	O
(	O
255.0f	int
/	O
64.0f	int
*	O
col	int
+	O
0.5f	int
)	O
;	O
int	O
g	int
=	O
r	int
+	O
(	O
int	O
)	O
(	O
row	int
/	O
17.0f	int
*	O
(	O
b	int
-	O
r	int
)	O
+	O
0.5f	int
)	O
;	O
term_color_t	O
c	int
=	O
term_ostream_rgb_to_color	()->(int)
(	O
stream	O
,	O
r	int
,	O
g	int
,	O
b	int
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
c	int
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
" "	*(char)
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
COLOR_DEFAULT	O
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
}	O
for	O
(	O
row	int
=	O
0	int
;	O
row	int
<=	O
17	int
;	O
row	int
++	O
)	O
{	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
row	int
==	O
0	int
?	O
"blue:    "	*(char)
:	O
"         "	*(char)
)	O
;	O
for	O
(	O
col	int
=	O
0	int
;	O
col	int
<=	O
64	int
;	O
col	int
++	O
)	O
{	O
int	O
b	int
=	O
255	int
;	O
int	O
g	int
=	O
(	O
int	O
)	O
(	O
255.0f	int
/	O
64.0f	int
*	O
col	int
+	O
0.5f	int
)	O
;	O
int	O
r	int
=	O
g	int
+	O
(	O
int	O
)	O
(	O
row	int
/	O
17.0f	int
*	O
(	O
b	int
-	O
g	int
)	O
+	O
0.5f	int
)	O
;	O
term_color_t	O
c	int
=	O
term_ostream_rgb_to_color	()->(int)
(	O
stream	O
,	O
r	int
,	O
g	int
,	O
b	int
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
c	int
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
" "	*(char)
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
COLOR_DEFAULT	O
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
}	O
for	O
(	O
row	int
=	O
17	int
;	O
row	int
>=	O
0	int
;	O
row	int
--	O
)	O
{	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
row	int
==	O
17	int
?	O
"magenta: "	*(char)
:	O
row	int
==	O
0	int
?	O
"red:     "	*(char)
:	O
"         "	*(char)
)	O
;	O
for	O
(	O
col	int
=	O
0	int
;	O
col	int
<=	O
64	int
;	O
col	int
++	O
)	O
{	O
int	O
r	int
=	O
255	int
;	O
int	O
g	int
=	O
(	O
int	O
)	O
(	O
255.0f	int
/	O
64.0f	int
*	O
col	int
+	O
0.5f	int
)	O
;	O
int	O
b	int
=	O
g	int
+	O
(	O
int	O
)	O
(	O
row	int
/	O
17.0f	int
*	O
(	O
r	int
-	O
g	int
)	O
+	O
0.5f	int
)	O
;	O
term_color_t	O
c	int
=	O
term_ostream_rgb_to_color	()->(int)
(	O
stream	O
,	O
r	int
,	O
g	int
,	O
b	int
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
c	int
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
" "	*(char)
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
COLOR_DEFAULT	O
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"Weights:\n"	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_NORMAL	O
)	O
;	O
if	O
(	O
term_ostream_get_weight	()->(int)
(	O
stream	O
)	O
!=	O
WEIGHT_NORMAL	O
)	O
abort	O
(	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"normal, "	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_BOLD	O
)	O
;	O
if	O
(	O
term_ostream_get_weight	()->(int)
(	O
stream	O
)	O
!=	O
WEIGHT_BOLD	O
)	O
abort	O
(	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"bold, "	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_DEFAULT	O
)	O
;	O
if	O
(	O
term_ostream_get_weight	()->(int)
(	O
stream	O
)	O
!=	O
WEIGHT_DEFAULT	O
)	O
abort	O
(	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"default \n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"Postures:\n"	*(char)
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_NORMAL	O
)	O
;	O
if	O
(	O
term_ostream_get_posture	()->(int)
(	O
stream	O
)	O
!=	O
POSTURE_NORMAL	O
)	O
abort	O
(	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"normal, "	*(char)
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_ITALIC	O
)	O
;	O
if	O
(	O
term_ostream_get_posture	()->(int)
(	O
stream	O
)	O
!=	O
POSTURE_ITALIC	O
)	O
abort	O
(	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"italic, "	*(char)
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_DEFAULT	O
)	O
;	O
if	O
(	O
term_ostream_get_posture	()->(int)
(	O
stream	O
)	O
!=	O
POSTURE_DEFAULT	O
)	O
abort	O
(	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"default \n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"Text decorations:\n"	*(char)
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_OFF	O
)	O
;	O
if	O
(	O
term_ostream_get_underline	()->(int)
(	O
stream	O
)	O
!=	O
UNDERLINE_OFF	O
)	O
abort	O
(	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"normal, "	*(char)
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_ON	O
)	O
;	O
if	O
(	O
term_ostream_get_underline	()->(int)
(	O
stream	O
)	O
!=	O
UNDERLINE_ON	O
)	O
abort	O
(	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"underlined, "	*(char)
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_DEFAULT	O
)	O
;	O
if	O
(	O
term_ostream_get_underline	()->(int)
(	O
stream	O
)	O
!=	O
UNDERLINE_DEFAULT	O
)	O
abort	O
(	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"default \n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"Colors (foreground) mixed with attributes:\n"	*(char)
)	O
;	O
for	O
(	O
row	int
=	O
0	int
;	O
row	int
<=	O
8	int
;	O
row	int
++	O
)	O
{	O
const	O
char	O
*	O
name	*(char)
=	O
colors	array(struct(*(char),int,int,int,int))
[	O
row	int
]	O
.	O
name	*(char)
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
name	*(char)
)	O
;	O
ostream_write_mem	()->(int)
(	O
stream	O
,	O
"        "	*(char)
,	O
7	int
-	O
strlen	O
(	O
name	*(char)
)	O
)	O
;	O
term_ostream_set_color	()->(int)
(	O
stream	O
,	O
colors	array(struct(*(char),int,int,int,int))
[	O
row	int
]	O
.	O
c	int
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_BOLD	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"bold"	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_NORMAL	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_ITALIC	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"italic"	*(char)
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_NORMAL	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_ON	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"underlined"	*(char)
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_OFF	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_color	()->(int)
(	O
stream	O
,	O
COLOR_DEFAULT	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n       "	*(char)
)	O
;	O
term_ostream_set_color	()->(int)
(	O
stream	O
,	O
colors	array(struct(*(char),int,int,int,int))
[	O
row	int
]	O
.	O
c	int
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_BOLD	O
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_ITALIC	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"bold+italic"	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_NORMAL	O
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_NORMAL	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_BOLD	O
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_ON	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"bold+underl"	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_NORMAL	O
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_OFF	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_ITALIC	O
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_ON	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"italic+underl"	*(char)
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_NORMAL	O
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_OFF	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_color	()->(int)
(	O
stream	O
,	O
COLOR_DEFAULT	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"Colors (background) mixed with attributes:\n"	*(char)
)	O
;	O
for	O
(	O
row	int
=	O
0	int
;	O
row	int
<=	O
8	int
;	O
row	int
++	O
)	O
{	O
const	O
char	O
*	O
name	*(char)
=	O
colors	array(struct(*(char),int,int,int,int))
[	O
row	int
]	O
.	O
name	*(char)
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
name	*(char)
)	O
;	O
ostream_write_mem	()->(int)
(	O
stream	O
,	O
"        "	*(char)
,	O
7	int
-	O
strlen	O
(	O
name	*(char)
)	O
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
colors	array(struct(*(char),int,int,int,int))
[	O
row	int
]	O
.	O
c	int
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_BOLD	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"bold"	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_NORMAL	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_ITALIC	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"italic"	*(char)
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_NORMAL	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_ON	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"underlined"	*(char)
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_OFF	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
COLOR_DEFAULT	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n       "	*(char)
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
colors	array(struct(*(char),int,int,int,int))
[	O
row	int
]	O
.	O
c	int
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_BOLD	O
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_ITALIC	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"bold+italic"	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_NORMAL	O
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_NORMAL	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_BOLD	O
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_ON	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"bold+underl"	*(char)
)	O
;	O
term_ostream_set_weight	()->(int)
(	O
stream	O
,	O
WEIGHT_NORMAL	O
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_OFF	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_ITALIC	O
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_ON	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"italic+underl"	*(char)
)	O
;	O
term_ostream_set_posture	()->(int)
(	O
stream	O
,	O
POSTURE_NORMAL	O
)	O
;	O
term_ostream_set_underline	()->(int)
(	O
stream	O
,	O
UNDERLINE_OFF	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"|normal|"	*(char)
)	O
;	O
term_ostream_set_bgcolor	()->(int)
(	O
stream	O
,	O
COLOR_DEFAULT	O
)	O
;	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
}	O
ostream_write_str	()->(int)
(	O
stream	O
,	O
"\n"	*(char)
)	O
;	O
ostream_free	()->(int)
(	O
stream	O
)	O
;	O
}	O
static	O
const	O
char	O
*	O
style_file_lookup	(*(char),*(char))->(*(char))
(	O
const	O
char	O
*	O
file_name	*(char)
,	O
const	O
char	O
*	O
stylesdir_after_install	*(char)
)	O
{	O
if	O
(	O
!	O
IS_PATH_WITH_DIR	()->(int)
(	O
file_name	*(char)
)	O
)	O
{	O
struct	O
stat	()->(int)
statbuf	struct
;	O
if	O
(	O
stat	()->(int)
(	O
file_name	*(char)
,	O
&	O
statbuf	struct
)	O
<	O
0	int
)	O
{	O
char	O
*	O
possible_file_name	*(char)
=	O
xconcatenated_filename	O
(	O
stylesdir_after_install	*(char)
,	O
file_name	*(char)
,	O
NULL	O
)	O
;	O
if	O
(	O
stat	()->(int)
(	O
possible_file_name	*(char)
,	O
&	O
statbuf	struct
)	O
>=	O
0	int
)	O
{	O
return	O
possible_file_name	*(char)
;	O
}	O
free	()->(int)
(	O
possible_file_name	*(char)
)	O
;	O
}	O
}	O
return	O
file_name	*(char)
;	O
}	O
void	O
style_file_prepare	(*(char),*(char),*(char),*(char))->(void)
(	O
const	O
char	O
*	O
style_file_envvar	*(char)
,	O
const	O
char	O
*	O
stylesdir_envvar	*(char)
,	O
const	O
char	O
*	O
stylesdir_after_install	*(char)
,	O
const	O
char	O
*	O
default_style_file	*(char)
)	O
{	O
if	O
(	O
style_file_name	*(char)
==	O
NULL	O
)	O
{	O
const	O
char	O
*	O
user_preference	*(char)
=	O
getenv	()->(int)
(	O
style_file_envvar	*(char)
)	O
;	O
if	O
(	O
user_preference	*(char)
!=	O
NULL	O
&&	O
user_preference	*(char)
[	O
0	int
]	O
!=	O
'\0'	O
)	O
style_file_name	*(char)
=	O
style_file_lookup	(*(char),*(char))->(*(char))
(	O
xstrdup	O
(	O
user_preference	*(char)
)	O
,	O
stylesdir_after_install	*(char)
)	O
;	O
else	O
{	O
const	O
char	O
*	O
stylesdir	*(char)
;	O
stylesdir	*(char)
=	O
getenv	()->(int)
(	O
stylesdir_envvar	*(char)
)	O
;	O
if	O
(	O
stylesdir	*(char)
==	O
NULL	O
||	O
stylesdir	*(char)
[	O
0	int
]	O
==	O
'\0'	O
)	O
stylesdir	*(char)
=	O
stylesdir_after_install	*(char)
;	O
style_file_name	*(char)
=	O
xconcatenated_filename	O
(	O
stylesdir	*(char)
,	O
default_style_file	*(char)
,	O
NULL	O
)	O
;	O
}	O
}	O
else	O
style_file_name	*(char)
=	O
style_file_lookup	(*(char),*(char))->(*(char))
(	O
style_file_name	*(char)
,	O
stylesdir_after_install	*(char)
)	O
;	O
}	O
