struct	O
ReaderStruct	struct
{	O
bool	enum
transpose_axes	enum
;	O
int	O
log_axis	int
;	O
FILE	struct
*	O
input	pointer
;	O
data_type	enum
format_type	enum
;	O
bool	enum
auto_abscissa	enum
;	O
double	O
delta_x	double
;	O
double	O
initial_abscissa	double
;	O
bool	enum
auto_bump	enum
;	O
int	O
symbol	int
;	O
double	O
symbol_size	double
;	O
const	O
char	O
*	O
symbol_font_name	pointer
;	O
int	O
linemode	int
;	O
double	O
line_width	double
;	O
double	O
fill_fraction	double
;	O
bool	enum
use_color	enum
;	O
bool	enum
need_break	enum
;	O
double	O
abscissa	double
;	O
}	O
;	O
typedef	O
enum	O
{	O
IN_PROGRESS	int
,	O
ENDED_BY_EOF	int
,	O
ENDED_BY_DATASET_TERMINATOR	int
,	O
ENDED_BY_MODE_CHANGE	int
}	O
dataset_status_t	enum
;	O
static	O
bool	enum
skip_some_whitespace	function
(	O
FILE	struct
*	O
stream	pointer
)	O
;	O
static	O
dataset_status_t	enum
read_and_plot_dataset	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Multigrapher	struct
*	O
multigrapher	pointer
)	O
;	O
static	O
dataset_status_t	enum
read_dataset	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Point	struct
*	O
*	O
p	pointer
,	O
int	O
*	O
length	long
,	O
int	O
*	O
no_of_points	pointer
)	O
;	O
static	O
dataset_status_t	enum
read_point	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Point	struct
*	O
point	pointer
)	O
;	O
static	O
dataset_status_t	enum
read_point_ascii	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Point	struct
*	O
point	pointer
)	O
;	O
static	O
dataset_status_t	enum
read_point_ascii_errorbar	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Point	struct
*	O
point	pointer
)	O
;	O
static	O
dataset_status_t	enum
read_point_binary	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Point	struct
*	O
point	pointer
)	O
;	O
static	O
dataset_status_t	enum
read_point_gnuplot	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Point	struct
*	O
point	pointer
)	O
;	O
static	O
void	O
reset_reader	function
(	O
Reader	struct
*	O
reader	pointer
)	O
;	O
static	O
void	O
skip_all_whitespace	function
(	O
FILE	struct
*	O
stream	pointer
)	O
;	O
Reader	struct
*	O
new_reader	function
(	O
FILE	struct
*	O
input	pointer
,	O
data_type	enum
format_type	enum
,	O
bool	enum
auto_abscissa	enum
,	O
double	O
delta_x	double
,	O
double	O
abscissa	double
,	O
bool	enum
transpose_axes	enum
,	O
int	O
log_axis	int
,	O
bool	enum
auto_bump	enum
,	O
int	O
symbol	int
,	O
double	O
symbol_size	double
,	O
const	O
char	O
*	O
symbol_font_name	pointer
,	O
int	O
linemode	int
,	O
double	O
line_width	double
,	O
double	O
fill_fraction	double
,	O
bool	enum
use_color	enum
)	O
{	O
Reader	struct
*	O
reader	pointer
;	O
reader	pointer
=	O
(	O
Reader	struct
*	O
)	O
xmalloc	function
(	O
sizeof	O
(	O
Reader	struct
)	O
)	O
;	O
reader	pointer
->	O
need_break	enum
=	O
true	int
;	O
reader	pointer
->	O
input	pointer
=	O
input	pointer
;	O
reader	pointer
->	O
format_type	enum
=	O
format_type	enum
;	O
reader	pointer
->	O
auto_abscissa	enum
=	O
auto_abscissa	enum
;	O
reader	pointer
->	O
delta_x	double
=	O
delta_x	double
;	O
reader	pointer
->	O
initial_abscissa	double
=	O
abscissa	double
;	O
reader	pointer
->	O
abscissa	double
=	O
reader	pointer
->	O
initial_abscissa	double
;	O
reader	pointer
->	O
transpose_axes	enum
=	O
transpose_axes	enum
;	O
reader	pointer
->	O
log_axis	int
=	O
log_axis	int
;	O
reader	pointer
->	O
auto_bump	enum
=	O
auto_bump	enum
;	O
reader	pointer
->	O
symbol	int
=	O
symbol	int
;	O
reader	pointer
->	O
symbol_size	double
=	O
symbol_size	double
;	O
reader	pointer
->	O
symbol_font_name	pointer
=	O
symbol_font_name	pointer
;	O
reader	pointer
->	O
linemode	int
=	O
linemode	int
;	O
reader	pointer
->	O
line_width	double
=	O
line_width	double
;	O
reader	pointer
->	O
fill_fraction	double
=	O
fill_fraction	double
;	O
reader	pointer
->	O
use_color	enum
=	O
use_color	enum
;	O
return	O
reader	pointer
;	O
}	O
void	O
delete_reader	function
(	O
Reader	struct
*	O
reader	pointer
)	O
{	O
free	function
(	O
reader	pointer
)	O
;	O
return	O
;	O
}	O
void	O
alter_reader_parameters	function
(	O
Reader	struct
*	O
reader	pointer
,	O
FILE	struct
*	O
input	pointer
,	O
data_type	enum
format_type	enum
,	O
bool	enum
auto_abscissa	enum
,	O
double	O
delta_x	double
,	O
double	O
abscissa	double
,	O
int	O
symbol	int
,	O
double	O
symbol_size	double
,	O
const	O
char	O
*	O
symbol_font_name	pointer
,	O
int	O
linemode	int
,	O
double	O
line_width	double
,	O
double	O
fill_fraction	double
,	O
bool	enum
use_color	enum
,	O
bool	enum
new_symbol	enum
,	O
bool	enum
new_symbol_size	enum
,	O
bool	enum
new_symbol_font_name	enum
,	O
bool	enum
new_linemode	enum
,	O
bool	enum
new_line_width	enum
,	O
bool	enum
new_fill_fraction	enum
,	O
bool	enum
new_use_color	enum
)	O
{	O
reader	pointer
->	O
need_break	enum
=	O
true	int
;	O
reader	pointer
->	O
input	pointer
=	O
input	pointer
;	O
reader	pointer
->	O
format_type	enum
=	O
format_type	enum
;	O
reader	pointer
->	O
auto_abscissa	enum
=	O
auto_abscissa	enum
;	O
reader	pointer
->	O
delta_x	double
=	O
delta_x	double
;	O
reader	pointer
->	O
initial_abscissa	double
=	O
abscissa	double
;	O
reader	pointer
->	O
abscissa	double
=	O
reader	pointer
->	O
initial_abscissa	double
;	O
if	O
(	O
new_symbol	enum
)	O
reader	pointer
->	O
symbol	int
=	O
symbol	int
;	O
if	O
(	O
new_symbol_size	enum
)	O
reader	pointer
->	O
symbol_size	double
=	O
symbol_size	double
;	O
if	O
(	O
new_symbol_font_name	enum
)	O
reader	pointer
->	O
symbol_font_name	pointer
=	O
symbol_font_name	pointer
;	O
if	O
(	O
new_linemode	enum
)	O
reader	pointer
->	O
linemode	int
=	O
linemode	int
;	O
if	O
(	O
new_line_width	enum
)	O
reader	pointer
->	O
line_width	double
=	O
line_width	double
;	O
if	O
(	O
new_fill_fraction	enum
)	O
reader	pointer
->	O
fill_fraction	double
=	O
fill_fraction	double
;	O
if	O
(	O
new_use_color	enum
)	O
reader	pointer
->	O
use_color	enum
=	O
use_color	enum
;	O
return	O
;	O
}	O
static	O
dataset_status_t	enum
read_point	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Point	struct
*	O
point	pointer
)	O
{	O
dataset_status_t	enum
status	enum
;	O
point	pointer
->	O
symbol	int
=	O
reader	pointer
->	O
symbol	int
;	O
point	pointer
->	O
symbol_size	double
=	O
reader	pointer
->	O
symbol_size	double
;	O
point	pointer
->	O
symbol_font_name	pointer
=	O
reader	pointer
->	O
symbol_font_name	pointer
;	O
point	pointer
->	O
linemode	int
=	O
reader	pointer
->	O
linemode	int
;	O
point	pointer
->	O
line_width	double
=	O
reader	pointer
->	O
line_width	double
;	O
point	pointer
->	O
fill_fraction	double
=	O
reader	pointer
->	O
fill_fraction	double
;	O
point	pointer
->	O
use_color	enum
=	O
reader	pointer
->	O
use_color	enum
;	O
point	pointer
->	O
have_x_errorbar	enum
=	O
false	int
;	O
point	pointer
->	O
have_y_errorbar	enum
=	O
(	O
reader	pointer
->	O
format_type	enum
==	O
T_ASCII_ERRORBAR	int
?	O
true	int
:	O
false	int
)	O
;	O
head	O
:	O
switch	O
(	O
reader	pointer
->	O
format_type	enum
)	O
{	O
case	O
T_ASCII	int
:	O
default	O
:	O
status	enum
=	O
read_point_ascii	function
(	O
reader	pointer
,	O
point	pointer
)	O
;	O
break	O
;	O
case	O
T_SINGLE	int
:	O
case	O
T_DOUBLE	int
:	O
case	O
T_INTEGER	int
:	O
status	enum
=	O
read_point_binary	function
(	O
reader	pointer
,	O
point	pointer
)	O
;	O
break	O
;	O
case	O
T_ASCII_ERRORBAR	int
:	O
status	enum
=	O
read_point_ascii_errorbar	function
(	O
reader	pointer
,	O
point	pointer
)	O
;	O
break	O
;	O
case	O
T_GNUPLOT	int
:	O
status	enum
=	O
read_point_gnuplot	function
(	O
reader	pointer
,	O
point	pointer
)	O
;	O
break	O
;	O
}	O
if	O
(	O
status	enum
==	O
IN_PROGRESS	int
)	O
{	O
bool	enum
bad_point	enum
=	O
false	int
;	O
if	O
(	O
reader	pointer
->	O
log_axis	int
&	O
X_AXIS	int
)	O
{	O
if	O
(	O
point	pointer
->	O
x	double
>	O
0.0	int
)	O
point	pointer
->	O
x	double
=	O
log10	function
(	O
point	pointer
->	O
x	double
)	O
;	O
else	O
bad_point	enum
=	O
true	int
;	O
if	O
(	O
point	pointer
->	O
have_x_errorbar	enum
)	O
{	O
if	O
(	O
point	pointer
->	O
xmin	double
>	O
0.0	int
)	O
point	pointer
->	O
xmin	double
=	O
log10	function
(	O
point	pointer
->	O
xmin	double
)	O
;	O
else	O
bad_point	enum
=	O
true	int
;	O
if	O
(	O
point	pointer
->	O
xmax	double
>	O
0.0	int
)	O
point	pointer
->	O
xmax	double
=	O
log10	function
(	O
point	pointer
->	O
xmax	double
)	O
;	O
else	O
bad_point	enum
=	O
true	int
;	O
}	O
if	O
(	O
bad_point	enum
)	O
{	O
fprintf	function
(	O
stderr	pointer
,	O
"%s: the inappropriate point (%g,%g) is dropped, as this is a log plot\n"	pointer
,	O
progname	pointer
,	O
point	pointer
->	O
x	double
,	O
point	pointer
->	O
y	double
)	O
;	O
reader	pointer
->	O
need_break	enum
=	O
true	int
;	O
goto	O
head	O
;	O
}	O
}	O
if	O
(	O
reader	pointer
->	O
log_axis	int
&	O
Y_AXIS	int
)	O
{	O
if	O
(	O
point	pointer
->	O
y	double
>	O
0.0	int
)	O
point	pointer
->	O
y	double
=	O
log10	function
(	O
point	pointer
->	O
y	double
)	O
;	O
else	O
bad_point	enum
=	O
true	int
;	O
if	O
(	O
point	pointer
->	O
have_y_errorbar	enum
)	O
{	O
if	O
(	O
point	pointer
->	O
ymin	double
>	O
0.0	int
)	O
point	pointer
->	O
ymin	double
=	O
log10	function
(	O
point	pointer
->	O
ymin	double
)	O
;	O
else	O
bad_point	enum
=	O
true	int
;	O
if	O
(	O
point	pointer
->	O
ymax	double
>	O
0.0	int
)	O
point	pointer
->	O
ymax	double
=	O
log10	function
(	O
point	pointer
->	O
ymax	double
)	O
;	O
else	O
bad_point	enum
=	O
true	int
;	O
}	O
if	O
(	O
bad_point	enum
)	O
{	O
fprintf	function
(	O
stderr	pointer
,	O
"%s: the inappropriate point (%g,%g) is dropped, as this is a log plot\n"	pointer
,	O
progname	pointer
,	O
point	pointer
->	O
x	double
,	O
point	pointer
->	O
y	double
)	O
;	O
reader	pointer
->	O
need_break	enum
=	O
true	int
;	O
goto	O
head	O
;	O
}	O
}	O
if	O
(	O
reader	pointer
->	O
transpose_axes	enum
)	O
{	O
double	O
tmp	double
;	O
bool	enum
tmp_bool	enum
;	O
tmp	double
=	O
point	pointer
->	O
x	double
;	O
point	pointer
->	O
x	double
=	O
point	pointer
->	O
y	double
;	O
point	pointer
->	O
y	double
=	O
tmp	double
;	O
tmp	double
=	O
point	pointer
->	O
xmin	double
;	O
point	pointer
->	O
xmin	double
=	O
point	pointer
->	O
ymin	double
;	O
point	pointer
->	O
ymin	double
=	O
tmp	double
;	O
tmp	double
=	O
point	pointer
->	O
xmax	double
;	O
point	pointer
->	O
xmax	double
=	O
point	pointer
->	O
ymax	double
;	O
point	pointer
->	O
ymax	double
=	O
tmp	double
;	O
tmp_bool	enum
=	O
point	pointer
->	O
have_x_errorbar	enum
;	O
point	pointer
->	O
have_x_errorbar	enum
=	O
point	pointer
->	O
have_y_errorbar	enum
;	O
point	pointer
->	O
have_y_errorbar	enum
=	O
tmp_bool	enum
;	O
}	O
if	O
(	O
reader	pointer
->	O
need_break	enum
)	O
point	pointer
->	O
pendown	enum
=	O
false	int
;	O
else	O
point	pointer
->	O
pendown	enum
=	O
true	int
;	O
reader	pointer
->	O
need_break	enum
=	O
false	int
;	O
}	O
return	O
status	enum
;	O
}	O
static	O
dataset_status_t	enum
read_point_ascii	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Point	struct
*	O
point	pointer
)	O
{	O
int	O
items_read	int
,	O
lookahead	int
;	O
bool	enum
two_newlines	enum
;	O
FILE	struct
*	O
input	pointer
=	O
reader	pointer
->	O
input	pointer
;	O
head	O
:	O
two_newlines	enum
=	O
skip_some_whitespace	function
(	O
input	pointer
)	O
;	O
if	O
(	O
two_newlines	enum
)	O
return	O
ENDED_BY_DATASET_TERMINATOR	int
;	O
if	O
(	O
feof	function
(	O
input	pointer
)	O
)	O
return	O
ENDED_BY_EOF	int
;	O
lookahead	int
=	O
getc	function
(	O
input	pointer
)	O
;	O
ungetc	function
(	O
lookahead	int
,	O
input	pointer
)	O
;	O
if	O
(	O
lookahead	int
==	O
(	O
int	O
)	O
'#'	O
)	O
{	O
int	O
new_symbol	enum
,	O
new_linemode	enum
;	O
int	O
items_read	int
;	O
items_read	int
=	O
fscanf	function
(	O
input	pointer
,	O
"# m = %d, S = %d"	pointer
,	O
&	O
new_linemode	enum
,	O
&	O
new_symbol	enum
)	O
;	O
if	O
(	O
items_read	int
==	O
2	int
)	O
{	O
reader	pointer
->	O
linemode	int
=	O
new_linemode	enum
;	O
reader	pointer
->	O
symbol	int
=	O
new_symbol	enum
;	O
return	O
ENDED_BY_MODE_CHANGE	int
;	O
}	O
else	O
{	O
char	O
c	char
;	O
do	O
{	O
items_read	int
=	O
fread	function
(	O
&	O
c	char
,	O
sizeof	O
(	O
c	char
)	O
,	O
1	int
,	O
input	pointer
)	O
;	O
if	O
(	O
items_read	int
<=	O
0	int
)	O
return	O
ENDED_BY_EOF	int
;	O
}	O
while	O
(	O
c	char
!=	O
'\n'	O
)	O
;	O
ungetc	function
(	O
(	O
int	O
)	O
'\n'	O
,	O
input	pointer
)	O
;	O
goto	O
head	O
;	O
}	O
}	O
if	O
(	O
reader	pointer
->	O
auto_abscissa	enum
)	O
{	O
point	pointer
->	O
x	double
=	O
reader	pointer
->	O
abscissa	double
;	O
reader	pointer
->	O
abscissa	double
+=	O
reader	pointer
->	O
delta_x	double
;	O
}	O
else	O
{	O
items_read	int
=	O
fscanf	function
(	O
input	pointer
,	O
"%lf"	pointer
,	O
&	O
(	O
point	pointer
->	O
x	double
)	O
)	O
;	O
if	O
(	O
items_read	int
!=	O
1	int
)	O
return	O
ENDED_BY_EOF	int
;	O
}	O
items_read	int
=	O
fscanf	function
(	O
input	pointer
,	O
"%lf"	pointer
,	O
&	O
(	O
point	pointer
->	O
y	double
)	O
)	O
;	O
if	O
(	O
items_read	int
==	O
1	int
)	O
return	O
IN_PROGRESS	int
;	O
else	O
{	O
if	O
(	O
!	O
reader	pointer
->	O
auto_abscissa	enum
)	O
fprintf	function
(	O
stderr	pointer
,	O
"%s: an input file terminated prematurely\n"	pointer
,	O
progname	pointer
)	O
;	O
return	O
ENDED_BY_EOF	int
;	O
}	O
}	O
static	O
dataset_status_t	enum
read_point_ascii_errorbar	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Point	struct
*	O
point	pointer
)	O
{	O
int	O
items_read	int
,	O
lookahead	int
;	O
bool	enum
two_newlines	enum
;	O
double	O
error_size	double
;	O
FILE	struct
*	O
input	pointer
=	O
reader	pointer
->	O
input	pointer
;	O
head	O
:	O
two_newlines	enum
=	O
skip_some_whitespace	function
(	O
input	pointer
)	O
;	O
if	O
(	O
two_newlines	enum
)	O
return	O
ENDED_BY_DATASET_TERMINATOR	int
;	O
if	O
(	O
feof	function
(	O
input	pointer
)	O
)	O
return	O
ENDED_BY_EOF	int
;	O
lookahead	int
=	O
getc	function
(	O
input	pointer
)	O
;	O
ungetc	function
(	O
lookahead	int
,	O
input	pointer
)	O
;	O
if	O
(	O
lookahead	int
==	O
(	O
int	O
)	O
'#'	O
)	O
{	O
int	O
new_symbol	enum
,	O
new_linemode	enum
;	O
int	O
items_read	int
;	O
items_read	int
=	O
fscanf	function
(	O
input	pointer
,	O
"# m = %d, S = %d"	pointer
,	O
&	O
new_linemode	enum
,	O
&	O
new_symbol	enum
)	O
;	O
if	O
(	O
items_read	int
==	O
2	int
)	O
{	O
reader	pointer
->	O
linemode	int
=	O
new_linemode	enum
;	O
reader	pointer
->	O
symbol	int
=	O
new_symbol	enum
;	O
return	O
ENDED_BY_MODE_CHANGE	int
;	O
}	O
else	O
{	O
char	O
c	char
;	O
do	O
{	O
items_read	int
=	O
fread	function
(	O
&	O
c	char
,	O
sizeof	O
(	O
c	char
)	O
,	O
1	int
,	O
input	pointer
)	O
;	O
if	O
(	O
items_read	int
<=	O
0	int
)	O
return	O
ENDED_BY_EOF	int
;	O
}	O
while	O
(	O
c	char
!=	O
'\n'	O
)	O
;	O
ungetc	function
(	O
(	O
int	O
)	O
'\n'	O
,	O
input	pointer
)	O
;	O
goto	O
head	O
;	O
}	O
}	O
if	O
(	O
reader	pointer
->	O
auto_abscissa	enum
)	O
{	O
point	pointer
->	O
x	double
=	O
reader	pointer
->	O
abscissa	double
;	O
reader	pointer
->	O
abscissa	double
+=	O
reader	pointer
->	O
delta_x	double
;	O
}	O
else	O
{	O
items_read	int
=	O
fscanf	function
(	O
input	pointer
,	O
"%lf"	pointer
,	O
&	O
(	O
point	pointer
->	O
x	double
)	O
)	O
;	O
if	O
(	O
items_read	int
!=	O
1	int
)	O
return	O
ENDED_BY_EOF	int
;	O
}	O
items_read	int
=	O
fscanf	function
(	O
input	pointer
,	O
"%lf"	pointer
,	O
&	O
(	O
point	pointer
->	O
y	double
)	O
)	O
;	O
if	O
(	O
items_read	int
!=	O
1	int
)	O
{	O
if	O
(	O
!	O
reader	pointer
->	O
auto_abscissa	enum
)	O
fprintf	function
(	O
stderr	pointer
,	O
"%s: an input file (in errorbar format) terminated prematurely\n"	pointer
,	O
progname	pointer
)	O
;	O
return	O
ENDED_BY_EOF	int
;	O
}	O
items_read	int
=	O
fscanf	function
(	O
input	pointer
,	O
"%lf"	pointer
,	O
&	O
error_size	double
)	O
;	O
if	O
(	O
items_read	int
!=	O
1	int
)	O
{	O
fprintf	function
(	O
stderr	pointer
,	O
"%s: an input file (in errorbar format) terminated prematurely\n"	pointer
,	O
progname	pointer
)	O
;	O
return	O
ENDED_BY_EOF	int
;	O
}	O
point	pointer
->	O
ymin	double
=	O
point	pointer
->	O
y	double
-	O
error_size	double
;	O
point	pointer
->	O
ymax	double
=	O
point	pointer
->	O
y	double
+	O
error_size	double
;	O
point	pointer
->	O
xmin	double
=	O
0.0	int
;	O
point	pointer
->	O
xmax	double
=	O
0.0	int
;	O
return	O
IN_PROGRESS	int
;	O
}	O
static	O
dataset_status_t	enum
read_point_binary	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Point	struct
*	O
point	pointer
)	O
{	O
int	O
items_read	int
;	O
data_type	enum
format_type	enum
=	O
reader	pointer
->	O
format_type	enum
;	O
FILE	struct
*	O
input	pointer
=	O
reader	pointer
->	O
input	pointer
;	O
if	O
(	O
reader	pointer
->	O
auto_abscissa	enum
)	O
{	O
point	pointer
->	O
x	double
=	O
reader	pointer
->	O
abscissa	double
;	O
reader	pointer
->	O
abscissa	double
+=	O
reader	pointer
->	O
delta_x	double
;	O
}	O
else	O
{	O
switch	O
(	O
format_type	enum
)	O
{	O
case	O
T_DOUBLE	int
:	O
default	O
:	O
items_read	int
=	O
fread	function
(	O
(	O
void	O
*	O
)	O
&	O
(	O
point	pointer
->	O
x	double
)	O
,	O
sizeof	O
(	O
double	O
)	O
,	O
1	int
,	O
input	pointer
)	O
;	O
break	O
;	O
case	O
T_SINGLE	int
:	O
{	O
float	O
fx	float
;	O
items_read	int
=	O
fread	function
(	O
(	O
void	O
*	O
)	O
&	O
fx	float
,	O
sizeof	O
(	O
fx	float
)	O
,	O
1	int
,	O
input	pointer
)	O
;	O
point	pointer
->	O
x	double
=	O
fx	float
;	O
}	O
break	O
;	O
case	O
T_INTEGER	int
:	O
{	O
int	O
ix	int
;	O
items_read	int
=	O
fread	function
(	O
(	O
void	O
*	O
)	O
&	O
ix	int
,	O
sizeof	O
(	O
ix	int
)	O
,	O
1	int
,	O
input	pointer
)	O
;	O
point	pointer
->	O
x	double
=	O
ix	int
;	O
}	O
break	O
;	O
}	O
if	O
(	O
items_read	int
<=	O
0	int
)	O
return	O
ENDED_BY_EOF	int
;	O
}	O
if	O
(	O
(	O
format_type	enum
==	O
T_DOUBLE	int
&&	O
point	pointer
->	O
x	double
==	O
DBL_MAX	O
)	O
||	O
(	O
format_type	enum
==	O
T_SINGLE	int
&&	O
point	pointer
->	O
x	double
==	O
(	O
double	O
)	O
FLT_MAX	O
)	O
||	O
(	O
format_type	enum
==	O
T_INTEGER	int
&&	O
point	pointer
->	O
x	double
==	O
(	O
double	O
)	O
INT_MAX	O
)	O
)	O
return	O
ENDED_BY_DATASET_TERMINATOR	int
;	O
switch	O
(	O
format_type	enum
)	O
{	O
case	O
T_DOUBLE	int
:	O
default	O
:	O
items_read	int
=	O
fread	function
(	O
(	O
void	O
*	O
)	O
&	O
(	O
point	pointer
->	O
y	double
)	O
,	O
sizeof	O
(	O
double	O
)	O
,	O
1	int
,	O
input	pointer
)	O
;	O
break	O
;	O
case	O
T_SINGLE	int
:	O
{	O
float	O
fy	float
;	O
items_read	int
=	O
fread	function
(	O
(	O
void	O
*	O
)	O
&	O
fy	float
,	O
sizeof	O
(	O
fy	float
)	O
,	O
1	int
,	O
input	pointer
)	O
;	O
point	pointer
->	O
y	double
=	O
fy	float
;	O
}	O
break	O
;	O
case	O
T_INTEGER	int
:	O
{	O
int	O
iy	int
;	O
items_read	int
=	O
fread	function
(	O
(	O
void	O
*	O
)	O
&	O
iy	int
,	O
sizeof	O
(	O
iy	int
)	O
,	O
1	int
,	O
input	pointer
)	O
;	O
point	pointer
->	O
y	double
=	O
iy	int
;	O
}	O
break	O
;	O
}	O
if	O
(	O
items_read	int
!=	O
1	int
)	O
{	O
if	O
(	O
!	O
reader	pointer
->	O
auto_abscissa	enum
)	O
fprintf	function
(	O
stderr	pointer
,	O
"%s: an input file (in binary format) terminated prematurely\n"	pointer
,	O
progname	pointer
)	O
;	O
return	O
ENDED_BY_EOF	int
;	O
}	O
else	O
if	O
(	O
point	pointer
->	O
x	double
!=	O
point	pointer
->	O
x	double
||	O
point	pointer
->	O
y	double
!=	O
point	pointer
->	O
y	double
)	O
{	O
fprintf	function
(	O
stderr	pointer
,	O
"%s: a NaN (not-a-number) was encountered in a binary input file\n"	pointer
,	O
progname	pointer
)	O
;	O
return	O
ENDED_BY_EOF	int
;	O
}	O
else	O
return	O
IN_PROGRESS	int
;	O
}	O
static	O
dataset_status_t	enum
read_point_gnuplot	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Point	struct
*	O
point	pointer
)	O
{	O
int	O
lookahead	int
,	O
items_read	int
;	O
char	O
directive	char
,	O
c	char
;	O
bool	enum
two_newlines	enum
;	O
double	O
x	double
,	O
y	double
;	O
FILE	struct
*	O
input	pointer
=	O
reader	pointer
->	O
input	pointer
;	O
head	O
:	O
two_newlines	enum
=	O
skip_some_whitespace	function
(	O
input	pointer
)	O
;	O
if	O
(	O
two_newlines	enum
)	O
{	O
skip_all_whitespace	function
(	O
input	pointer
)	O
;	O
if	O
(	O
feof	function
(	O
input	pointer
)	O
)	O
return	O
ENDED_BY_EOF	int
;	O
else	O
return	O
ENDED_BY_DATASET_TERMINATOR	int
;	O
}	O
lookahead	int
=	O
getc	function
(	O
input	pointer
)	O
;	O
ungetc	function
(	O
lookahead	int
,	O
input	pointer
)	O
;	O
switch	O
(	O
lookahead	int
)	O
{	O
case	O
'C'	O
:	O
case	O
'#'	O
:	O
do	O
{	O
items_read	int
=	O
fread	function
(	O
&	O
c	char
,	O
sizeof	O
(	O
c	char
)	O
,	O
1	int
,	O
input	pointer
)	O
;	O
if	O
(	O
items_read	int
<=	O
0	int
)	O
return	O
ENDED_BY_EOF	int
;	O
}	O
while	O
(	O
c	char
!=	O
'\n'	O
)	O
;	O
ungetc	function
(	O
(	O
int	O
)	O
'\n'	O
,	O
input	pointer
)	O
;	O
goto	O
head	O
;	O
case	O
'i'	O
:	O
case	O
'o'	O
:	O
items_read	int
=	O
fscanf	function
(	O
input	pointer
,	O
"%c x=%lf y=%lf"	pointer
,	O
&	O
directive	char
,	O
&	O
x	double
,	O
&	O
y	double
)	O
;	O
if	O
(	O
items_read	int
==	O
3	int
)	O
{	O
point	pointer
->	O
x	double
=	O
x	double
;	O
point	pointer
->	O
y	double
=	O
y	double
;	O
return	O
IN_PROGRESS	int
;	O
}	O
else	O
{	O
fprintf	function
(	O
stderr	pointer
,	O
"%s: an input file in gnuplot format could not be parsed\n"	pointer
,	O
progname	pointer
)	O
;	O
return	O
ENDED_BY_EOF	int
;	O
}	O
case	O
'u'	O
:	O
do	O
{	O
items_read	int
=	O
fread	function
(	O
&	O
c	char
,	O
sizeof	O
(	O
c	char
)	O
,	O
1	int
,	O
input	pointer
)	O
;	O
if	O
(	O
items_read	int
<=	O
0	int
)	O
{	O
fprintf	function
(	O
stderr	pointer
,	O
"%s: an input file in gnuplot format could not be parsed\n"	pointer
,	O
progname	pointer
)	O
;	O
return	O
ENDED_BY_EOF	int
;	O
}	O
}	O
while	O
(	O
c	char
!=	O
'\n'	O
)	O
;	O
reader	pointer
->	O
need_break	enum
=	O
true	int
;	O
goto	O
head	O
;	O
default	O
:	O
items_read	int
=	O
fscanf	function
(	O
input	pointer
,	O
"%lf %lf %c"	pointer
,	O
&	O
x	double
,	O
&	O
y	double
,	O
&	O
directive	char
)	O
;	O
if	O
(	O
items_read	int
==	O
3	int
&&	O
(	O
directive	char
==	O
'i'	O
||	O
directive	char
==	O
'o'	O
||	O
directive	char
==	O
'u'	O
)	O
)	O
{	O
if	O
(	O
directive	char
==	O
'u'	O
)	O
{	O
reader	pointer
->	O
need_break	enum
=	O
true	int
;	O
goto	O
head	O
;	O
}	O
else	O
{	O
point	pointer
->	O
x	double
=	O
x	double
;	O
point	pointer
->	O
y	double
=	O
y	double
;	O
return	O
IN_PROGRESS	int
;	O
}	O
}	O
else	O
{	O
fprintf	function
(	O
stderr	pointer
,	O
"%s: an input file in gnuplot format could not be parsed\n"	pointer
,	O
progname	pointer
)	O
;	O
return	O
ENDED_BY_EOF	int
;	O
}	O
}	O
}	O
static	O
dataset_status_t	enum
read_dataset	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Point	struct
*	O
*	O
p_addr	pointer
,	O
int	O
*	O
length	long
,	O
int	O
*	O
no_of_points	pointer
)	O
{	O
Point	struct
*	O
p	pointer
=	O
*	O
p_addr	pointer
;	O
dataset_status_t	enum
status	enum
;	O
for	O
(	O
;	O
;	O
)	O
{	O
if	O
(	O
*	O
no_of_points	pointer
>=	O
*	O
length	long
)	O
{	O
int	O
old_length	int
,	O
new_length	int
;	O
old_length	int
=	O
*	O
length	long
;	O
new_length	int
=	O
NEW_POINT_ARRAY_LENGTH	O
(	O
old_length	int
)	O
;	O
p	pointer
=	O
(	O
Point	struct
*	O
)	O
xrealloc	function
(	O
p	pointer
,	O
new_length	int
*	O
sizeof	O
(	O
Point	struct
)	O
)	O
;	O
*	O
length	long
=	O
new_length	int
;	O
}	O
status	enum
=	O
read_point	function
(	O
reader	pointer
,	O
&	O
(	O
p	pointer
[	O
*	O
no_of_points	pointer
]	O
)	O
)	O
;	O
if	O
(	O
status	enum
!=	O
IN_PROGRESS	int
)	O
break	O
;	O
(	O
*	O
no_of_points	pointer
)	O
++	O
;	O
}	O
*	O
p_addr	pointer
=	O
p	pointer
;	O
return	O
status	enum
;	O
}	O
void	O
read_file	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Point	struct
*	O
*	O
p_addr	pointer
,	O
int	O
*	O
length	long
,	O
int	O
*	O
no_of_points	pointer
)	O
{	O
dataset_status_t	enum
status	enum
;	O
do	O
{	O
status	enum
=	O
read_dataset	function
(	O
reader	pointer
,	O
p_addr	pointer
,	O
length	long
,	O
no_of_points	pointer
)	O
;	O
if	O
(	O
status	enum
==	O
ENDED_BY_MODE_CHANGE	int
)	O
{	O
bool	enum
saved_auto_bump	enum
;	O
saved_auto_bump	enum
=	O
reader	pointer
->	O
auto_bump	enum
;	O
reader	pointer
->	O
auto_bump	enum
=	O
false	int
;	O
reset_reader	function
(	O
reader	pointer
)	O
;	O
reader	pointer
->	O
auto_bump	enum
=	O
saved_auto_bump	enum
;	O
}	O
else	O
reset_reader	function
(	O
reader	pointer
)	O
;	O
}	O
while	O
(	O
status	enum
!=	O
ENDED_BY_EOF	int
)	O
;	O
}	O
static	O
void	O
reset_reader	function
(	O
Reader	struct
*	O
reader	pointer
)	O
{	O
reader	pointer
->	O
need_break	enum
=	O
true	int
;	O
if	O
(	O
reader	pointer
->	O
auto_bump	enum
)	O
reader	pointer
->	O
linemode	int
+=	O
(	O
(	O
reader	pointer
->	O
linemode	int
>	O
0	int
)	O
?	O
1	int
:	O
-	O
1	int
)	O
;	O
if	O
(	O
reader	pointer
->	O
auto_abscissa	enum
)	O
reader	pointer
->	O
abscissa	double
=	O
reader	pointer
->	O
initial_abscissa	double
;	O
return	O
;	O
}	O
static	O
bool	enum
skip_some_whitespace	function
(	O
FILE	struct
*	O
stream	pointer
)	O
{	O
int	O
lookahead	int
;	O
int	O
nlcount	int
=	O
0	int
;	O
do	O
{	O
lookahead	int
=	O
getc	function
(	O
stream	pointer
)	O
;	O
if	O
(	O
lookahead	int
==	O
(	O
int	O
)	O
'\n'	O
)	O
nlcount	int
++	O
;	O
}	O
while	O
(	O
lookahead	int
!=	O
EOF	O
&&	O
isspace	function
(	O
(	O
unsigned	O
char	O
)	O
lookahead	int
)	O
&&	O
nlcount	int
<	O
2	int
)	O
;	O
if	O
(	O
lookahead	int
==	O
EOF	O
)	O
return	O
false	int
;	O
ungetc	function
(	O
lookahead	int
,	O
stream	pointer
)	O
;	O
return	O
(	O
nlcount	int
==	O
2	int
?	O
true	int
:	O
false	int
)	O
;	O
}	O
static	O
void	O
skip_all_whitespace	function
(	O
FILE	struct
*	O
stream	pointer
)	O
{	O
int	O
lookahead	int
;	O
do	O
lookahead	int
=	O
getc	function
(	O
stream	pointer
)	O
;	O
while	O
(	O
lookahead	int
!=	O
EOF	O
&&	O
isspace	function
(	O
(	O
unsigned	O
char	O
)	O
lookahead	int
)	O
)	O
;	O
if	O
(	O
lookahead	int
==	O
EOF	O
)	O
return	O
;	O
else	O
ungetc	function
(	O
lookahead	int
,	O
stream	pointer
)	O
;	O
}	O
static	O
dataset_status_t	enum
read_and_plot_dataset	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Multigrapher	struct
*	O
multigrapher	pointer
)	O
{	O
dataset_status_t	enum
status	enum
;	O
for	O
(	O
;	O
;	O
)	O
{	O
Point	struct
point	pointer
;	O
status	enum
=	O
read_point	function
(	O
reader	pointer
,	O
&	O
point	pointer
)	O
;	O
if	O
(	O
status	enum
!=	O
IN_PROGRESS	int
)	O
break	O
;	O
else	O
plot_point	function
(	O
multigrapher	pointer
,	O
&	O
point	pointer
)	O
;	O
}	O
return	O
status	enum
;	O
}	O
void	O
read_and_plot_file	function
(	O
Reader	struct
*	O
reader	pointer
,	O
Multigrapher	struct
*	O
multigrapher	pointer
)	O
{	O
dataset_status_t	enum
status	enum
;	O
do	O
{	O
status	enum
=	O
read_and_plot_dataset	function
(	O
reader	pointer
,	O
multigrapher	pointer
)	O
;	O
if	O
(	O
status	enum
==	O
ENDED_BY_MODE_CHANGE	int
)	O
{	O
bool	enum
saved_auto_bump	enum
;	O
saved_auto_bump	enum
=	O
reader	pointer
->	O
auto_bump	enum
;	O
reader	pointer
->	O
auto_bump	enum
=	O
false	int
;	O
reset_reader	function
(	O
reader	pointer
)	O
;	O
reader	pointer
->	O
auto_bump	enum
=	O
saved_auto_bump	enum
;	O
}	O
else	O
reset_reader	function
(	O
reader	pointer
)	O
;	O
end_polyline_and_flush	function
(	O
multigrapher	pointer
)	O
;	O
}	O
while	O
(	O
status	enum
!=	O
ENDED_BY_EOF	int
)	O
;	O
}	O
