typedef	O
struct	O
termios	struct
TERMDESC	struct
;	O
TERMDESC	struct
termbuf	struct
,	O
termbuf2	struct
;	O
void	O
term_send_eof	function
(	O
void	O
)	O
{	O
}	O
int	O
term_change_eof	function
(	O
void	O
)	O
{	O
return	O
0	int
;	O
}	O
int	O
tty_linemode	function
(	O
void	O
)	O
{	O
return	O
(	O
termbuf	struct
.	O
c_lflag	short
&	O
EXTPROC	int
)	O
;	O
}	O
void	O
tty_setlinemode	function
(	O
int	O
on	int
)	O
{	O
if	O
(	O
on	int
)	O
termbuf	struct
.	O
c_lflag	short
|=	O
EXTPROC	int
;	O
else	O
termbuf	struct
.	O
c_lflag	short
&=	O
~	O
EXTPROC	int
;	O
}	O
int	O
tty_isecho	function
(	O
void	O
)	O
{	O
return	O
termbuf	struct
.	O
c_lflag	short
&	O
ECHO	int
;	O
}	O
int	O
tty_flowmode	function
(	O
void	O
)	O
{	O
return	O
(	O
termbuf	struct
.	O
c_iflag	short
&	O
IXON	int
)	O
?	O
1	int
:	O
0	int
;	O
}	O
int	O
tty_restartany	function
(	O
void	O
)	O
{	O
return	O
(	O
termbuf	struct
.	O
c_iflag	short
&	O
IXANY	int
)	O
?	O
1	int
:	O
0	int
;	O
}	O
void	O
tty_setecho	function
(	O
int	O
on	int
)	O
{	O
if	O
(	O
on	int
)	O
termbuf	struct
.	O
c_lflag	short
|=	O
ECHO	int
;	O
else	O
termbuf	struct
.	O
c_lflag	short
&=	O
~	O
ECHO	int
;	O
}	O
int	O
tty_israw	function
(	O
void	O
)	O
{	O
return	O
!	O
(	O
termbuf	struct
.	O
c_lflag	short
&	O
ICANON	int
)	O
;	O
}	O
void	O
tty_binaryin	function
(	O
int	O
on	int
)	O
{	O
if	O
(	O
on	int
)	O
termbuf	struct
.	O
c_iflag	short
&=	O
~	O
ISTRIP	int
;	O
else	O
termbuf	struct
.	O
c_iflag	short
|=	O
ISTRIP	int
;	O
}	O
void	O
tty_binaryout	function
(	O
int	O
on	int
)	O
{	O
if	O
(	O
on	int
)	O
{	O
termbuf	struct
.	O
c_cflag	short
&=	O
~	O
(	O
CSIZE	int
|	O
PARENB	int
)	O
;	O
termbuf	struct
.	O
c_cflag	short
|=	O
CS8	int
;	O
termbuf	struct
.	O
c_oflag	short
&=	O
~	O
OPOST	int
;	O
}	O
else	O
{	O
termbuf	struct
.	O
c_cflag	short
&=	O
~	O
CSIZE	int
;	O
termbuf	struct
.	O
c_cflag	short
|=	O
CS7	int
|	O
PARENB	int
;	O
termbuf	struct
.	O
c_oflag	short
|=	O
OPOST	int
;	O
}	O
}	O
int	O
tty_isbinaryin	function
(	O
void	O
)	O
{	O
return	O
!	O
(	O
termbuf	struct
.	O
c_iflag	short
&	O
ISTRIP	int
)	O
;	O
}	O
int	O
tty_isbinaryout	function
(	O
void	O
)	O
{	O
return	O
!	O
(	O
termbuf	struct
.	O
c_oflag	short
&	O
OPOST	int
)	O
;	O
}	O
int	O
tty_isediting	function
(	O
void	O
)	O
{	O
return	O
termbuf	struct
.	O
c_lflag	short
&	O
ICANON	int
;	O
}	O
int	O
tty_istrapsig	function
(	O
void	O
)	O
{	O
return	O
termbuf	struct
.	O
c_lflag	short
&	O
ISIG	int
;	O
}	O
void	O
tty_setedit	function
(	O
int	O
on	int
)	O
{	O
if	O
(	O
on	int
)	O
termbuf	struct
.	O
c_lflag	short
|=	O
ICANON	int
;	O
else	O
termbuf	struct
.	O
c_lflag	short
&=	O
~	O
ICANON	int
;	O
}	O
void	O
tty_setsig	function
(	O
int	O
on	int
)	O
{	O
if	O
(	O
on	int
)	O
termbuf	struct
.	O
c_lflag	short
|=	O
ISIG	int
;	O
else	O
termbuf	struct
.	O
c_lflag	short
&=	O
~	O
ISIG	int
;	O
}	O
int	O
tty_issofttab	function
(	O
void	O
)	O
{	O
return	O
(	O
termbuf	struct
.	O
c_oflag	short
&	O
TABDLY	int
)	O
==	O
TAB3	int
;	O
}	O
void	O
tty_setsofttab	function
(	O
int	O
on	int
)	O
{	O
if	O
(	O
on	int
)	O
{	O
termbuf	struct
.	O
c_oflag	short
&=	O
~	O
TABDLY	int
;	O
termbuf	struct
.	O
c_oflag	short
|=	O
TAB3	int
;	O
}	O
else	O
{	O
termbuf	struct
.	O
c_oflag	short
&=	O
~	O
TABDLY	int
;	O
termbuf	struct
.	O
c_oflag	short
|=	O
TAB0	int
;	O
}	O
}	O
int	O
tty_islitecho	function
(	O
void	O
)	O
{	O
return	O
!	O
(	O
termbuf	struct
.	O
c_lflag	short
&	O
ECHOCTL	int
)	O
;	O
}	O
void	O
tty_setlitecho	function
(	O
int	O
on	int
)	O
{	O
if	O
(	O
on	int
)	O
termbuf	struct
.	O
c_lflag	short
&=	O
~	O
ECHOCTL	int
;	O
else	O
termbuf	struct
.	O
c_lflag	short
|=	O
ECHOCTL	int
;	O
}	O
int	O
tty_iscrnl	function
(	O
void	O
)	O
{	O
return	O
termbuf	struct
.	O
c_iflag	short
&	O
ICRNL	int
;	O
}	O
void	O
init_termbuf	function
(	O
void	O
)	O
{	O
_term_getattr	O
(	O
pty	int
,	O
&	O
termbuf	struct
)	O
;	O
termbuf2	struct
=	O
termbuf	struct
;	O
}	O
void	O
copy_termbuf	function
(	O
)	O
{	O
int	O
len	long
=	O
0	int
;	O
char	O
*	O
cp	pointer
=	O
(	O
char	O
*	O
)	O
&	O
termbuf	struct
;	O
while	O
(	O
pty_input_level	function
(	O
)	O
>	O
0	int
)	O
{	O
if	O
(	O
len	long
>=	O
sizeof	O
(	O
termbuf	struct
)	O
)	O
break	O
;	O
*	O
cp	pointer
++	O
=	O
pty_get_char	function
(	O
0	int
)	O
;	O
}	O
termbuf2	struct
=	O
termbuf	struct
;	O
}	O
void	O
set_termbuf	function
(	O
void	O
)	O
{	O
if	O
(	O
memcmp	function
(	O
&	O
termbuf	struct
,	O
&	O
termbuf2	struct
,	O
sizeof	O
(	O
termbuf	struct
)	O
)	O
)	O
_term_setattr	O
(	O
pty	int
,	O
&	O
termbuf	struct
)	O
;	O
}	O
int	O
spcset	function
(	O
int	O
func	int
,	O
cc_t	char
*	O
valp	pointer
,	O
cc_t	char
*	O
*	O
valpp	pointer
)	O
{	O
switch	O
(	O
func	int
)	O
{	O
case	O
SLC_EOF	int
:	O
setval	O
(	O
termdesc_eofc	O
,	O
SLC_VARIABLE	int
)	O
;	O
case	O
SLC_EC	int
:	O
setval	O
(	O
termdesc_erase	O
,	O
SLC_VARIABLE	int
)	O
;	O
case	O
SLC_EL	int
:	O
setval	O
(	O
termdesc_kill	O
,	O
SLC_VARIABLE	int
)	O
;	O
case	O
SLC_IP	int
:	O
setval	O
(	O
termdesc_ip	O
,	O
SLC_VARIABLE	int
|	O
SLC_FLUSHIN	int
|	O
SLC_FLUSHOUT	int
)	O
;	O
case	O
SLC_ABORT	int
:	O
setval	O
(	O
termdesc_abort	O
,	O
SLC_VARIABLE	int
|	O
SLC_FLUSHIN	int
|	O
SLC_FLUSHOUT	int
)	O
;	O
case	O
SLC_XON	int
:	O
setval	O
(	O
termdesc_xon	O
,	O
SLC_VARIABLE	int
)	O
;	O
case	O
SLC_XOFF	int
:	O
setval	O
(	O
termdesc_xoff	O
,	O
SLC_VARIABLE	int
)	O
;	O
case	O
SLC_EW	int
:	O
setval	O
(	O
termdesc_ew	O
,	O
SLC_VARIABLE	int
)	O
;	O
case	O
SLC_RP	int
:	O
setval	O
(	O
termdesc_rp	O
,	O
SLC_VARIABLE	int
)	O
;	O
case	O
SLC_LNEXT	int
:	O
setval	O
(	O
termdesc_lnext	O
,	O
SLC_VARIABLE	int
)	O
;	O
case	O
SLC_AO	int
:	O
setval	O
(	O
termdesc_ao	O
,	O
SLC_VARIABLE	int
|	O
SLC_FLUSHOUT	int
)	O
;	O
case	O
SLC_SUSP	int
:	O
setval	O
(	O
termdesc_susp	O
,	O
SLC_VARIABLE	int
|	O
SLC_FLUSHIN	int
)	O
;	O
case	O
SLC_FORW1	int
:	O
setval	O
(	O
termdesc_forw1	O
,	O
SLC_VARIABLE	int
)	O
;	O
case	O
SLC_FORW2	int
:	O
setval	O
(	O
termdesc_forw2	O
,	O
SLC_VARIABLE	int
)	O
;	O
case	O
SLC_AYT	int
:	O
defval	O
(	O
0	int
)	O
;	O
case	O
SLC_BRK	int
:	O
case	O
SLC_SYNCH	int
:	O
case	O
SLC_EOR	int
:	O
defval	O
(	O
0	int
)	O
;	O
default	O
:	O
*	O
valp	pointer
=	O
0	int
;	O
*	O
valpp	pointer
=	O
0	int
;	O
return	O
SLC_NOSUPPORT	int
;	O
}	O
}	O
struct	O
termspeeds	struct
{	O
int	O
speed	int
;	O
int	O
value	int
;	O
}	O
termspeeds	struct
[	O
]	O
=	O
{	O
{	O
0	int
,	O
B0	int
}	O
,	O
{	O
50	int
,	O
B50	int
}	O
,	O
{	O
75	int
,	O
B75	int
}	O
,	O
{	O
110	int
,	O
B110	int
}	O
,	O
{	O
134	int
,	O
B134	int
}	O
,	O
{	O
150	int
,	O
B150	int
}	O
,	O
{	O
200	int
,	O
B200	int
}	O
,	O
{	O
300	int
,	O
B300	int
}	O
,	O
{	O
600	int
,	O
B600	int
}	O
,	O
{	O
1200	int
,	O
B1200	int
}	O
,	O
{	O
1800	int
,	O
B1800	int
}	O
,	O
{	O
2400	int
,	O
B2400	int
}	O
,	O
{	O
4800	int
,	O
B4800	int
}	O
,	O
{	O
9600	int
,	O
B9600	int
}	O
,	O
{	O
19200	int
,	O
B19200	int
}	O
,	O
{	O
38400	int
,	O
B38400	int
}	O
,	O
{	O
57600	int
,	O
B57600	int
}	O
,	O
{	O
115200	int
,	O
B115200	int
}	O
,	O
{	O
230400	int
,	O
B230400	int
}	O
,	O
{	O
-	O
1	int
,	O
0	int
}	O
}	O
;	O
void	O
tty_tspeed	function
(	O
int	O
val	array
)	O
{	O
struct	O
termspeeds	struct
*	O
tp	pointer
;	O
for	O
(	O
tp	pointer
=	O
termspeeds	struct
;	O
(	O
tp	pointer
->	O
speed	int
!=	O
-	O
1	int
)	O
&&	O
(	O
val	array
>	O
tp	pointer
->	O
speed	int
)	O
;	O
tp	pointer
++	O
)	O
;	O
if	O
(	O
tp	pointer
->	O
speed	int
==	O
-	O
1	int
)	O
--	O
tp	pointer
;	O
val	array
=	O
tp	pointer
->	O
value	int
;	O
cfsetospeed	function
(	O
&	O
termbuf	struct
,	O
val	array
)	O
;	O
}	O
void	O
tty_rspeed	function
(	O
int	O
val	array
)	O
{	O
struct	O
termspeeds	struct
*	O
tp	pointer
;	O
for	O
(	O
tp	pointer
=	O
termspeeds	struct
;	O
(	O
tp	pointer
->	O
speed	int
!=	O
-	O
1	int
)	O
&&	O
(	O
val	array
>	O
tp	pointer
->	O
speed	int
)	O
;	O
tp	pointer
++	O
)	O
;	O
if	O
(	O
tp	pointer
->	O
speed	int
==	O
-	O
1	int
)	O
--	O
tp	pointer
;	O
val	array
=	O
tp	pointer
->	O
value	int
;	O
cfsetispeed	function
(	O
&	O
termbuf	struct
,	O
val	array
)	O
;	O
}	O
