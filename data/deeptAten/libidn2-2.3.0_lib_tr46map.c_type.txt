static	O
void	O
_fill_map	function
(	O
uint32_t	int
c	int
,	O
const	O
uint8_t	char
*	O
p	pointer
,	O
IDNAMap	struct
*	O
map	pointer
)	O
{	O
uint32_t	int
value	int
;	O
if	O
(	O
c	int
<=	O
0xFF	int
)	O
{	O
map	pointer
->	O
cp1	int
=	O
*	O
p	pointer
++	O
;	O
map	pointer
->	O
range	short
=	O
*	O
p	pointer
++	O
;	O
}	O
else	O
if	O
(	O
c	int
<=	O
0xFFFF	int
)	O
{	O
map	pointer
->	O
cp1	int
=	O
(	O
p	pointer
[	O
0	int
]	O
<<	O
8	int
)	O
|	O
p	pointer
[	O
1	int
]	O
;	O
map	pointer
->	O
range	short
=	O
(	O
p	pointer
[	O
2	int
]	O
<<	O
8	int
)	O
|	O
p	pointer
[	O
3	int
]	O
;	O
p	pointer
+=	O
4	int
;	O
}	O
else	O
{	O
map	pointer
->	O
cp1	int
=	O
(	O
p	pointer
[	O
0	int
]	O
<<	O
16	int
)	O
|	O
(	O
p	pointer
[	O
1	int
]	O
<<	O
8	int
)	O
|	O
p	pointer
[	O
2	int
]	O
;	O
map	pointer
->	O
range	short
=	O
(	O
p	pointer
[	O
3	int
]	O
<<	O
8	int
)	O
|	O
p	pointer
[	O
4	int
]	O
;	O
p	pointer
+=	O
5	int
;	O
}	O
value	int
=	O
(	O
p	pointer
[	O
0	int
]	O
<<	O
16	int
)	O
|	O
(	O
p	pointer
[	O
1	int
]	O
<<	O
8	int
)	O
|	O
p	pointer
[	O
2	int
]	O
;	O
map	pointer
->	O
flag_index	int
=	O
value	int
&	O
0x7	int
;	O
map	pointer
->	O
offset	int
=	O
(	O
value	int
>>	O
3	int
)	O
&	O
0x3FFF	int
;	O
map	pointer
->	O
nmappings	int
=	O
(	O
value	int
>>	O
17	int
)	O
&	O
0x1F	int
;	O
}	O
static	O
int	O
_compare_idna_map	function
(	O
const	O
uint32_t	int
*	O
c	int
,	O
const	O
uint8_t	char
*	O
p	pointer
)	O
{	O
IDNAMap	struct
map	pointer
;	O
_fill_map	function
(	O
*	O
c	int
,	O
p	pointer
,	O
&	O
map	pointer
)	O
;	O
if	O
(	O
*	O
c	int
<	O
map	pointer
.	O
cp1	int
)	O
return	O
-	O
1	int
;	O
if	O
(	O
*	O
c	int
>	O
map	pointer
.	O
cp1	int
+	O
map	pointer
.	O
range	short
)	O
return	O
1	int
;	O
return	O
0	int
;	O
}	O
int	O
get_idna_map	function
(	O
uint32_t	int
c	int
,	O
IDNAMap	struct
*	O
map	pointer
)	O
{	O
uint8_t	char
*	O
p	pointer
;	O
if	O
(	O
c	int
<=	O
0xFF	int
)	O
p	pointer
=	O
(	O
uint8_t	char
*	O
)	O
bsearch	function
(	O
&	O
c	int
,	O
idna_map_8	array
,	O
sizeof	O
(	O
idna_map_8	array
)	O
/	O
5	int
,	O
5	int
,	O
(	O
int	O
(	O
*	O
)	O
(	O
const	O
void	O
*	O
,	O
const	O
void	O
*	O
)	O
)	O
_compare_idna_map	function
)	O
;	O
else	O
if	O
(	O
c	int
<=	O
0xFFFF	int
)	O
p	pointer
=	O
(	O
uint8_t	char
*	O
)	O
bsearch	function
(	O
&	O
c	int
,	O
idna_map_16	array
,	O
sizeof	O
(	O
idna_map_16	array
)	O
/	O
7	int
,	O
7	int
,	O
(	O
int	O
(	O
*	O
)	O
(	O
const	O
void	O
*	O
,	O
const	O
void	O
*	O
)	O
)	O
_compare_idna_map	function
)	O
;	O
else	O
if	O
(	O
c	int
<=	O
0xFFFFFF	int
)	O
p	pointer
=	O
(	O
uint8_t	char
*	O
)	O
bsearch	function
(	O
&	O
c	int
,	O
idna_map_24	array
,	O
sizeof	O
(	O
idna_map_24	array
)	O
/	O
8	int
,	O
8	int
,	O
(	O
int	O
(	O
*	O
)	O
(	O
const	O
void	O
*	O
,	O
const	O
void	O
*	O
)	O
)	O
_compare_idna_map	function
)	O
;	O
else	O
p	pointer
=	O
NULL	O
;	O
if	O
(	O
!	O
p	pointer
)	O
{	O
memset	function
(	O
map	pointer
,	O
0	int
,	O
sizeof	O
(	O
IDNAMap	struct
)	O
)	O
;	O
return	O
-	O
1	int
;	O
}	O
_fill_map	function
(	O
c	int
,	O
p	pointer
,	O
map	pointer
)	O
;	O
return	O
0	int
;	O
}	O
int	O
map_is	function
(	O
const	O
IDNAMap	struct
*	O
map	pointer
,	O
unsigned	O
flags	int
)	O
{	O
return	O
(	O
idna_flags	array
[	O
map	pointer
->	O
flag_index	int
]	O
&	O
flags	int
)	O
==	O
flags	int
;	O
}	O
static	O
int	O
G_GNUC_IDN2_ATTRIBUTE_PURE	O
_compare_nfcqc_map	function
(	O
uint32_t	int
*	O
c	int
,	O
NFCQCMap	struct
*	O
m2	pointer
)	O
{	O
if	O
(	O
*	O
c	int
<	O
m2	pointer
->	O
cp1	int
)	O
return	O
-	O
1	int
;	O
if	O
(	O
*	O
c	int
>	O
m2	pointer
->	O
cp2	int
)	O
return	O
1	int
;	O
return	O
0	int
;	O
}	O
NFCQCMap	struct
*	O
get_nfcqc_map	function
(	O
uint32_t	int
c	int
)	O
{	O
return	O
(	O
NFCQCMap	struct
*	O
)	O
bsearch	function
(	O
&	O
c	int
,	O
nfcqc_map	array
,	O
countof	O
(	O
nfcqc_map	array
)	O
,	O
sizeof	O
(	O
NFCQCMap	struct
)	O
,	O
(	O
int	O
(	O
*	O
)	O
(	O
const	O
void	O
*	O
,	O
const	O
void	O
*	O
)	O
)	O
_compare_nfcqc_map	function
)	O
;	O
}	O
int	O
get_map_data	function
(	O
uint32_t	int
*	O
dst	pointer
,	O
const	O
IDNAMap	struct
*	O
map	pointer
)	O
{	O
int	O
n	int
=	O
map	pointer
->	O
nmappings	int
;	O
const	O
uint8_t	char
*	O
src	pointer
=	O
mapdata	array
+	O
map	pointer
->	O
offset	int
;	O
for	O
(	O
;	O
n	int
>	O
0	int
;	O
n	int
--	O
)	O
{	O
uint32_t	int
cp	int
=	O
0	int
;	O
do	O
cp	int
=	O
(	O
cp	int
<<	O
7	int
)	O
|	O
(	O
*	O
src	pointer
&	O
0x7F	int
)	O
;	O
while	O
(	O
*	O
src	pointer
++	O
&	O
0x80	int
)	O
;	O
*	O
dst	pointer
++	O
=	O
cp	int
;	O
}	O
return	O
map	pointer
->	O
nmappings	int
;	O
}	O
