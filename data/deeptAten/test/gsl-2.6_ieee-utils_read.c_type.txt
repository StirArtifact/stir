static	O
int	O
lookup_string	function
(	O
const	O
char	O
*	O
p	pointer
,	O
int	O
*	int
precision	pointer
,	O
int	O
*	int
rounding	pointer
,	O
int	O
*	O
exception_mask	pointer
)	O
;	O
int	O
gsl_ieee_read_mode_string	int
(	O
const	O
char	O
*	O
description	pointer
,	O
int	O
*	int
precision	pointer
,	O
int	O
*	O
rounding	pointer
,	O
int	O
*	O
exception_mask	pointer
)	O
{	O
char	O
*	O
start	pointer
;	O
char	O
*	O
end	pointer
;	O
char	O
*	O
p	pointer
;	O
int	O
precision_count	int
=	O
0	O
;	O
int	O
rounding_count	int
=	O
0	O
;	O
int	O
exception_count	int
=	O
0	O
;	O
start	O
=	O
(	O
char	O
*	O
)	O
malloc	pointer
(	O
strlen	int
(	O
description	pointer
)	O
+	O
1	int
)	O
;	O
if	O
(	O
start	O
==	O
0	O
)	O
{	O
GSL_ERROR	O
(	O
"no memory to parse mode string"	pointer
,	O
GSL_ENOMEM	pointer
)	O
;	O
}	O
strcpy	O
(	O
start	pointer
,	O
description	pointer
)	O
;	O
p	O
=	O
start	O
;	O
*	O
precision	pointer
=	O
0	pointer
;	O
*	O
rounding	pointer
=	O
0	O
;	O
*	O
exception_mask	pointer
=	O
0	O
;	O
do	O
{	O
int	O
status	int
;	O
int	O
new_precision	int
,	O
new_rounding	O
,	O
new_exception	O
;	O
end	O
=	O
strchr	O
(	O
p	pointer
,	O
','	O
)	O
;	O
if	O
(	O
end	O
)	O
{	O
*	O
end	pointer
=	O
'\0'	O
;	O
do	O
{	O
end	O
++	O
;	O
}	O
while	O
(	O
*	O
end	pointer
==	O
' '	O
||	O
*	O
end	pointer
==	O
','	O
)	O
;	O
}	O
new_precision	O
=	O
0	function
;	O
new_rounding	O
=	O
0	O
;	O
new_exception	O
=	O
0	O
;	O
status	O
=	O
lookup_string	int
(	O
p	pointer
,	O
&	O
new_precision	pointer
,	O
&	O
new_rounding	pointer
,	O
&	O
new_exception	struct
)	O
;	O
if	O
(	O
status	O
)	O
{	O
free	O
(	O
start	pointer
)	O
;	O
GSL_ERROR	O
(	O
"unrecognized GSL_IEEE_MODE string.\nValid settings are:\n\n"	O
"  single-precision double-precision extended-precision\n"	O
"  round-to-nearest round-down round-up round-to-zero\n"	O
"  mask-invalid mask-denormalized mask-division-by-zero\n"	O
"  mask-overflow mask-underflow mask-all\n"	O
"  trap-common trap-inexact\n"	O
"\n"	O
"separated by commas. "	O
"(e.g. GSL_IEEE_MODE=\"round-down,mask-underflow\")"	O
,	O
GSL_EINVAL	pointer
)	O
;	O
}	O
if	O
(	O
new_precision	O
)	O
{	O
*	O
precision	pointer
=	O
new_precision	O
;	O
precision_count	O
++	O
;	O
if	O
(	O
precision_count	O
>	O
1	int
)	O
{	O
free	O
(	O
start	pointer
)	O
;	O
GSL_ERROR	O
(	O
"attempted to set IEEE precision twice"	pointer
,	O
GSL_EINVAL	int
)	O
;	O
}	O
}	O
if	O
(	O
new_rounding	O
)	O
{	O
*	O
rounding	pointer
=	O
new_rounding	O
;	O
rounding_count	O
++	O
;	O
if	O
(	O
rounding_count	O
>	O
1	int
)	O
{	O
free	O
(	O
start	pointer
)	O
;	O
GSL_ERROR	O
(	O
"attempted to set IEEE rounding mode twice"	pointer
,	O
GSL_EINVAL	int
)	O
;	O
}	O
}	O
if	O
(	O
new_exception	O
)	O
{	O
*	O
exception_mask	pointer
|=	O
new_exception	O
;	O
exception_count	O
++	O
;	O
}	O
p	O
=	O
end	function
;	O
}	O
while	O
(	O
end	O
&&	O
*	O
p	pointer
!=	O
'\0'	O
)	O
;	O
free	O
(	O
start	pointer
)	O
;	O
return	O
GSL_SUCCESS	int
;	O
}	O
static	O
int	O
lookup_string	function
(	O
const	O
char	O
*	O
p	pointer
,	O
int	O
*	int
precision	pointer
,	O
int	O
*	int
rounding	pointer
,	O
int	O
*	O
exception_mask	pointer
)	O
{	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"single-precision"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
precision	pointer
=	O
GSL_IEEE_SINGLE_PRECISION	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"double-precision"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
precision	pointer
=	O
GSL_IEEE_DOUBLE_PRECISION	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"extended-precision"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
precision	pointer
=	O
GSL_IEEE_EXTENDED_PRECISION	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"round-to-nearest"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
rounding	pointer
=	O
GSL_IEEE_ROUND_TO_NEAREST	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"round-down"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
rounding	pointer
=	O
GSL_IEEE_ROUND_DOWN	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"round-up"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
rounding	pointer
=	O
GSL_IEEE_ROUND_UP	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"round-to-zero"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
rounding	pointer
=	O
GSL_IEEE_ROUND_TO_ZERO	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"mask-all"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
exception_mask	pointer
=	O
GSL_IEEE_MASK_ALL	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"mask-invalid"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
exception_mask	pointer
=	O
GSL_IEEE_MASK_INVALID	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"mask-denormalized"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
exception_mask	pointer
=	O
GSL_IEEE_MASK_DENORMALIZED	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"mask-division-by-zero"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
exception_mask	pointer
=	O
GSL_IEEE_MASK_DIVISION_BY_ZERO	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"mask-overflow"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
exception_mask	pointer
=	O
GSL_IEEE_MASK_OVERFLOW	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"mask-underflow"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
exception_mask	pointer
=	O
GSL_IEEE_MASK_UNDERFLOW	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"trap-inexact"	pointer
)	O
==	O
0	int
)	O
{	O
*	O
exception_mask	pointer
=	O
GSL_IEEE_TRAP_INEXACT	O
;	O
}	O
else	O
if	O
(	O
strcmp	O
(	O
p	pointer
,	O
"trap-common"	pointer
)	O
==	O
0	int
)	O
{	O
return	O
0	int
;	O
}	O
else	O
{	O
return	O
1	int
;	O
}	O
return	O
0	O
;	O
}	O