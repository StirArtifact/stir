size_t	O
mpf_out_str	O
(	O
FILE	O
*	O
stream	pointer
,	O
int	O
base	int
,	O
size_t	O
n_digits	O
,	O
mpf_srcptr	O
op	O
)	O
{	O
char	O
*	O
str	pointer
;	O
mp_exp_t	O
exp	O
;	O
size_t	O
written	O
;	O
TMP_DECL	O
;	O
TMP_MARK	O
;	O
if	O
(	O
base	O
==	O
0	O
)	O
base	O
=	O
10	int
;	O
if	O
(	O
n_digits	O
==	O
0	O
)	O
MPF_SIGNIFICANT_DIGITS	O
(	O
n_digits	pointer
,	O
base	O
,	O
op	O
->	O
_mp_prec	pointer
)	O
;	O
if	O
(	O
stream	O
==	O
0	O
)	O
stream	O
=	O
stdout	O
;	O
str	O
=	O
(	O
char	O
*	O
)	O
TMP_ALLOC	O
(	O
n_digits	O
+	O
2	int
)	O
;	O
mpf_get_str	O
(	O
str	O
,	O
&	O
exp	pointer
,	O
base	O
,	O
n_digits	O
,	O
op	O
)	O
;	O
n_digits	O
=	O
strlen	O
(	O
str	pointer
)	O
;	O
written	O
=	O
0	O
;	O
if	O
(	O
str	O
[	O
0	int
]	O
==	O
'-'	O
)	O
{	O
str	O
++	O
;	O
fputc	O
(	O
'-'	pointer
,	O
stream	O
)	O
;	O
written	O
=	O
1	O
;	O
n_digits	O
--	O
;	O
}	O
{	O
const	O
char	O
*	O
point	O
=	O
GMP_DECIMAL_POINT	O
;	O
size_t	O
pointlen	O
=	O
strlen	pointer
(	O
point	pointer
)	O
;	O
putc	O
(	O
'0'	O
,	O
stream	O
)	O
;	O
fwrite	O
(	O
point	O
,	O
1	O
,	O
pointlen	O
,	O
stream	O
)	O
;	O
written	O
+=	O
pointlen	O
+	O
1	int
;	O
}	O
{	O
size_t	O
fwret	O
;	O
fwret	O
=	O
fwrite	O
(	O
str	pointer
,	O
1	O
,	O
n_digits	long
,	O
stream	O
)	O
;	O
written	O
+=	O
fwret	O
;	O
}	O
{	O
int	O
fpret	int
;	O
fpret	O
=	O
fprintf	O
(	O
stream	pointer
,	O
(	O
base	pointer
<=	O
10	O
?	O
"e%ld"	O
:	O
"@%ld"	O
)	O
,	O
exp	O
)	O
;	O
written	O
+=	O
fpret	O
;	O
}	O
TMP_FREE	O
;	O
return	O
ferror	int
(	O
stream	pointer
)	O
?	O
0	O
:	O
written	O
;	O
}	O