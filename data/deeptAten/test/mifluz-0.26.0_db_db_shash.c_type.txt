static	O
const	O
char	O
revid	O
[	O
]	O
=	O
"$Id: db_shash.c,v 1.3 2000/06/28 16:47:01 loic Exp $"	pointer
;	O
static	O
const	O
struct	O
{	struct
u_int32_t	struct
power	O
;	O
u_int32_t	O
prime	O
;	O
}	O
list	O
[	O
]	int
=	O
{	O
{	pointer
64	O
,	O
67	int
}	O
,	O
{	O
128	pointer
,	O
131	O
}	O
,	O
{	O
256	O
,	O
257	O
}	O
,	O
{	O
512	pointer
,	O
521	O
}	O
,	O
{	O
1024	pointer
,	O
1031	O
}	O
,	O
{	O
2048	pointer
,	O
2053	int
}	O
,	O
{	O
4096	O
,	O
4099	pointer
}	O
,	O
{	O
8192	pointer
,	O
8191	O
}	O
,	O
{	O
16384	O
,	O
16381	O
}	O
,	O
{	O
32768	O
,	O
32771	O
}	O
,	O
{	O
65536	O
,	O
65537	O
}	O
,	O
{	O
131072	O
,	O
131071	O
}	O
,	O
{	O
262144	O
,	O
262147	O
}	O
,	O
{	O
393216	O
,	O
393209	O
}	O
,	O
{	O
524288	O
,	O
524287	O
}	O
,	O
{	O
786432	O
,	O
786431	O
}	O
,	O
{	O
1048576	O
,	O
1048573	O
}	O
,	O
{	O
1572864	O
,	O
1572869	O
}	O
,	O
{	O
2097152	O
,	O
2097169	O
}	O
,	O
{	O
3145728	O
,	O
3145721	O
}	O
,	O
{	O
4194304	O
,	O
4194301	O
}	O
,	O
{	O
6291456	O
,	O
6291449	O
}	O
,	O
{	O
8388608	O
,	O
8388617	O
}	O
,	O
{	O
12582912	O
,	O
12582917	O
}	O
,	O
{	O
16777216	O
,	O
16777213	O
}	O
,	O
{	O
25165824	O
,	O
25165813	O
}	O
,	O
{	O
33554432	O
,	O
33554393	O
}	O
,	O
{	O
50331648	O
,	O
50331653	O
}	O
,	O
{	O
67108864	O
,	O
67108859	O
}	O
,	O
{	O
100663296	O
,	O
100663291	O
}	O
,	O
{	O
134217728	O
,	O
134217757	O
}	O
,	O
{	O
201326592	O
,	O
201326611	O
}	O
,	O
{	O
268435456	O
,	O
268435459	O
}	O
,	O
{	O
402653184	O
,	O
402653189	O
}	O
,	O
{	O
536870912	O
,	O
536870909	O
}	O
,	O
{	O
805306368	O
,	O
805306357	O
}	O
,	O
{	O
1073741824	O
,	O
1073741827	O
}	O
,	O
{	O
0	O
,	O
0	int
}	O
}	O
;	O
int	O
CDB___db_tablesize	function
(	O
n_buckets	O
)	O
u_int32_t	O
n_buckets	O
;	O
{	O
int	O
i	int
;	O
if	O
(	O
n_buckets	int
<	O
64	int
)	O
n_buckets	O
=	O
64	int
;	O
for	int
(	O
i	int
=	O
0	int
;	O
;	int
++	O
i	O
)	O
{	O
if	O
(	O
list	int
[	O
i	int
]	O
.	O
power	pointer
==	O
0	O
)	O
{	O
--	O
i	O
;	O
break	int
;	O
}	O
if	O
(	O
list	O
[	O
i	int
]	O
.	O
power	pointer
>=	O
n_buckets	int
)	O
break	O
;	O
}	int
return	O
(	O
list	O
[	O
i	int
]	O
.	O
prime	int
)	O
;	O
}	O
void	O
CDB___db_hashinit	function
(	O
begin	O
,	O
nelements	pointer
)	O
void	O
*	O
begin	pointer
;	O
u_int32_t	O
nelements	O
;	O
{	O
u_int32_t	O
i	O
;	O
SH_TAILQ_HEAD	O
(	O
hash_head	pointer
)	O
*	O
headp	pointer
;	O
headp	O
=	O
(	int
struct	O
hash_head	struct
*	O
)	O
begin	O
;	O
for	O
(	O
i	int
=	O
0	int
;	O
i	int
<	O
nelements	int
;	O
i	int
++	O
,	O
headp	int
++	O
)	O
SH_TAILQ_INIT	O
(	O
headp	pointer
)	O
;	O
}	O