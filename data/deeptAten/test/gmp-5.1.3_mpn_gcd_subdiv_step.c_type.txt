mp_size_t	O
mpn_gcd_subdiv_step	O
(	O
mp_ptr	O
ap	pointer
,	O
mp_ptr	pointer
bp	pointer
,	O
mp_size_t	pointer
n	pointer
,	O
mp_size_t	pointer
s	long
,	O
gcd_subdiv_step_hook	pointer
*	O
hook	pointer
,	O
void	O
*	O
ctx	pointer
,	O
mp_ptr	O
tp	pointer
)	O
{	O
static	O
const	O
mp_limb_t	O
one	long
=	O
CNST_LIMB	O
(	O
1	int
)	O
;	O
mp_size_t	O
an	long
,	O
bn	long
,	O
qn	long
;	O
int	O
swapped	int
;	O
ASSERT	O
(	O
n	O
>	O
0	int
)	O
;	O
ASSERT	O
(	O
ap	pointer
[	O
n	long
-	O
1	int
]	O
>	O
0	O
||	O
bp	O
[	O
n	int
-	O
1	int
]	O
>	O
0	int
)	O
;	O
an	O
=	O
bn	int
=	O
n	int
;	O
MPN_NORMALIZE	O
(	O
ap	pointer
,	O
an	pointer
)	O
;	O
MPN_NORMALIZE	O
(	O
bp	pointer
,	O
bn	pointer
)	O
;	O
swapped	O
=	O
0	int
;	O
if	O
(	O
an	long
==	O
bn	int
)	O
{	O
int	O
c	int
;	O
MPN_CMP	O
(	O
c	pointer
,	O
ap	int
,	O
bp	pointer
,	O
an	pointer
)	O
;	O
if	O
(	O
UNLIKELY	long
(	O
c	int
==	O
0	O
)	O
)	O
{	O
if	O
(	O
s	O
==	O
0	O
)	O
hook	O
(	O
ctx	pointer
,	O
ap	int
,	O
an	pointer
,	O
NULL	pointer
,	O
0	pointer
,	O
-	int
1	int
)	O
;	O
return	O
0	int
;	O
}	O
else	O
if	O
(	O
c	O
>	O
0	int
)	O
{	O
MP_PTR_SWAP	O
(	O
ap	pointer
,	O
bp	pointer
)	O
;	O
swapped	O
^=	O
1	O
;	O
}	O
}	O
else	O
{	O
if	O
(	O
an	O
>	O
bn	int
)	O
{	O
MPN_PTR_SWAP	O
(	O
ap	pointer
,	O
an	pointer
,	O
bp	pointer
,	O
bn	pointer
)	O
;	O
swapped	O
^=	O
1	O
;	O
}	O
}	O
if	O
(	O
an	O
<=	O
s	int
)	O
{	O
if	O
(	O
s	long
==	O
0	int
)	O
hook	O
(	O
ctx	pointer
,	O
bp	int
,	O
bn	pointer
,	O
NULL	pointer
,	O
0	int
,	O
swapped	int
^	O
1	int
)	O
;	O
return	O
0	int
;	O
}	O
ASSERT_NOCARRY	O
(	O
mpn_sub	O
(	O
bp	O
,	O
bp	pointer
,	O
bn	pointer
,	O
ap	pointer
,	O
an	pointer
)	O
)	O
;	O
MPN_NORMALIZE	O
(	O
bp	pointer
,	O
bn	pointer
)	O
;	O
ASSERT	O
(	O
bn	pointer
>	O
0	int
)	O
;	O
if	O
(	O
bn	int
<=	O
s	int
)	O
{	O
mp_limb_t	O
cy	long
=	O
mpn_add	int
(	O
bp	pointer
,	O
ap	pointer
,	O
an	pointer
,	O
bp	pointer
,	O
bn	pointer
)	O
;	O
if	O
(	O
cy	long
>	O
0	int
)	O
bp	O
[	O
an	int
]	O
=	O
cy	pointer
;	O
return	pointer
0	int
;	O
}	O
if	O
(	O
an	O
==	O
bn	int
)	O
{	O
int	O
c	int
;	O
MPN_CMP	O
(	O
c	pointer
,	O
ap	int
,	O
bp	O
,	O
an	pointer
)	O
;	O
if	O
(	O
UNLIKELY	int
(	O
c	int
==	O
0	O
)	O
)	O
{	O
if	O
(	O
s	int
>	O
0	int
)	O
hook	O
(	O
ctx	pointer
,	O
NULL	int
,	O
0	int
,	O
&	int
one	pointer
,	O
1	O
,	O
swapped	int
)	O
;	O
else	O
hook	O
(	O
ctx	pointer
,	O
bp	int
,	O
bn	pointer
,	O
NULL	pointer
,	O
0	int
,	O
swapped	int
)	O
;	O
return	O
0	int
;	O
}	O
hook	O
(	O
ctx	pointer
,	O
NULL	int
,	O
0	int
,	O
&	int
one	pointer
,	O
1	O
,	O
swapped	int
)	O
;	O
if	O
(	O
c	O
>	O
0	int
)	O
{	O
MP_PTR_SWAP	O
(	O
ap	pointer
,	O
bp	pointer
)	O
;	O
swapped	O
^=	O
1	O
;	O
}	O
}	O
else	O
{	O
hook	O
(	O
ctx	pointer
,	O
NULL	int
,	O
0	int
,	O
&	int
one	pointer
,	O
1	O
,	O
swapped	int
)	O
;	O
if	O
(	O
an	O
>	O
bn	int
)	O
{	O
MPN_PTR_SWAP	O
(	O
ap	pointer
,	O
an	pointer
,	O
bp	pointer
,	O
bn	pointer
)	O
;	O
swapped	O
^=	O
1	O
;	O
}	O
}	O
mpn_tdiv_qr	O
(	O
tp	O
,	O
bp	pointer
,	O
0	pointer
,	O
bp	int
,	O
bn	pointer
,	O
ap	pointer
,	O
an	pointer
)	O
;	O
qn	O
=	O
bn	int
-	O
an	int
+	O
1	int
;	O
bn	O
=	O
an	int
;	O
MPN_NORMALIZE	O
(	O
bp	pointer
,	O
bn	pointer
)	O
;	O
if	O
(	O
UNLIKELY	int
(	O
bn	int
<=	O
s	int
)	O
)	O
{	O
if	O
(	O
s	int
==	O
0	int
)	O
{	O
hook	O
(	O
ctx	pointer
,	O
ap	int
,	O
an	pointer
,	O
tp	pointer
,	O
qn	pointer
,	O
swapped	int
)	O
;	O
return	O
0	int
;	O
}	O
if	O
(	O
bn	O
>	O
0	int
)	O
{	O
mp_limb_t	O
cy	O
=	O
mpn_add	int
(	O
bp	pointer
,	O
ap	pointer
,	O
an	pointer
,	O
bp	pointer
,	O
bn	pointer
)	O
;	O
if	O
(	O
cy	int
)	O
bp	O
[	O
an	int
++	O
]	O
=	O
cy	pointer
;	O
}	O
else	O
MPN_COPY	O
(	O
bp	pointer
,	O
ap	pointer
,	O
an	pointer
)	O
;	O
MPN_DECR_U	O
(	O
tp	pointer
,	O
qn	pointer
,	O
1	int
)	O
;	O
}	O
hook	O
(	O
ctx	pointer
,	O
NULL	int
,	O
0	int
,	O
tp	int
,	O
qn	pointer
,	O
swapped	int
)	O
;	O
return	O
an	int
;	O
}	O