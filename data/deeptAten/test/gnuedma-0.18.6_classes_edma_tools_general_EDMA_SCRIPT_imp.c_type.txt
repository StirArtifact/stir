typedef	O
struct	O
{	O
EPChar	O
script_code	pointer
;	O
OBJID	O
interpreter	O
;	O
EDMAT_BUFFER	O
private	O
;	O
}	O
DtEDMA_SCRIPT	O
;	O
ESint32	O
EDMAPROC	O
EDMA_SCRIPTset_scriptZrS32	int
(	O
OBJID	int
IdObj	O
,	O
EPChar	pointer
script_name	pointer
)	O
{	O
DtEDMA_SCRIPT	O
*	O
m	pointer
;	O
m	O
=	O
(	O
DtEDMA_SCRIPT	O
*	O
)	O
edma_get_data_ref	function
(	O
IdObj	int
)	O
;	O
if	O
(	O
strstr	int
(	O
script_name	pointer
,	O
".py"	pointer
)	O
)	O
{	O
edma_met3	O
(	O
IdObj	O
,	O
"ANNA_PYTHON_INTERP@INTERPRETER<Initialize"	pointer
)	O
;	O
edma_met3	O
(	O
IdObj	pointer
,	O
"Run_Script"	pointer
,	O
script_name	pointer
)	O
;	O
return	O
0	int
;	O
}	O
return	O
0	int
;	O
}	O
ESint32	O
EDMAPROC	O
EDMA_SCRIPTupdate_objectOOrS32	function
(	O
OBJID	O
IdObj	O
,	O
OBJID	pointer
newid	O
,	O
OBJID	int
oldid	O
)	O
{	O
DtEDMA_SCRIPT	O
*	O
m	pointer
;	O
EChar	O
cmd	O
[	O
1024	int
]	O
;	O
m	O
=	O
(	O
DtEDMA_SCRIPT	O
*	O
)	O
edma_get_data_ref	function
(	O
IdObj	int
)	O
;	O
sprintf	O
(	O
cmd	pointer
,	O
"update (%ld,%ld);"	pointer
,	O
newid	pointer
,	O
oldid	pointer
)	O
;	O
edma_met3	O
(	O
IdObj	O
,	O
"Run_SimpleString"	pointer
,	O
cmd	pointer
)	O
;	O
return	O
0	int
;	O
}	O
ESint32	O
EDMAPROC	O
EDMA_SCRIPTrunrS32	function
(	O
OBJID	O
IdObj	O
)	O
{	O
DtEDMA_SCRIPT	O
*	O
m	pointer
;	O
m	O
=	O
(	O
DtEDMA_SCRIPT	O
*	O
)	O
edma_get_data_ref	function
(	O
IdObj	int
)	O
;	O
return	O
0	int
;	O
}	O
ESint32	O
EDMAPROC	O
EDMA_SCRIPTborn	function
(	O
OBJID	O
IdObj	O
)	O
{	O
DtEDMA_SCRIPT	O
*	O
m	pointer
;	O
m	O
=	O
(	O
DtEDMA_SCRIPT	O
*	O
)	O
edma_get_data_ref	function
(	O
IdObj	int
)	O
;	O
m	O
->	O
script_code	pointer
=	O
NULL	int
;	O
m	O
->	O
interpreter	pointer
=	O
-	int
1	int
;	O
return	O
0	int
;	O
}	O
ESint32	O
EDMAPROC	O
EDMA_SCRIPTrip	function
(	O
OBJID	O
IdObj	O
)	O
{	O
DtEDMA_SCRIPT	O
*	O
m	pointer
;	O
m	O
=	O
(	O
DtEDMA_SCRIPT	O
*	O
)	O
edma_get_data_ref	function
(	O
IdObj	int
)	O
;	O
edma_printf_obj	O
(	O
IdObj	int
,	O
"Ddestroying Object..."	pointer
)	O
;	O
edma_met3	O
(	O
IdObj	int
,	O
"Finalize"	pointer
)	O
;	O
if	O
(	O
m	int
->	O
interpreter	pointer
!=	O
-	O
1	int
)	O
edma_free_obj	O
(	O
m	pointer
->	O
interpreter	pointer
)	O
;	O
return	O
0	int
;	O
}	O
ESint32	O
EDMA_SCRIPT_class_factory	O
(	O
)	O
{	O
CLASSID	O
cid	O
;	O
cid	O
=	O
edma_idf_get_free_class_id	pointer
(	O
EDMA_LOCAL_CLASS	pointer
)	O
;	O
edma_idf_set_class_name	O
(	O
cid	pointer
,	O
"EDMA_SCRIPT"	pointer
)	O
;	O
edma_idf_set_class_namespace	O
(	O
cid	pointer
,	O
"system"	pointer
)	O
;	O
edma_idf_set_class_version	O
(	O
cid	O
,	O
0	pointer
,	O
0	int
)	O
;	O
edma_add_local_class_property	O
(	O
cid	O
,	O
"script_code"	pointer
,	O
DT_EZSTRING	pointer
,	O
E_L	int
,	O
0	int
)	O
;	O
edma_add_local_class_property	O
(	O
cid	O
,	O
"interpreter"	pointer
,	O
DT_EOBJECT	pointer
,	O
E_L	int
,	O
0	int
)	O
;	O
edma_add_local_class_property	O
(	O
cid	O
,	O
"private"	pointer
,	O
DT_EBUFFER	pointer
,	O
E_L	int
,	O
0	int
)	O
;	O
edma_add_local_class_method	O
(	O
cid	int
,	O
"set_script"	pointer
,	O
"ZrS32"	pointer
,	O
(	pointer
PPROC	O
)	O
EDMA_SCRIPTset_scriptZrS32	O
,	O
1	O
,	O
0	int
,	O
0	int
)	O
;	O
edma_add_local_class_method	O
(	O
cid	int
,	O
"update_object"	pointer
,	O
"OOrS32"	pointer
,	O
(	pointer
PPROC	O
)	O
EDMA_SCRIPTupdate_objectOOrS32	O
,	O
1	O
,	O
0	int
,	O
0	int
)	O
;	O
edma_add_local_class_method	O
(	O
cid	int
,	O
"run"	pointer
,	O
"rS32"	pointer
,	O
(	pointer
PPROC	O
)	O
EDMA_SCRIPTrunrS32	O
,	O
1	O
,	O
0	int
,	O
0	int
)	O
;	O
edma_add_local_class_method	O
(	O
cid	int
,	O
"born"	pointer
,	O
""	pointer
,	O
(	pointer
PPROC	O
)	O
EDMA_SCRIPTborn	O
,	O
0	pointer
,	O
0	int
,	O
0	int
)	O
;	O
edma_add_local_class_method	O
(	O
cid	int
,	O
"rip"	pointer
,	O
""	pointer
,	O
(	pointer
PPROC	O
)	O
EDMA_SCRIPTrip	O
,	O
0	pointer
,	O
0	int
,	O
0	int
)	O
;	O
edma_idf_set_class_id	O
(	O
cid	O
)	O
;	O
return	O
0	int
;	O
}	O