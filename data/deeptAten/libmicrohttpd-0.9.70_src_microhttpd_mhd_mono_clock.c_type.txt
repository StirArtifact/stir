static	O
clockid_t	int
mono_clock_id	int
=	O
_MHD_UNWANTED_CLOCK	O
;	O
static	O
time_t	long
mono_clock_start	long
;	O
static	O
time_t	long
sys_clock_start	long
;	O
enum	O
_MHD_mono_clock_source	enum
{	O
_MHD_CLOCK_NO_SOURCE	int
=	O
0	int
,	O
_MHD_CLOCK_GETTIME	int
,	O
_MHD_CLOCK_GET_TIME	int
,	O
_MHD_CLOCK_GETHRTIME	int
,	O
_MHD_CLOCK_GETTICKCOUNT64	int
,	O
_MHD_CLOCK_PERFCOUNTER	int
}	O
;	O
void	O
MHD_monotonic_sec_counter_init	function
(	O
void	O
)	O
{	O
enum	O
_MHD_mono_clock_source	enum
mono_clock_source	enum
=	O
_MHD_CLOCK_NO_SOURCE	int
;	O
struct	O
timespec	struct
ts	struct
;	O
mono_clock_id	int
=	O
_MHD_UNWANTED_CLOCK	O
;	O
if	O
(	O
0	int
)	O
{	O
}	O
else	O
if	O
(	O
0	int
==	O
clock_gettime	function
(	O
CLOCK_MONOTONIC_COARSE	int
,	O
&	O
ts	struct
)	O
)	O
{	O
mono_clock_id	int
=	O
CLOCK_MONOTONIC_COARSE	int
;	O
mono_clock_start	long
=	O
ts	struct
.	O
tv_sec	long
;	O
mono_clock_source	enum
=	O
_MHD_CLOCK_GETTIME	int
;	O
}	O
else	O
if	O
(	O
0	int
==	O
clock_gettime	function
(	O
CLOCK_MONOTONIC_RAW	int
,	O
&	O
ts	struct
)	O
)	O
{	O
mono_clock_id	int
=	O
CLOCK_MONOTONIC_RAW	int
;	O
mono_clock_start	long
=	O
ts	struct
.	O
tv_sec	long
;	O
mono_clock_source	enum
=	O
_MHD_CLOCK_GETTIME	int
;	O
}	O
else	O
if	O
(	O
0	int
==	O
clock_gettime	function
(	O
CLOCK_BOOTTIME	int
,	O
&	O
ts	struct
)	O
)	O
{	O
mono_clock_id	int
=	O
CLOCK_BOOTTIME	int
;	O
mono_clock_start	long
=	O
ts	struct
.	O
tv_sec	long
;	O
mono_clock_source	enum
=	O
_MHD_CLOCK_GETTIME	int
;	O
}	O
else	O
if	O
(	O
0	int
==	O
clock_gettime	function
(	O
CLOCK_MONOTONIC	int
,	O
&	O
ts	struct
)	O
)	O
{	O
mono_clock_id	int
=	O
CLOCK_MONOTONIC	int
;	O
mono_clock_start	long
=	O
ts	struct
.	O
tv_sec	long
;	O
mono_clock_source	enum
=	O
_MHD_CLOCK_GETTIME	int
;	O
}	O
else	O
{	O
mono_clock_source	enum
=	O
_MHD_CLOCK_NO_SOURCE	int
;	O
}	O
(	O
void	O
)	O
mono_clock_source	enum
;	O
sys_clock_start	long
=	O
time	struct
(	O
NULL	O
)	O
;	O
}	O
void	O
MHD_monotonic_sec_counter_finish	function
(	O
void	O
)	O
{	O
}	O
time_t	long
MHD_monotonic_sec_counter	function
(	O
void	O
)	O
{	O
struct	O
timespec	struct
ts	struct
;	O
if	O
(	O
(	O
_MHD_UNWANTED_CLOCK	O
!=	O
mono_clock_id	int
)	O
&&	O
(	O
0	int
==	O
clock_gettime	function
(	O
mono_clock_id	int
,	O
&	O
ts	struct
)	O
)	O
)	O
return	O
ts	struct
.	O
tv_sec	long
-	O
mono_clock_start	long
;	O
return	O
time	struct
(	O
NULL	O
)	O
-	O
sys_clock_start	long
;	O
}	O
