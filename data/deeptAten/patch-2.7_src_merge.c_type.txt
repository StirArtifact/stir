static	O
lin	long
count_context_lines	function
(	O
void	O
)	O
;	O
static	O
bool	bool
context_matches_file	function
(	O
lin	long
,	O
lin	long
)	O
;	O
static	O
void	O
compute_changes	function
(	O
lin	long
,	O
lin	long
,	O
lin	long
,	O
lin	long
,	O
char	O
*	O
,	O
char	O
*	O
)	O
;	O
static	O
lin	long
locate_merge	function
(	O
lin	long
*	O
matched	pointer
)	O
{	O
lin	long
first_guess	long
=	O
pch_first	function
(	O
)	O
+	O
in_offset	long
;	O
lin	long
pat_lines	long
=	O
pch_ptrn_lines	function
(	O
)	O
;	O
lin	long
context_lines	long
=	O
count_context_lines	function
(	O
)	O
;	O
lin	long
max_where	long
=	O
input_lines	long
-	O
pat_lines	long
+	O
context_lines	long
+	O
1	int
;	O
lin	long
min_where	long
=	O
last_frozen_line	long
+	O
1	int
;	O
lin	long
max_pos_offset	long
=	O
max_where	long
-	O
first_guess	long
;	O
lin	long
max_neg_offset	long
=	O
first_guess	long
-	O
min_where	long
;	O
lin	long
max_offset	long
=	O
(	O
max_pos_offset	long
<	O
max_neg_offset	long
?	O
max_neg_offset	long
:	O
max_pos_offset	long
)	O
;	O
lin	long
where	long
=	O
first_guess	long
,	O
max_matched	long
=	O
0	int
;	O
lin	long
min	long
,	O
max	long
;	O
lin	long
offset	long
;	O
bool	bool
match_until_eof	bool
;	O
if	O
(	O
context_lines	long
==	O
0	int
)	O
goto	O
out	O
;	O
max	long
=	O
2	int
*	O
context_lines	long
;	O
min	long
=	O
pat_lines	long
-	O
context_lines	long
;	O
if	O
(	O
debug	int
&	O
1	int
)	O
{	O
char	O
numbuf0	array
[	O
LINENUM_LENGTH_BOUND	O
+	O
1	int
]	O
;	O
char	O
numbuf1	array
[	O
LINENUM_LENGTH_BOUND	O
+	O
1	int
]	O
;	O
say	function
(	O
"locating merge: min=%s max=%s "	pointer
,	O
format_linenum	function
(	O
numbuf0	array
,	O
min	long
)	O
,	O
format_linenum	function
(	O
numbuf1	array
,	O
max	long
)	O
)	O
;	O
}	O
offset	long
=	O
pch_suffix_context	function
(	O
)	O
-	O
pch_prefix_context	function
(	O
)	O
;	O
if	O
(	O
offset	long
>	O
0	int
&&	O
pch_first	function
(	O
)	O
<=	O
1	int
)	O
max_pos_offset	long
=	O
0	int
;	O
match_until_eof	bool
=	O
offset	long
<	O
0	int
;	O
if	O
(	O
first_guess	long
<=	O
max_neg_offset	long
)	O
max_neg_offset	long
=	O
first_guess	long
-	O
1	int
;	O
for	O
(	O
offset	long
=	O
0	int
;	O
offset	long
<=	O
max_offset	long
;	O
offset	long
++	O
)	O
{	O
if	O
(	O
offset	long
<=	O
max_pos_offset	long
)	O
{	O
lin	long
guess	long
=	O
first_guess	long
+	O
offset	long
;	O
lin	long
last	long
;	O
lin	long
changes	long
;	O
changes	long
=	O
bestmatch	function
(	O
1	int
,	O
pat_lines	long
+	O
1	int
,	O
guess	long
,	O
input_lines	long
+	O
1	int
,	O
match_until_eof	bool
?	O
input_lines	long
-	O
guess	long
+	O
1	int
:	O
min	long
,	O
max	long
,	O
&	O
last	long
)	O
;	O
if	O
(	O
changes	long
<=	O
max	long
&&	O
max_matched	long
<	O
last	long
-	O
guess	long
)	O
{	O
max_matched	long
=	O
last	long
-	O
guess	long
;	O
where	long
=	O
guess	long
;	O
if	O
(	O
changes	long
==	O
0	int
)	O
break	O
;	O
min	long
=	O
last	long
-	O
guess	long
;	O
max	long
=	O
changes	long
-	O
1	int
;	O
}	O
}	O
if	O
(	O
0	int
<	O
offset	long
&&	O
offset	long
<=	O
max_neg_offset	long
)	O
{	O
lin	long
guess	long
=	O
first_guess	long
-	O
offset	long
;	O
lin	long
last	long
;	O
lin	long
changes	long
;	O
changes	long
=	O
bestmatch	function
(	O
1	int
,	O
pat_lines	long
+	O
1	int
,	O
guess	long
,	O
input_lines	long
+	O
1	int
,	O
match_until_eof	bool
?	O
input_lines	long
-	O
guess	long
+	O
1	int
:	O
min	long
,	O
max	long
,	O
&	O
last	long
)	O
;	O
if	O
(	O
changes	long
<=	O
max	long
&&	O
max_matched	long
<	O
last	long
-	O
guess	long
)	O
{	O
max_matched	long
=	O
last	long
-	O
guess	long
;	O
where	long
=	O
guess	long
;	O
if	O
(	O
changes	long
==	O
0	int
)	O
break	O
;	O
min	long
=	O
last	long
-	O
guess	long
;	O
max	long
=	O
changes	long
-	O
1	int
;	O
}	O
}	O
}	O
if	O
(	O
debug	int
&	O
1	int
)	O
{	O
char	O
numbuf0	array
[	O
LINENUM_LENGTH_BOUND	O
+	O
1	int
]	O
;	O
char	O
numbuf1	array
[	O
LINENUM_LENGTH_BOUND	O
+	O
1	int
]	O
;	O
char	O
numbuf2	array
[	O
LINENUM_LENGTH_BOUND	O
+	O
1	int
]	O
;	O
say	function
(	O
"where=%s matched=%s changes=%s\n"	pointer
,	O
format_linenum	function
(	O
numbuf0	array
,	O
where	long
)	O
,	O
format_linenum	function
(	O
numbuf1	array
,	O
max_matched	long
)	O
,	O
format_linenum	function
(	O
numbuf2	array
,	O
max	long
+	O
1	int
)	O
)	O
;	O
}	O
out	O
:	O
*	O
matched	pointer
=	O
max_matched	long
;	O
if	O
(	O
where	long
<	O
min_where	long
)	O
where	long
=	O
min_where	long
;	O
return	O
where	long
;	O
}	O
static	O
void	O
print_linerange	function
(	O
lin	long
from	long
,	O
lin	long
to	long
)	O
{	O
char	O
numbuf0	array
[	O
LINENUM_LENGTH_BOUND	O
+	O
1	int
]	O
;	O
char	O
numbuf1	array
[	O
LINENUM_LENGTH_BOUND	O
+	O
1	int
]	O
;	O
if	O
(	O
to	long
<=	O
from	long
)	O
printf	function
(	O
"%s"	pointer
,	O
format_linenum	function
(	O
numbuf0	array
,	O
from	long
)	O
)	O
;	O
else	O
printf	function
(	O
"%s-%s"	pointer
,	O
format_linenum	function
(	O
numbuf0	array
,	O
from	long
)	O
,	O
format_linenum	function
(	O
numbuf1	array
,	O
to	long
)	O
)	O
;	O
}	O
static	O
void	O
merge_result	function
(	O
bool	bool
*	O
first_result	pointer
,	O
int	O
hunk	int
,	O
char	O
const	O
*	O
what	pointer
,	O
lin	long
from	long
,	O
lin	long
to	long
)	O
{	O
static	O
char	O
const	O
*	O
last_what	pointer
;	O
if	O
(	O
*	O
first_result	pointer
&&	O
what	pointer
)	O
{	O
printf	function
(	O
"Hunk #%d %s at "	pointer
,	O
hunk	int
,	O
what	pointer
)	O
;	O
last_what	pointer
=	O
what	pointer
;	O
}	O
else	O
if	O
(	O
!	O
what	pointer
)	O
{	O
if	O
(	O
!	O
*	O
first_result	pointer
)	O
{	O
fputs	function
(	O
".\n"	pointer
,	O
stdout	pointer
)	O
;	O
fflush	function
(	O
stdout	pointer
)	O
;	O
last_what	pointer
=	O
0	int
;	O
}	O
return	O
;	O
}	O
else	O
if	O
(	O
last_what	pointer
==	O
what	pointer
)	O
fputs	function
(	O
","	pointer
,	O
stdout	pointer
)	O
;	O
else	O
printf	function
(	O
", %s at "	pointer
,	O
what	pointer
)	O
;	O
print_linerange	function
(	O
from	long
+	O
out_offset	long
,	O
to	long
+	O
out_offset	long
)	O
;	O
*	O
first_result	pointer
=	O
false	int
;	O
}	O
bool	bool
merge_hunk	function
(	O
int	O
hunk	int
,	O
struct	O
outstate	struct
*	O
outstate	struct
,	O
lin	long
where	long
,	O
bool	bool
*	O
somefailed	pointer
)	O
{	O
bool	bool
applies_cleanly	bool
;	O
bool	bool
first_result	pointer
=	O
true	int
;	O
bool	bool
already_applied	bool
;	O
FILE	struct
*	O
fp	pointer
=	O
outstate	struct
->	O
ofp	pointer
;	O
lin	long
old	long
=	O
1	int
;	O
lin	long
firstold	long
=	O
pch_ptrn_lines	function
(	O
)	O
;	O
lin	long
new	long
=	O
firstold	long
+	O
1	int
;	O
lin	long
firstnew	long
=	O
pch_end	function
(	O
)	O
;	O
lin	long
in	long
;	O
lin	long
firstin	long
;	O
char	O
*	O
oldin	pointer
;	O
lin	long
matched	pointer
;	O
lin	long
lastwhere	long
;	O
pch_normalize	function
(	O
UNI_DIFF	int
)	O
;	O
assert	O
(	O
pch_char	function
(	O
firstnew	long
+	O
1	int
)	O
==	O
'^'	O
)	O
;	O
while	O
(	O
pch_char	function
(	O
new	long
)	O
==	O
'='	O
||	O
pch_char	function
(	O
new	long
)	O
==	O
'\n'	O
)	O
new	long
++	O
;	O
if	O
(	O
where	long
)	O
{	O
applies_cleanly	bool
=	O
true	int
;	O
matched	pointer
=	O
pch_ptrn_lines	function
(	O
)	O
;	O
}	O
else	O
{	O
where	long
=	O
locate_merge	function
(	O
&	O
matched	pointer
)	O
;	O
applies_cleanly	bool
=	O
false	int
;	O
}	O
in	long
=	O
firstold	long
+	O
2	int
;	O
oldin	pointer
=	O
xmalloc	function
(	O
in	long
+	O
matched	pointer
+	O
1	int
)	O
;	O
memset	function
(	O
oldin	pointer
,	O
' '	O
,	O
in	long
+	O
matched	pointer
)	O
;	O
oldin	pointer
[	O
0	int
]	O
=	O
'*'	O
;	O
oldin	pointer
[	O
in	long
-	O
1	int
]	O
=	O
'='	O
;	O
oldin	pointer
[	O
in	long
+	O
matched	pointer
]	O
=	O
'^'	O
;	O
compute_changes	function
(	O
old	long
,	O
in	long
-	O
1	int
,	O
where	long
,	O
where	long
+	O
matched	pointer
,	O
oldin	pointer
+	O
old	long
,	O
oldin	pointer
+	O
in	long
)	O
;	O
if	O
(	O
debug	int
&	O
2	int
)	O
{	O
char	O
numbuf0	array
[	O
LINENUM_LENGTH_BOUND	O
+	O
1	int
]	O
;	O
char	O
numbuf1	array
[	O
LINENUM_LENGTH_BOUND	O
+	O
1	int
]	O
;	O
lin	long
n	long
;	O
fputc	function
(	O
'\n'	O
,	O
stderr	pointer
)	O
;	O
for	O
(	O
n	long
=	O
0	int
;	O
n	long
<=	O
in	long
+	O
matched	pointer
;	O
n	long
++	O
)	O
{	O
fprintf	function
(	O
stderr	pointer
,	O
"%s %c"	pointer
,	O
format_linenum	function
(	O
numbuf0	array
,	O
n	long
)	O
,	O
oldin	pointer
[	O
n	long
]	O
)	O
;	O
if	O
(	O
n	long
==	O
0	int
)	O
fprintf	function
(	O
stderr	pointer
,	O
" %s,%s\n"	pointer
,	O
format_linenum	function
(	O
numbuf0	array
,	O
pch_first	function
(	O
)	O
)	O
,	O
format_linenum	function
(	O
numbuf1	array
,	O
pch_ptrn_lines	function
(	O
)	O
)	O
)	O
;	O
else	O
if	O
(	O
n	long
<=	O
firstold	long
)	O
fprintf	function
(	O
stderr	pointer
,	O
" |%.*s"	pointer
,	O
(	O
int	O
)	O
pch_line_len	function
(	O
n	long
)	O
,	O
pfetch	function
(	O
n	long
)	O
)	O
;	O
else	O
if	O
(	O
n	long
==	O
in	long
-	O
1	int
)	O
fprintf	function
(	O
stderr	pointer
,	O
" %s,%s\n"	pointer
,	O
format_linenum	function
(	O
numbuf0	array
,	O
where	long
)	O
,	O
format_linenum	function
(	O
numbuf1	array
,	O
matched	pointer
)	O
)	O
;	O
else	O
if	O
(	O
n	long
>=	O
in	long
&&	O
n	long
<	O
in	long
+	O
matched	pointer
)	O
{	O
size_t	long
size	long
;	O
const	O
char	O
*	O
line	pointer
;	O
line	pointer
=	O
ifetch	function
(	O
where	long
+	O
n	long
-	O
in	long
,	O
false	int
,	O
&	O
size	long
)	O
;	O
fprintf	function
(	O
stderr	pointer
,	O
" |%.*s"	pointer
,	O
(	O
int	O
)	O
size	long
,	O
line	pointer
)	O
;	O
}	O
else	O
fputc	function
(	O
'\n'	O
,	O
stderr	pointer
)	O
;	O
}	O
fflush	function
(	O
stderr	pointer
)	O
;	O
}	O
if	O
(	O
last_frozen_line	long
<	O
where	long
-	O
1	int
)	O
if	O
(	O
!	O
copy_till	function
(	O
outstate	struct
,	O
where	long
-	O
1	int
)	O
)	O
return	O
false	int
;	O
for	O
(	O
;	O
;	O
)	O
{	O
firstold	long
=	O
old	long
;	O
firstnew	long
=	O
new	long
;	O
firstin	long
=	O
in	long
;	O
if	O
(	O
pch_char	function
(	O
old	long
)	O
==	O
'-'	O
||	O
pch_char	function
(	O
new	long
)	O
==	O
'+'	O
)	O
{	O
lin	long
lines	long
;	O
while	O
(	O
pch_char	function
(	O
old	long
)	O
==	O
'-'	O
)	O
{	O
if	O
(	O
oldin	pointer
[	O
old	long
]	O
==	O
'-'	O
||	O
oldin	pointer
[	O
in	long
]	O
==	O
'+'	O
)	O
goto	O
conflict	O
;	O
else	O
if	O
(	O
oldin	pointer
[	O
old	long
]	O
==	O
' '	O
)	O
{	O
assert	O
(	O
oldin	pointer
[	O
in	long
]	O
==	O
' '	O
)	O
;	O
in	long
++	O
;	O
}	O
old	long
++	O
;	O
}	O
if	O
(	O
oldin	pointer
[	O
old	long
]	O
==	O
'-'	O
||	O
oldin	pointer
[	O
in	long
]	O
==	O
'+'	O
)	O
goto	O
conflict	O
;	O
while	O
(	O
pch_char	function
(	O
new	long
)	O
==	O
'+'	O
)	O
new	long
++	O
;	O
lines	long
=	O
new	long
-	O
firstnew	long
;	O
if	O
(	O
verbosity	enum
==	O
VERBOSE	int
||	O
(	O
(	O
verbosity	enum
!=	O
SILENT	int
)	O
&&	O
!	O
applies_cleanly	bool
)	O
)	O
merge_result	function
(	O
&	O
first_result	pointer
,	O
hunk	int
,	O
"merged"	pointer
,	O
where	long
,	O
where	long
+	O
lines	long
-	O
1	int
)	O
;	O
last_frozen_line	long
+=	O
(	O
old	long
-	O
firstold	long
)	O
;	O
where	long
+=	O
(	O
old	long
-	O
firstold	long
)	O
;	O
out_offset	long
+=	O
new	long
-	O
firstnew	long
;	O
if	O
(	O
firstnew	long
<	O
new	long
)	O
{	O
while	O
(	O
firstnew	long
<	O
new	long
)	O
{	O
outstate	struct
->	O
after_newline	bool
=	O
pch_write_line	function
(	O
firstnew	long
,	O
fp	pointer
)	O
;	O
firstnew	long
++	O
;	O
}	O
outstate	struct
->	O
zero_output	bool
=	O
false	int
;	O
}	O
}	O
else	O
if	O
(	O
pch_char	function
(	O
old	long
)	O
==	O
' '	O
)	O
{	O
if	O
(	O
oldin	pointer
[	O
old	long
]	O
==	O
'-'	O
)	O
{	O
while	O
(	O
pch_char	function
(	O
old	long
)	O
==	O
' '	O
)	O
{	O
if	O
(	O
oldin	pointer
[	O
old	long
]	O
!=	O
'-'	O
)	O
break	O
;	O
if	O
(	O
pch_char	function
(	O
new	long
)	O
==	O
'+'	O
)	O
goto	O
conflict	O
;	O
else	O
assert	O
(	O
pch_char	function
(	O
new	long
)	O
==	O
' '	O
)	O
;	O
old	long
++	O
;	O
new	long
++	O
;	O
}	O
if	O
(	O
pch_char	function
(	O
old	long
)	O
==	O
'-'	O
||	O
pch_char	function
(	O
new	long
)	O
==	O
'+'	O
)	O
goto	O
conflict	O
;	O
}	O
else	O
if	O
(	O
oldin	pointer
[	O
in	long
]	O
==	O
'+'	O
)	O
{	O
while	O
(	O
oldin	pointer
[	O
in	long
]	O
==	O
'+'	O
)	O
in	long
++	O
;	O
where	long
+=	O
in	long
-	O
firstin	long
;	O
if	O
(	O
!	O
copy_till	function
(	O
outstate	struct
,	O
where	long
-	O
1	int
)	O
)	O
return	O
false	int
;	O
}	O
else	O
if	O
(	O
oldin	pointer
[	O
old	long
]	O
==	O
' '	O
)	O
{	O
while	O
(	O
pch_char	function
(	O
old	long
)	O
==	O
' '	O
&&	O
oldin	pointer
[	O
old	long
]	O
==	O
' '	O
&&	O
pch_char	function
(	O
new	long
)	O
==	O
' '	O
&&	O
oldin	pointer
[	O
in	long
]	O
==	O
' '	O
)	O
{	O
old	long
++	O
;	O
new	long
++	O
;	O
in	long
++	O
;	O
}	O
where	long
+=	O
(	O
in	long
-	O
firstin	long
)	O
;	O
if	O
(	O
!	O
copy_till	function
(	O
outstate	struct
,	O
where	long
-	O
1	int
)	O
)	O
return	O
false	int
;	O
}	O
}	O
else	O
{	O
assert	O
(	O
pch_char	function
(	O
old	long
)	O
==	O
'='	O
&&	O
pch_char	function
(	O
new	long
)	O
==	O
'^'	O
)	O
;	O
break	O
;	O
}	O
continue	O
;	O
conflict	O
:	O
for	O
(	O
;	O
;	O
)	O
{	O
if	O
(	O
pch_char	function
(	O
old	long
)	O
==	O
'-'	O
)	O
{	O
while	O
(	O
oldin	pointer
[	O
in	long
]	O
==	O
'+'	O
)	O
in	long
++	O
;	O
if	O
(	O
oldin	pointer
[	O
old	long
]	O
==	O
' '	O
)	O
{	O
assert	O
(	O
oldin	pointer
[	O
in	long
]	O
==	O
' '	O
)	O
;	O
in	long
++	O
;	O
}	O
old	long
++	O
;	O
}	O
else	O
if	O
(	O
oldin	pointer
[	O
old	long
]	O
==	O
'-'	O
)	O
{	O
while	O
(	O
pch_char	function
(	O
new	long
)	O
==	O
'+'	O
)	O
new	long
++	O
;	O
if	O
(	O
pch_char	function
(	O
old	long
)	O
==	O
' '	O
)	O
{	O
assert	O
(	O
pch_char	function
(	O
new	long
)	O
==	O
' '	O
)	O
;	O
new	long
++	O
;	O
}	O
old	long
++	O
;	O
}	O
else	O
if	O
(	O
pch_char	function
(	O
new	long
)	O
==	O
'+'	O
)	O
while	O
(	O
pch_char	function
(	O
new	long
)	O
==	O
'+'	O
)	O
new	long
++	O
;	O
else	O
if	O
(	O
oldin	pointer
[	O
in	long
]	O
==	O
'+'	O
)	O
while	O
(	O
oldin	pointer
[	O
in	long
]	O
==	O
'+'	O
)	O
in	long
++	O
;	O
else	O
break	O
;	O
}	O
assert	O
(	O
(	O
(	O
pch_char	function
(	O
old	long
)	O
==	O
' '	O
&&	O
pch_char	function
(	O
new	long
)	O
==	O
' '	O
)	O
||	O
(	O
pch_char	function
(	O
old	long
)	O
==	O
'='	O
&&	O
pch_char	function
(	O
new	long
)	O
==	O
'^'	O
)	O
)	O
&&	O
(	O
(	O
oldin	pointer
[	O
old	long
]	O
==	O
' '	O
&&	O
oldin	pointer
[	O
in	long
]	O
==	O
' '	O
)	O
||	O
(	O
oldin	pointer
[	O
old	long
]	O
==	O
'='	O
&&	O
oldin	pointer
[	O
in	long
]	O
==	O
'^'	O
)	O
)	O
)	O
;	O
for	O
(	O
lastwhere	long
=	O
where	long
;	O
firstin	long
<	O
in	long
&&	O
firstnew	long
<	O
new	long
&&	O
context_matches_file	function
(	O
firstnew	long
,	O
lastwhere	long
)	O
;	O
firstin	long
++	O
,	O
firstnew	long
++	O
,	O
lastwhere	long
++	O
)	O
;	O
already_applied	bool
=	O
(	O
firstin	long
==	O
in	long
&&	O
firstnew	long
==	O
new	long
)	O
;	O
if	O
(	O
already_applied	bool
)	O
merge_result	function
(	O
&	O
first_result	pointer
,	O
hunk	int
,	O
"already applied"	pointer
,	O
where	long
,	O
lastwhere	long
-	O
1	int
)	O
;	O
if	O
(	O
conflict_style	enum
==	O
MERGE_DIFF3	int
)	O
{	O
lin	long
common_prefix	long
=	O
lastwhere	long
-	O
where	long
;	O
firstin	long
-=	O
common_prefix	long
;	O
firstnew	long
-=	O
common_prefix	long
;	O
lastwhere	long
-=	O
common_prefix	long
;	O
}	O
if	O
(	O
where	long
!=	O
lastwhere	long
)	O
{	O
where	long
=	O
lastwhere	long
;	O
if	O
(	O
!	O
copy_till	function
(	O
outstate	struct
,	O
where	long
-	O
1	int
)	O
)	O
return	O
false	int
;	O
}	O
if	O
(	O
!	O
already_applied	bool
)	O
{	O
lin	long
common_suffix	long
=	O
0	int
;	O
lin	long
lines	long
;	O
if	O
(	O
conflict_style	enum
==	O
MERGE_MERGE	int
)	O
{	O
for	O
(	O
lastwhere	long
=	O
where	long
+	O
(	O
in	long
-	O
firstin	long
)	O
;	O
firstin	long
<	O
in	long
&&	O
firstnew	long
<	O
new	long
&&	O
context_matches_file	function
(	O
new	long
-	O
1	int
,	O
lastwhere	long
-	O
1	int
)	O
;	O
in	long
--	O
,	O
new	long
--	O
,	O
lastwhere	long
--	O
,	O
common_suffix	long
++	O
)	O
;	O
}	O
lines	long
=	O
3	int
+	O
(	O
in	long
-	O
firstin	long
)	O
+	O
(	O
new	long
-	O
firstnew	long
)	O
;	O
if	O
(	O
conflict_style	enum
==	O
MERGE_DIFF3	int
)	O
lines	long
+=	O
1	int
+	O
(	O
old	long
-	O
firstold	long
)	O
;	O
merge_result	function
(	O
&	O
first_result	pointer
,	O
hunk	int
,	O
"NOT MERGED"	pointer
,	O
where	long
,	O
where	long
+	O
lines	long
-	O
1	int
)	O
;	O
out_offset	long
+=	O
lines	long
-	O
(	O
in	long
-	O
firstin	long
)	O
;	O
fputs	function
(	O
outstate	struct
->	O
after_newline	bool
+	O
"\n<<<<<<<\n"	pointer
,	O
fp	pointer
)	O
;	O
outstate	struct
->	O
after_newline	bool
=	O
true	int
;	O
if	O
(	O
firstin	long
<	O
in	long
)	O
{	O
where	long
+=	O
(	O
in	long
-	O
firstin	long
)	O
;	O
if	O
(	O
!	O
copy_till	function
(	O
outstate	struct
,	O
where	long
-	O
1	int
)	O
)	O
return	O
false	int
;	O
}	O
if	O
(	O
conflict_style	enum
==	O
MERGE_DIFF3	int
)	O
{	O
fputs	function
(	O
outstate	struct
->	O
after_newline	bool
+	O
"\n|||||||\n"	pointer
,	O
fp	pointer
)	O
;	O
outstate	struct
->	O
after_newline	bool
=	O
true	int
;	O
while	O
(	O
firstold	long
<	O
old	long
)	O
{	O
outstate	struct
->	O
after_newline	bool
=	O
pch_write_line	function
(	O
firstold	long
,	O
fp	pointer
)	O
;	O
firstold	long
++	O
;	O
}	O
}	O
fputs	function
(	O
outstate	struct
->	O
after_newline	bool
+	O
"\n=======\n"	pointer
,	O
fp	pointer
)	O
;	O
outstate	struct
->	O
after_newline	bool
=	O
true	int
;	O
while	O
(	O
firstnew	long
<	O
new	long
)	O
{	O
outstate	struct
->	O
after_newline	bool
=	O
pch_write_line	function
(	O
firstnew	long
,	O
fp	pointer
)	O
;	O
firstnew	long
++	O
;	O
}	O
fputs	function
(	O
outstate	struct
->	O
after_newline	bool
+	O
"\n>>>>>>>\n"	pointer
,	O
fp	pointer
)	O
;	O
outstate	struct
->	O
after_newline	bool
=	O
true	int
;	O
outstate	struct
->	O
zero_output	bool
=	O
false	int
;	O
if	O
(	O
ferror	function
(	O
fp	pointer
)	O
)	O
write_fatal	function
(	O
)	O
;	O
if	O
(	O
common_suffix	long
)	O
{	O
where	long
+=	O
common_suffix	long
;	O
if	O
(	O
!	O
copy_till	function
(	O
outstate	struct
,	O
where	long
-	O
1	int
)	O
)	O
return	O
false	int
;	O
in	long
+=	O
common_suffix	long
;	O
new	long
+=	O
common_suffix	long
;	O
}	O
*	O
somefailed	pointer
=	O
true	int
;	O
}	O
}	O
merge_result	function
(	O
&	O
first_result	pointer
,	O
0	int
,	O
0	int
,	O
0	int
,	O
0	int
)	O
;	O
assert	O
(	O
last_frozen_line	long
==	O
where	long
-	O
1	int
)	O
;	O
free	function
(	O
oldin	pointer
)	O
;	O
return	O
true	int
;	O
}	O
static	O
lin	long
count_context_lines	function
(	O
void	O
)	O
{	O
lin	long
old	long
;	O
lin	long
lastold	long
=	O
pch_ptrn_lines	function
(	O
)	O
;	O
lin	long
context	pointer
;	O
for	O
(	O
context	pointer
=	O
0	int
,	O
old	long
=	O
1	int
;	O
old	long
<=	O
lastold	long
;	O
old	long
++	O
)	O
if	O
(	O
pch_char	function
(	O
old	long
)	O
==	O
' '	O
)	O
context	pointer
++	O
;	O
return	O
context	pointer
;	O
}	O
static	O
bool	bool
context_matches_file	function
(	O
lin	long
old	long
,	O
lin	long
where	long
)	O
{	O
size_t	long
size	long
;	O
const	O
char	O
*	O
line	pointer
;	O
line	pointer
=	O
ifetch	function
(	O
where	long
,	O
false	int
,	O
&	O
size	long
)	O
;	O
return	O
size	long
&&	O
(	O
canonicalize	bool
?	O
similar	function
(	O
pfetch	function
(	O
old	long
)	O
,	O
pch_line_len	function
(	O
old	long
)	O
,	O
line	pointer
,	O
size	long
)	O
:	O
(	O
size	long
==	O
pch_line_len	function
(	O
old	long
)	O
&&	O
memcmp	function
(	O
line	pointer
,	O
pfetch	function
(	O
old	long
)	O
,	O
size	long
)	O
==	O
0	int
)	O
)	O
;	O
}	O
static	O
void	O
compute_changes	function
(	O
lin	long
xmin	long
,	O
lin	long
xmax	long
,	O
lin	long
ymin	long
,	O
lin	long
ymax	long
,	O
char	O
*	O
xchar	pointer
,	O
char	O
*	O
ychar	pointer
)	O
{	O
struct	O
context	pointer
ctxt	pointer
;	O
lin	long
diags	long
;	O
ctxt	pointer
.	O
xchar	pointer
=	O
xchar	pointer
-	O
xmin	long
;	O
ctxt	pointer
.	O
ychar	pointer
=	O
ychar	pointer
-	O
ymin	long
;	O
diags	long
=	O
xmax	long
+	O
ymax	long
+	O
3	int
;	O
ctxt	pointer
.	O
fdiag	pointer
=	O
xmalloc	function
(	O
2	int
*	O
diags	long
*	O
sizeof	O
(	O
*	O
ctxt	pointer
.	O
fdiag	pointer
)	O
)	O
;	O
ctxt	pointer
.	O
bdiag	pointer
=	O
ctxt	pointer
.	O
fdiag	pointer
+	O
diags	long
;	O
ctxt	pointer
.	O
fdiag	pointer
+=	O
ymax	long
+	O
1	int
;	O
ctxt	pointer
.	O
bdiag	pointer
+=	O
ymax	long
+	O
1	int
;	O
ctxt	pointer
.	O
heuristic	bool
=	O
true	int
;	O
ctxt	pointer
.	O
too_expensive	long
=	O
xmax	long
+	O
ymax	long
;	O
compareseq	function
(	O
xmin	long
,	O
xmax	long
,	O
ymin	long
,	O
ymax	long
,	O
true	int
,	O
&	O
ctxt	pointer
)	O
;	O
ctxt	pointer
.	O
fdiag	pointer
-=	O
ymax	long
+	O
1	int
;	O
free	function
(	O
ctxt	pointer
.	O
fdiag	pointer
)	O
;	O
}	O
