int	O
get_fs_usage	function
(	O
char	O
const	O
*	O
file	pointer
,	O
char	O
const	O
*	O
disk	pointer
,	O
struct	O
fs_usage	struct
*	O
fsp	pointer
)	O
{	O
(	O
void	O
)	O
disk	pointer
;	O
struct	O
statvfs	struct
fsd	struct
;	O
if	O
(	O
statvfs	struct
(	O
file	pointer
,	O
&	O
fsd	struct
)	O
<	O
0	int
)	O
return	O
-	O
1	int
;	O
fsp	pointer
->	O
fsu_blocksize	long
=	O
(	O
fsd	struct
.	O
f_frsize	long
?	O
PROPAGATE_ALL_ONES	O
(	O
fsd	struct
.	O
f_frsize	long
)	O
:	O
PROPAGATE_ALL_ONES	O
(	O
fsd	struct
.	O
f_bsize	long
)	O
)	O
;	O
fsp	pointer
->	O
fsu_blocks	long
=	O
PROPAGATE_ALL_ONES	O
(	O
fsd	struct
.	O
f_blocks	long
)	O
;	O
fsp	pointer
->	O
fsu_bfree	long
=	O
PROPAGATE_ALL_ONES	O
(	O
fsd	struct
.	O
f_bfree	long
)	O
;	O
fsp	pointer
->	O
fsu_bavail	long
=	O
PROPAGATE_TOP_BIT	O
(	O
fsd	struct
.	O
f_bavail	long
)	O
;	O
fsp	pointer
->	O
fsu_bavail_top_bit_set	bool
=	O
EXTRACT_TOP_BIT	O
(	O
fsd	struct
.	O
f_bavail	long
)	O
!=	O
0	int
;	O
fsp	pointer
->	O
fsu_files	long
=	O
PROPAGATE_ALL_ONES	O
(	O
fsd	struct
.	O
f_files	long
)	O
;	O
fsp	pointer
->	O
fsu_ffree	long
=	O
PROPAGATE_ALL_ONES	O
(	O
fsd	struct
.	O
f_ffree	long
)	O
;	O
return	O
0	int
;	O
}	O
