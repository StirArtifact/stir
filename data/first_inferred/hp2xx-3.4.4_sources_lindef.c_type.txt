double	O
CurrentLinePatLen	double
;	O
signed	O
int	O
CurrentLinePattern	int
;	O
LINESTYLE	array
lt	array
;	O
LineAttr	struct
CurrentLineAttr	struct
;	O
LineEnds	enum
CurrentLineEnd	enum
;	O
void	O
set_line_style	function
(	O
SCHAR	char
index	char
,	O
...	O
)	O
{	O
SCHAR	char
count	char
;	O
double	O
factor	double
,	O
percentage	double
;	O
va_list	array
ap	array
;	O
SCHAR	char
val	char
;	O
va_start	O
(	O
ap	array
,	O
index	char
)	O
;	O
for	O
(	O
count	char
=	O
0	int
,	O
percentage	double
=	O
0	int
;	O
count	char
<	O
LT_ELEMENTS	int
;	O
count	char
++	O
)	O
{	O
val	char
=	O
va_arg	O
(	O
ap	array
,	O
int	O
)	O
;	O
if	O
(	O
val	char
<	O
0	int
)	O
{	O
break	O
;	O
}	O
else	O
{	O
lt	array
[	O
index	char
-	O
LT_MIN	O
]	O
[	O
count	char
]	O
=	O
(	O
double	O
)	O
val	char
;	O
percentage	double
+=	O
val	char
;	O
}	O
}	O
lt	array
[	O
index	char
-	O
LT_MIN	O
]	O
[	O
count	char
]	O
=	O
-	O
1	int
;	O
if	O
(	O
fabs	function
(	O
percentage	double
-	O
100.	int
)	O
>	O
0.5	int
)	O
{	O
factor	double
=	O
100.0	int
/	O
percentage	double
;	O
for	O
(	O
count	char
=	O
0	int
;	O
count	char
<	O
LT_ELEMENTS	int
;	O
count	char
++	O
)	O
{	O
if	O
(	O
lt	array
[	O
index	char
-	O
LT_MIN	O
]	O
[	O
count	char
]	O
<	O
0	int
)	O
{	O
break	O
;	O
}	O
else	O
{	O
lt	array
[	O
index	char
-	O
LT_MIN	O
]	O
[	O
count	char
]	O
*=	O
factor	double
;	O
}	O
}	O
}	O
va_end	O
(	O
ap	array
)	O
;	O
}	O
void	O
set_line_style_by_UL	function
(	O
FILE	struct
*	O
hd	pointer
)	O
{	O
SCHAR	char
index	char
,	O
pos_index	char
,	O
neg_index	char
,	O
count	char
,	O
i	char
;	O
double	O
factor	double
,	O
percentage	double
;	O
float	O
tmp	float
;	O
if	O
(	O
read_float	function
(	O
&	O
tmp	float
,	O
hd	pointer
)	O
)	O
{	O
set_line_style_defaults	function
(	O
)	O
;	O
return	O
;	O
}	O
else	O
{	O
index	char
=	O
(	O
int	O
)	O
tmp	float
;	O
}	O
pos_index	char
=	O
index	char
-	O
LT_MIN	O
;	O
neg_index	char
=	O
(	O
index	char
*	O
-	O
1	int
)	O
-	O
LT_MIN	O
;	O
for	O
(	O
count	char
=	O
0	int
,	O
percentage	double
=	O
0	int
;	O
(	O
read_float	function
(	O
&	O
tmp	float
,	O
hd	pointer
)	O
==	O
0	int
)	O
;	O
count	char
++	O
)	O
{	O
lt	array
[	O
pos_index	char
]	O
[	O
count	char
]	O
=	O
(	O
double	O
)	O
tmp	float
;	O
percentage	double
+=	O
(	O
int	O
)	O
tmp	float
;	O
}	O
lt	array
[	O
pos_index	char
]	O
[	O
count	char
]	O
=	O
-	O
1	int
;	O
if	O
(	O
fabs	function
(	O
percentage	double
-	O
100.	int
)	O
>	O
0.5	int
)	O
{	O
factor	double
=	O
100.0	int
/	O
percentage	double
;	O
for	O
(	O
count	char
=	O
0	int
;	O
count	char
<	O
LT_ELEMENTS	int
;	O
count	char
++	O
)	O
{	O
if	O
(	O
lt	array
[	O
pos_index	char
]	O
[	O
count	char
]	O
<	O
0	int
)	O
{	O
break	O
;	O
}	O
else	O
{	O
lt	array
[	O
pos_index	char
]	O
[	O
count	char
]	O
*=	O
factor	double
;	O
}	O
}	O
}	O
count	char
--	O
;	O
if	O
(	O
count	char
%	O
2	int
)	O
{	O
lt	array
[	O
neg_index	char
]	O
[	O
0	int
]	O
=	O
lt	array
[	O
pos_index	char
]	O
[	O
0	int
]	O
/	O
2	int
;	O
for	O
(	O
i	char
=	O
1	int
;	O
i	char
<=	O
count	char
;	O
i	char
++	O
)	O
lt	array
[	O
neg_index	char
]	O
[	O
i	char
]	O
=	O
lt	array
[	O
pos_index	char
]	O
[	O
i	char
]	O
;	O
lt	array
[	O
neg_index	char
]	O
[	O
count	char
+	O
1	int
]	O
=	O
lt	array
[	O
pos_index	char
]	O
[	O
0	int
]	O
/	O
2	int
;	O
lt	array
[	O
neg_index	char
]	O
[	O
count	char
+	O
2	int
]	O
=	O
-	O
1	int
;	O
}	O
else	O
{	O
lt	array
[	O
neg_index	char
]	O
[	O
0	int
]	O
=	O
(	O
lt	array
[	O
pos_index	char
]	O
[	O
0	int
]	O
+	O
lt	array
[	O
pos_index	char
]	O
[	O
count	char
]	O
)	O
/	O
2	int
;	O
for	O
(	O
i	char
=	O
1	int
;	O
i	char
<	O
count	char
;	O
i	char
++	O
)	O
lt	array
[	O
neg_index	char
]	O
[	O
i	char
]	O
=	O
lt	array
[	O
pos_index	char
]	O
[	O
i	char
]	O
;	O
lt	array
[	O
neg_index	char
]	O
[	O
count	char
]	O
=	O
lt	array
[	O
neg_index	char
]	O
[	O
0	int
]	O
;	O
lt	array
[	O
neg_index	char
]	O
[	O
count	char
+	O
1	int
]	O
=	O
-	O
1	int
;	O
}	O
}	O
void	O
set_line_style_defaults	function
(	O
)	O
{	O
set_line_style	function
(	O
-	O
8	int
,	O
25	int
,	O
10	int
,	O
0	int
,	O
10	int
,	O
10	int
,	O
10	int
,	O
0	int
,	O
10	int
,	O
25	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
-	O
7	int
,	O
35	int
,	O
10	int
,	O
0	int
,	O
10	int
,	O
0	int
,	O
10	int
,	O
35	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
-	O
6	int
,	O
25	int
,	O
10	int
,	O
10	int
,	O
10	int
,	O
10	int
,	O
10	int
,	O
25	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
-	O
5	int
,	O
35	int
,	O
10	int
,	O
10	int
,	O
10	int
,	O
35	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
-	O
4	int
,	O
40	int
,	O
10	int
,	O
0	int
,	O
10	int
,	O
40	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
-	O
3	int
,	O
35	int
,	O
30	int
,	O
35	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
-	O
2	int
,	O
25	int
,	O
50	int
,	O
25	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
-	O
1	int
,	O
0	int
,	O
100	int
,	O
0	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
0	int
,	O
0	int
,	O
100	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
1	int
,	O
0	int
,	O
100	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
2	int
,	O
50	int
,	O
50	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
3	int
,	O
70	int
,	O
30	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
4	int
,	O
80	int
,	O
10	int
,	O
0	int
,	O
10	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
5	int
,	O
70	int
,	O
10	int
,	O
10	int
,	O
10	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
6	int
,	O
50	int
,	O
10	int
,	O
10	int
,	O
10	int
,	O
10	int
,	O
10	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
7	int
,	O
70	int
,	O
10	int
,	O
0	int
,	O
10	int
,	O
0	int
,	O
10	int
,	O
-	O
1	int
)	O
;	O
set_line_style	function
(	O
8	int
,	O
50	int
,	O
10	int
,	O
0	int
,	O
10	int
,	O
10	int
,	O
10	int
,	O
0	int
,	O
10	int
,	O
-	O
1	int
)	O
;	O
}	O
void	O
print_line_style	function
(	O
void	O
)	O
{	O
int	O
i	char
,	O
j	int
;	O
printf	function
(	O
"\n"	pointer
)	O
;	O
for	O
(	O
j	int
=	O
0	int
;	O
j	int
<	O
LT_PATTERNS	O
;	O
j	int
++	O
)	O
{	O
if	O
(	O
lt	array
[	O
j	int
]	O
[	O
0	int
]	O
<	O
0	int
)	O
continue	O
;	O
else	O
printf	function
(	O
"LT %3d "	pointer
,	O
LT_MIN	O
+	O
j	int
)	O
;	O
for	O
(	O
i	char
=	O
0	int
;	O
i	char
<=	O
LT_ELEMENTS	int
;	O
i	char
++	O
)	O
{	O
if	O
(	O
lt	array
[	O
j	int
]	O
[	O
i	char
]	O
<	O
0	int
)	O
break	O
;	O
printf	function
(	O
"%3.00f "	pointer
,	O
lt	array
[	O
j	int
]	O
[	O
i	char
]	O
)	O
;	O
}	O
printf	function
(	O
"\n"	pointer
)	O
;	O
}	O
}	O
void	O
set_line_attr_defaults	function
(	O
void	O
)	O
{	O
PlotCmd_to_tmpfile	function
(	O
DEF_LA	int
)	O
;	O
Line_Attr_to_tmpfile	function
(	O
LineAttrEnd	int
,	O
LAE_butt	int
)	O
;	O
PlotCmd_to_tmpfile	function
(	O
DEF_LA	int
)	O
;	O
Line_Attr_to_tmpfile	function
(	O
LineAttrJoin	int
,	O
LAJ_plain_miter	int
)	O
;	O
PlotCmd_to_tmpfile	function
(	O
DEF_LA	int
)	O
;	O
Line_Attr_to_tmpfile	function
(	O
LineAttrLimit	int
,	O
5	int
)	O
;	O
}	O
void	O
set_line_attr	function
(	O
FILE	struct
*	O
hd	pointer
)	O
{	O
float	O
ftmp1	float
;	O
float	O
ftmp2	float
;	O
int	O
itmp	int
;	O
if	O
(	O
read_float	function
(	O
&	O
ftmp1	float
,	O
hd	pointer
)	O
)	O
{	O
set_line_attr_defaults	function
(	O
)	O
;	O
return	O
;	O
}	O
for	O
(	O
;	O
;	O
)	O
{	O
if	O
(	O
read_float	function
(	O
&	O
ftmp2	float
,	O
hd	pointer
)	O
)	O
{	O
return	O
;	O
}	O
itmp	int
=	O
(	O
int	O
)	O
ftmp2	float
;	O
PlotCmd_to_tmpfile	function
(	O
DEF_LA	int
)	O
;	O
switch	O
(	O
(	O
int	O
)	O
ftmp1	float
)	O
{	O
case	O
1	int
:	O
if	O
(	O
(	O
itmp	int
>=	O
LAE_butt	int
)	O
&&	O
(	O
itmp	int
<=	O
LAE_round	int
)	O
)	O
{	O
Line_Attr_to_tmpfile	function
(	O
LineAttrEnd	int
,	O
itmp	int
)	O
;	O
}	O
else	O
{	O
Line_Attr_to_tmpfile	function
(	O
LineAttrEnd	int
,	O
LAE_butt	int
)	O
;	O
}	O
break	O
;	O
case	O
2	int
:	O
if	O
(	O
(	O
itmp	int
>=	O
LAJ_plain_miter	int
)	O
&&	O
(	O
itmp	int
<=	O
LAJ_nojoin	int
)	O
)	O
{	O
Line_Attr_to_tmpfile	function
(	O
LineAttrJoin	int
,	O
itmp	int
)	O
;	O
}	O
else	O
{	O
Line_Attr_to_tmpfile	function
(	O
LineAttrJoin	int
,	O
LAJ_plain_miter	int
)	O
;	O
}	O
break	O
;	O
case	O
3	int
:	O
Line_Attr_to_tmpfile	function
(	O
LineAttrLimit	int
,	O
itmp	int
)	O
;	O
break	O
;	O
}	O
if	O
(	O
read_float	function
(	O
&	O
ftmp1	float
,	O
hd	pointer
)	O
)	O
{	O
return	O
;	O
}	O
}	O
return	O
;	O
}	O
void	O
Line_Attr_to_tmpfile	function
(	O
LineAttrKind	enum
kind	enum
,	O
int	O
value	int
)	O
{	O
LineAttrKind	enum
tk	enum
=	O
kind	enum
;	O
LineEnds	enum
tv	enum
=	O
value	int
;	O
if	O
(	O
record_off	short
)	O
return	O
;	O
if	O
(	O
kind	enum
==	O
LineAttrEnd	int
)	O
CurrentLineEnd	enum
=	O
value	int
;	O
if	O
(	O
fwrite	function
(	O
&	O
tk	enum
,	O
sizeof	O
(	O
tk	enum
)	O
,	O
1	int
,	O
td	pointer
)	O
!=	O
1	int
)	O
{	O
PError	function
(	O
"Line_Attr_to_tmpfile - kind"	pointer
)	O
;	O
Eprintf	function
(	O
"Error @ Cmd %ld\n"	pointer
,	O
vec_cntr_w	long
)	O
;	O
exit	function
(	O
ERROR	O
)	O
;	O
}	O
if	O
(	O
fwrite	function
(	O
&	O
tv	enum
,	O
sizeof	O
(	O
tv	enum
)	O
,	O
1	int
,	O
td	pointer
)	O
!=	O
1	int
)	O
{	O
PError	function
(	O
"Line_Attr_to_tmpfile - value"	pointer
)	O
;	O
Eprintf	function
(	O
"Error @ Cmd %ld\n"	pointer
,	O
vec_cntr_w	long
)	O
;	O
exit	function
(	O
ERROR	O
)	O
;	O
}	O
return	O
;	O
}	O
int	O
load_line_attr	function
(	O
FILE	struct
*	O
td	pointer
)	O
{	O
LineAttrKind	enum
kind	enum
;	O
int	O
value	int
;	O
static	O
int	O
FoundJoin	int
=	O
0	int
;	O
static	O
int	O
FoundLimit	int
=	O
0	int
;	O
if	O
(	O
fread	function
(	O
(	O
void	O
*	O
)	O
&	O
kind	enum
,	O
sizeof	O
(	O
kind	enum
)	O
,	O
1	int
,	O
td	pointer
)	O
!=	O
1	int
)	O
{	O
return	O
(	O
-	O
1	int
)	O
;	O
}	O
if	O
(	O
fread	function
(	O
(	O
void	O
*	O
)	O
&	O
value	int
,	O
sizeof	O
(	O
value	int
)	O
,	O
1	int
,	O
td	pointer
)	O
!=	O
1	int
)	O
{	O
return	O
(	O
-	O
1	int
)	O
;	O
}	O
switch	O
(	O
kind	enum
)	O
{	O
case	O
LineAttrEnd	int
:	O
CurrentLineAttr	struct
.	O
End	enum
=	O
value	int
;	O
break	O
;	O
case	O
LineAttrJoin	int
:	O
if	O
(	O
!	O
FoundJoin	int
)	O
{	O
if	O
(	O
!	O
silent_mode	short
)	O
fprintf	function
(	O
stderr	pointer
,	O
"\nLA - Joins not supported\n"	pointer
)	O
;	O
FoundJoin	int
=	O
1	int
;	O
}	O
CurrentLineAttr	struct
.	O
Join	enum
=	O
value	int
;	O
case	O
LineAttrLimit	int
:	O
if	O
(	O
!	O
FoundLimit	int
)	O
{	O
if	O
(	O
!	O
silent_mode	short
)	O
fprintf	function
(	O
stderr	pointer
,	O
"\nLA - Limit not supported\n"	pointer
)	O
;	O
FoundLimit	int
=	O
1	int
;	O
}	O
CurrentLineAttr	struct
.	O
Limit	int
=	O
value	int
;	O
break	O
;	O
}	O
return	O
(	O
0	int
)	O
;	O
}	O
