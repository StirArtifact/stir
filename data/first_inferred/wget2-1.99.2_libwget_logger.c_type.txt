static	O
void	O
WGET_GCC_PRINTF_FORMAT	O
(	O
2	int
,	O
0	int
)	O
WGET_GCC_NONNULL	O
(	O
(	O
1	int
,	O
2	int
)	O
)	O
_logger_vprintf_func	function
(	O
const	O
wget_logger	struct
*	O
logger	pointer
,	O
const	O
char	O
*	O
fmt	pointer
,	O
va_list	array
args	array
)	O
{	O
char	O
sbuf	array
[	O
4096	int
]	O
;	O
wget_buffer	struct
buf	pointer
;	O
int	O
err	enum
=	O
errno	O
;	O
wget_buffer_init	function
(	O
&	O
buf	pointer
,	O
sbuf	array
,	O
sizeof	O
(	O
sbuf	array
)	O
)	O
;	O
wget_buffer_vprintf	function
(	O
&	O
buf	pointer
,	O
fmt	pointer
,	O
args	array
)	O
;	O
logger	pointer
->	O
func	pointer
(	O
buf	pointer
.	O
data	pointer
,	O
buf	pointer
.	O
length	long
)	O
;	O
wget_buffer_deinit	function
(	O
&	O
buf	pointer
)	O
;	O
errno	O
=	O
err	enum
;	O
}	O
static	O
void	O
_logger_write_func	function
(	O
const	O
wget_logger	struct
*	O
logger	pointer
,	O
const	O
char	O
*	O
buf	pointer
,	O
size_t	long
len	long
)	O
{	O
logger	pointer
->	O
func	pointer
(	O
buf	pointer
,	O
len	long
)	O
;	O
}	O
static	O
void	O
WGET_GCC_PRINTF_FORMAT	O
(	O
2	int
,	O
0	int
)	O
WGET_GCC_NONNULL	O
(	O
(	O
1	int
,	O
2	int
)	O
)	O
_logger_vfprintf	function
(	O
FILE	struct
*	O
fp	pointer
,	O
const	O
char	O
*	O
fmt	pointer
,	O
va_list	array
args	array
)	O
{	O
char	O
sbuf	array
[	O
4096	int
]	O
;	O
wget_buffer	struct
buf	pointer
;	O
int	O
err	enum
=	O
errno	O
;	O
wget_buffer_init	function
(	O
&	O
buf	pointer
,	O
sbuf	array
,	O
sizeof	O
(	O
sbuf	array
)	O
)	O
;	O
wget_buffer_vprintf	function
(	O
&	O
buf	pointer
,	O
fmt	pointer
,	O
args	array
)	O
;	O
fwrite	function
(	O
buf	pointer
.	O
data	pointer
,	O
1	int
,	O
buf	pointer
.	O
length	long
,	O
fp	pointer
)	O
;	O
wget_buffer_deinit	function
(	O
&	O
buf	pointer
)	O
;	O
errno	O
=	O
err	enum
;	O
}	O
static	O
void	O
WGET_GCC_PRINTF_FORMAT	O
(	O
2	int
,	O
0	int
)	O
WGET_GCC_NONNULL	O
(	O
(	O
1	int
,	O
2	int
)	O
)	O
_logger_vprintf_file	function
(	O
const	O
wget_logger	struct
*	O
logger	pointer
,	O
const	O
char	O
*	O
fmt	pointer
,	O
va_list	array
args	array
)	O
{	O
_logger_vfprintf	function
(	O
logger	pointer
->	O
fp	pointer
,	O
fmt	pointer
,	O
args	array
)	O
;	O
}	O
static	O
void	O
_logger_write_file	function
(	O
const	O
wget_logger	struct
*	O
logger	pointer
,	O
const	O
char	O
*	O
buf	pointer
,	O
size_t	long
len	long
)	O
{	O
fwrite	function
(	O
buf	pointer
,	O
1	int
,	O
len	long
,	O
logger	pointer
->	O
fp	pointer
)	O
;	O
}	O
static	O
void	O
WGET_GCC_PRINTF_FORMAT	O
(	O
2	int
,	O
0	int
)	O
WGET_GCC_NONNULL	O
(	O
(	O
1	int
,	O
2	int
)	O
)	O
_logger_vprintf_fname	function
(	O
const	O
wget_logger	struct
*	O
logger	pointer
,	O
const	O
char	O
*	O
fmt	pointer
,	O
va_list	array
args	array
)	O
{	O
FILE	struct
*	O
fp	pointer
=	O
fopen	function
(	O
logger	pointer
->	O
fname	pointer
,	O
"a"	pointer
)	O
;	O
if	O
(	O
fp	pointer
)	O
{	O
_logger_vfprintf	function
(	O
fp	pointer
,	O
fmt	pointer
,	O
args	array
)	O
;	O
fclose	function
(	O
fp	pointer
)	O
;	O
}	O
}	O
static	O
void	O
_logger_write_fname	function
(	O
const	O
wget_logger	struct
*	O
logger	pointer
,	O
const	O
char	O
*	O
buf	pointer
,	O
size_t	long
len	long
)	O
{	O
FILE	struct
*	O
fp	pointer
=	O
fopen	function
(	O
logger	pointer
->	O
fname	pointer
,	O
"a"	pointer
)	O
;	O
if	O
(	O
fp	pointer
)	O
{	O
fwrite	function
(	O
buf	pointer
,	O
1	int
,	O
len	long
,	O
fp	pointer
)	O
;	O
fclose	function
(	O
fp	pointer
)	O
;	O
}	O
}	O
void	O
wget_logger_set_func	function
(	O
wget_logger	struct
*	O
logger	pointer
,	O
wget_logger_func	function
*	O
func	pointer
)	O
{	O
if	O
(	O
logger	pointer
)	O
{	O
logger	pointer
->	O
func	pointer
=	O
func	pointer
;	O
logger	pointer
->	O
vprintf	function
=	O
func	pointer
?	O
_logger_vprintf_func	function
:	O
NULL	O
;	O
logger	pointer
->	O
write	pointer
=	O
func	pointer
?	O
_logger_write_func	function
:	O
NULL	O
;	O
}	O
}	O
wget_logger_func	function
*	O
wget_logger_get_func	function
(	O
wget_logger	struct
*	O
logger	pointer
)	O
{	O
return	O
logger	pointer
?	O
logger	pointer
->	O
func	pointer
:	O
NULL	O
;	O
}	O
void	O
wget_logger_set_stream	function
(	O
wget_logger	struct
*	O
logger	pointer
,	O
FILE	struct
*	O
fp	pointer
)	O
{	O
if	O
(	O
logger	pointer
)	O
{	O
logger	pointer
->	O
fp	pointer
=	O
fp	pointer
;	O
logger	pointer
->	O
vprintf	function
=	O
fp	pointer
?	O
_logger_vprintf_file	function
:	O
NULL	O
;	O
logger	pointer
->	O
write	pointer
=	O
fp	pointer
?	O
_logger_write_file	function
:	O
NULL	O
;	O
}	O
}	O
FILE	struct
*	O
wget_logger_get_stream	function
(	O
wget_logger	struct
*	O
logger	pointer
)	O
{	O
return	O
logger	pointer
?	O
logger	pointer
->	O
fp	pointer
:	O
NULL	O
;	O
}	O
void	O
wget_logger_set_file	function
(	O
wget_logger	struct
*	O
logger	pointer
,	O
const	O
char	O
*	O
fname	pointer
)	O
{	O
if	O
(	O
logger	pointer
)	O
{	O
logger	pointer
->	O
fname	pointer
=	O
fname	pointer
;	O
logger	pointer
->	O
vprintf	function
=	O
fname	pointer
?	O
_logger_vprintf_fname	function
:	O
NULL	O
;	O
logger	pointer
->	O
write	pointer
=	O
fname	pointer
?	O
_logger_write_fname	function
:	O
NULL	O
;	O
}	O
}	O
const	O
char	O
*	O
wget_logger_get_file	function
(	O
wget_logger	struct
*	O
logger	pointer
)	O
{	O
return	O
logger	pointer
?	O
logger	pointer
->	O
fname	pointer
:	O
NULL	O
;	O
}	O
bool	bool
wget_logger_is_active	function
(	O
wget_logger	struct
*	O
logger	pointer
)	O
{	O
return	O
!	O
!	O
logger	pointer
->	O
vprintf	function
;	O
}	O
