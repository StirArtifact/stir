int	O
ISO_8601_weekdays	function
(	O
int	O
yday	int
,	O
int	O
wday	int
)	O
{	O
return	O
(	O
yday	int
-	O
(	O
yday	int
-	O
wday	int
+	O
ISO_8601_MAX_WDAY	int
+	O
ISO_8601_OFF	O
)	O
%	O
7	int
+	O
ISO_8601_MAX_WDAY	int
-	O
ISO_8601_START_WDAY	int
)	O
;	O
}	O
int	O
mu_c_streamftime	function
(	O
mu_stream_t	pointer
str	pointer
,	O
const	O
char	O
*	O
fmt	pointer
,	O
struct	O
tm	struct
*	O
input_tm	pointer
,	O
struct	O
mu_timezone	struct
*	O
tz	pointer
)	O
{	O
int	O
rc	int
=	O
0	int
;	O
struct	O
tm	struct
tm	struct
;	O
tm	struct
=	O
*	O
input_tm	pointer
;	O
while	O
(	O
*	O
fmt	pointer
&&	O
rc	int
==	O
0	int
)	O
{	O
size_t	long
len	int
=	O
strcspn	function
(	O
fmt	pointer
,	O
"%"	pointer
)	O
;	O
if	O
(	O
len	int
)	O
{	O
rc	int
=	O
mu_stream_write	function
(	O
str	pointer
,	O
fmt	pointer
,	O
len	int
,	O
NULL	O
)	O
;	O
if	O
(	O
rc	int
)	O
break	O
;	O
}	O
fmt	pointer
+=	O
len	int
;	O
restart	O
:	O
if	O
(	O
!	O
*	O
fmt	pointer
||	O
!	O
*	O
++	O
fmt	pointer
)	O
break	O
;	O
switch	O
(	O
*	O
fmt	pointer
)	O
{	O
case	O
'a'	O
:	O
if	O
(	O
tm	struct
.	O
tm_wday	int
<	O
0	int
||	O
tm	struct
.	O
tm_wday	int
>	O
6	int
)	O
rc	int
=	O
ERANGE	int
;	O
else	O
rc	int
=	O
mu_stream_write	function
(	O
str	pointer
,	O
_mu_datetime_short_wday	array
[	O
tm	struct
.	O
tm_wday	int
]	O
,	O
strlen	function
(	O
_mu_datetime_short_wday	array
[	O
tm	struct
.	O
tm_wday	int
]	O
)	O
,	O
NULL	O
)	O
;	O
break	O
;	O
case	O
'A'	O
:	O
if	O
(	O
tm	struct
.	O
tm_wday	int
<	O
0	int
||	O
tm	struct
.	O
tm_wday	int
>	O
6	int
)	O
rc	int
=	O
ERANGE	int
;	O
else	O
rc	int
=	O
mu_stream_write	function
(	O
str	pointer
,	O
_mu_datetime_full_wday	array
[	O
tm	struct
.	O
tm_wday	int
]	O
,	O
strlen	function
(	O
_mu_datetime_full_wday	array
[	O
tm	struct
.	O
tm_wday	int
]	O
)	O
,	O
NULL	O
)	O
;	O
break	O
;	O
case	O
'b'	O
:	O
case	O
'h'	O
:	O
if	O
(	O
tm	struct
.	O
tm_mon	int
<	O
0	int
||	O
tm	struct
.	O
tm_mon	int
>	O
11	int
)	O
rc	int
=	O
ERANGE	int
;	O
else	O
rc	int
=	O
mu_stream_write	function
(	O
str	pointer
,	O
_mu_datetime_short_month	array
[	O
tm	struct
.	O
tm_mon	int
]	O
,	O
strlen	function
(	O
_mu_datetime_short_month	array
[	O
tm	struct
.	O
tm_mon	int
]	O
)	O
,	O
NULL	O
)	O
;	O
break	O
;	O
case	O
'B'	O
:	O
if	O
(	O
tm	struct
.	O
tm_mon	int
<	O
0	int
||	O
tm	struct
.	O
tm_mon	int
>	O
11	int
)	O
rc	int
=	O
ERANGE	int
;	O
else	O
rc	int
=	O
mu_stream_write	function
(	O
str	pointer
,	O
_mu_datetime_full_month	array
[	O
tm	struct
.	O
tm_mon	int
]	O
,	O
strlen	function
(	O
_mu_datetime_full_month	array
[	O
tm	struct
.	O
tm_mon	int
]	O
)	O
,	O
NULL	O
)	O
;	O
break	O
;	O
case	O
'c'	O
:	O
rc	int
=	O
mu_c_streamftime	function
(	O
str	pointer
,	O
"%a %b %e %H:%M:%S %Y"	pointer
,	O
&	O
tm	struct
,	O
tz	pointer
)	O
;	O
break	O
;	O
case	O
'C'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%02d"	pointer
,	O
(	O
tm	struct
.	O
tm_year	int
+	O
1900	int
)	O
/	O
100	int
)	O
;	O
break	O
;	O
case	O
'd'	O
:	O
if	O
(	O
tm	struct
.	O
tm_mday	int
<	O
1	int
||	O
tm	struct
.	O
tm_mday	int
>	O
31	int
)	O
rc	int
=	O
ERANGE	int
;	O
else	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%02d"	pointer
,	O
tm	struct
.	O
tm_mday	int
)	O
;	O
break	O
;	O
case	O
'D'	O
:	O
rc	int
=	O
mu_c_streamftime	function
(	O
str	pointer
,	O
"%m/%d/%y"	pointer
,	O
&	O
tm	struct
,	O
tz	pointer
)	O
;	O
break	O
;	O
case	O
'e'	O
:	O
if	O
(	O
tm	struct
.	O
tm_mday	int
<	O
1	int
||	O
tm	struct
.	O
tm_mday	int
>	O
31	int
)	O
rc	int
=	O
ERANGE	int
;	O
else	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%2d"	pointer
,	O
tm	struct
.	O
tm_mday	int
)	O
;	O
break	O
;	O
case	O
'E'	O
:	O
goto	O
restart	O
;	O
case	O
'F'	O
:	O
rc	int
=	O
mu_c_streamftime	function
(	O
str	pointer
,	O
"%Y-%m-%d"	pointer
,	O
&	O
tm	struct
,	O
tz	pointer
)	O
;	O
break	O
;	O
case	O
'V'	O
:	O
case	O
'G'	O
:	O
case	O
'g'	O
:	O
{	O
int	O
year	int
=	O
tm	struct
.	O
tm_year	int
+	O
1900	int
;	O
int	O
days	int
=	O
ISO_8601_weekdays	function
(	O
tm	struct
.	O
tm_yday	int
,	O
tm	struct
.	O
tm_wday	int
)	O
;	O
if	O
(	O
days	int
<	O
0	int
)	O
{	O
days	int
=	O
ISO_8601_weekdays	function
(	O
tm	struct
.	O
tm_yday	int
+	O
mu_datetime_year_days	function
(	O
year	int
-	O
1	int
)	O
,	O
tm	struct
.	O
tm_wday	int
)	O
;	O
year	int
--	O
;	O
}	O
else	O
{	O
int	O
d	int
=	O
ISO_8601_weekdays	function
(	O
tm	struct
.	O
tm_yday	int
-	O
mu_datetime_year_days	function
(	O
year	int
)	O
,	O
tm	struct
.	O
tm_wday	int
)	O
;	O
if	O
(	O
d	int
>=	O
0	int
)	O
{	O
year	int
++	O
;	O
days	int
=	O
d	int
;	O
}	O
}	O
switch	O
(	O
*	O
fmt	pointer
)	O
{	O
case	O
'V'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%02d"	pointer
,	O
days	int
/	O
7	int
+	O
1	int
)	O
;	O
break	O
;	O
case	O
'G'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%4d"	pointer
,	O
year	int
)	O
;	O
break	O
;	O
case	O
'g'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%02d"	pointer
,	O
year	int
%	O
100	int
)	O
;	O
}	O
}	O
break	O
;	O
case	O
'H'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%02d"	pointer
,	O
tm	struct
.	O
tm_hour	int
)	O
;	O
break	O
;	O
case	O
'I'	O
:	O
{	O
unsigned	O
n	int
=	O
tm	struct
.	O
tm_hour	int
%	O
12	int
;	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%02d"	pointer
,	O
n	int
==	O
0	int
?	O
12	int
:	O
n	int
)	O
;	O
}	O
break	O
;	O
case	O
'j'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%03d"	pointer
,	O
tm	struct
.	O
tm_yday	int
+	O
1	int
)	O
;	O
break	O
;	O
case	O
'k'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%2d"	pointer
,	O
tm	struct
.	O
tm_hour	int
)	O
;	O
break	O
;	O
case	O
'l'	O
:	O
{	O
unsigned	O
n	int
=	O
tm	struct
.	O
tm_hour	int
%	O
12	int
;	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%2d"	pointer
,	O
n	int
==	O
0	int
?	O
12	int
:	O
n	int
)	O
;	O
}	O
break	O
;	O
case	O
'm'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%02d"	pointer
,	O
tm	struct
.	O
tm_mon	int
+	O
1	int
)	O
;	O
break	O
;	O
case	O
'M'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%02d"	pointer
,	O
tm	struct
.	O
tm_min	int
)	O
;	O
break	O
;	O
case	O
'n'	O
:	O
rc	int
=	O
mu_stream_write	function
(	O
str	pointer
,	O
"\n"	pointer
,	O
1	int
,	O
NULL	O
)	O
;	O
break	O
;	O
case	O
'O'	O
:	O
goto	O
restart	O
;	O
case	O
'p'	O
:	O
rc	int
=	O
mu_stream_write	function
(	O
str	pointer
,	O
tm	struct
.	O
tm_hour	int
<	O
12	int
?	O
"AM"	pointer
:	O
"PM"	pointer
,	O
2	int
,	O
NULL	O
)	O
;	O
break	O
;	O
case	O
'P'	O
:	O
rc	int
=	O
mu_stream_write	function
(	O
str	pointer
,	O
tm	struct
.	O
tm_hour	int
<	O
12	int
?	O
"am"	pointer
:	O
"pm"	pointer
,	O
2	int
,	O
NULL	O
)	O
;	O
break	O
;	O
case	O
'r'	O
:	O
rc	int
=	O
mu_c_streamftime	function
(	O
str	pointer
,	O
"%I:%M:%S %p"	pointer
,	O
&	O
tm	struct
,	O
tz	pointer
)	O
;	O
break	O
;	O
case	O
'R'	O
:	O
rc	int
=	O
mu_c_streamftime	function
(	O
str	pointer
,	O
"%H:%M"	pointer
,	O
&	O
tm	struct
,	O
tz	pointer
)	O
;	O
break	O
;	O
case	O
's'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%lu"	pointer
,	O
(	O
unsigned	O
long	O
)	O
mu_datetime_to_utc	function
(	O
&	O
tm	struct
,	O
tz	pointer
)	O
)	O
;	O
break	O
;	O
case	O
'S'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%02d"	pointer
,	O
tm	struct
.	O
tm_sec	int
)	O
;	O
break	O
;	O
case	O
't'	O
:	O
rc	int
=	O
mu_stream_write	function
(	O
str	pointer
,	O
"\t"	pointer
,	O
1	int
,	O
NULL	O
)	O
;	O
break	O
;	O
case	O
'T'	O
:	O
rc	int
=	O
mu_c_streamftime	function
(	O
str	pointer
,	O
"%H:%M:%S"	pointer
,	O
&	O
tm	struct
,	O
tz	pointer
)	O
;	O
break	O
;	O
case	O
'u'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%1d"	pointer
,	O
tm	struct
.	O
tm_wday	int
==	O
0	int
?	O
7	int
:	O
tm	struct
.	O
tm_wday	int
)	O
;	O
break	O
;	O
case	O
'U'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%02d"	pointer
,	O
(	O
tm	struct
.	O
tm_yday	int
-	O
tm	struct
.	O
tm_wday	int
+	O
7	int
)	O
/	O
7	int
)	O
;	O
break	O
;	O
case	O
'w'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%01d"	pointer
,	O
tm	struct
.	O
tm_wday	int
)	O
;	O
break	O
;	O
case	O
'W'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%02d"	pointer
,	O
(	O
tm	struct
.	O
tm_yday	int
-	O
(	O
tm	struct
.	O
tm_wday	int
-	O
1	int
+	O
7	int
)	O
%	O
7	int
+	O
7	int
)	O
/	O
7	int
)	O
;	O
break	O
;	O
case	O
'x'	O
:	O
rc	int
=	O
mu_c_streamftime	function
(	O
str	pointer
,	O
"%m/%d/%y"	pointer
,	O
&	O
tm	struct
,	O
tz	pointer
)	O
;	O
break	O
;	O
case	O
'X'	O
:	O
rc	int
=	O
mu_c_streamftime	function
(	O
str	pointer
,	O
"%H:%M:%S"	pointer
,	O
&	O
tm	struct
,	O
tz	pointer
)	O
;	O
break	O
;	O
case	O
'y'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%02d"	pointer
,	O
(	O
tm	struct
.	O
tm_year	int
+	O
1900	int
)	O
%	O
100	int
)	O
;	O
break	O
;	O
case	O
'Y'	O
:	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%d"	pointer
,	O
tm	struct
.	O
tm_year	int
+	O
1900	int
)	O
;	O
break	O
;	O
case	O
'Z'	O
:	O
if	O
(	O
tz	pointer
&&	O
tz	pointer
->	O
tz_name	pointer
)	O
{	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%s"	pointer
,	O
tz	pointer
->	O
tz_name	pointer
)	O
;	O
break	O
;	O
}	O
case	O
'z'	O
:	O
{	O
int	O
utc_off	int
=	O
tz	pointer
?	O
tz	pointer
->	O
utc_offset	int
:	O
mu_utc_offset	function
(	O
)	O
;	O
int	O
sign	int
;	O
if	O
(	O
utc_off	int
<	O
0	int
)	O
{	O
sign	int
=	O
'-'	O
;	O
utc_off	int
=	O
-	O
utc_off	int
;	O
}	O
else	O
sign	int
=	O
'+'	O
;	O
utc_off	int
/=	O
60	int
;	O
rc	int
=	O
mu_stream_printf	function
(	O
str	pointer
,	O
"%c%02u%02u"	pointer
,	O
sign	int
,	O
utc_off	int
/	O
60	int
,	O
utc_off	int
%	O
60	int
)	O
;	O
}	O
break	O
;	O
case	O
'%'	O
:	O
rc	int
=	O
mu_stream_write	function
(	O
str	pointer
,	O
"%"	pointer
,	O
1	int
,	O
NULL	O
)	O
;	O
break	O
;	O
case	O
'$'	O
:	O
break	O
;	O
case	O
'+'	O
:	O
default	O
:	O
rc	int
=	O
mu_stream_write	function
(	O
str	pointer
,	O
fmt	pointer
-	O
1	int
,	O
2	int
,	O
NULL	O
)	O
;	O
break	O
;	O
}	O
fmt	pointer
++	O
;	O
}	O
*	O
input_tm	pointer
=	O
tm	struct
;	O
return	O
rc	int
;	O
}	O
