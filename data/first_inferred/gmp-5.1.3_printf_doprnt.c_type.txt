int	O
__gmp_doprnt	function
(	O
const	O
struct	O
doprnt_funs_t	struct
*	O
funs	pointer
,	O
void	O
*	O
data	pointer
,	O
const	O
char	O
*	O
orig_fmt	pointer
,	O
va_list	array
orig_ap	array
)	O
{	O
va_list	array
ap	pointer
,	O
this_ap	array
,	O
last_ap	array
;	O
size_t	long
alloc_fmt_size	long
;	O
char	O
*	O
fmt	pointer
,	O
*	O
alloc_fmt	pointer
,	O
*	O
last_fmt	pointer
,	O
*	O
this_fmt	pointer
,	O
*	O
gmp_str	pointer
;	O
int	O
retval	int
=	O
0	int
;	O
int	O
type	int
,	O
fchar	int
,	O
*	O
value	pointer
,	O
seen_precision	int
;	O
struct	O
doprnt_params_t	struct
param	struct
;	O
TRACE	O
(	O
printf	function
(	O
"gmp_doprnt \"%s\"\n"	pointer
,	O
orig_fmt	pointer
)	O
)	O
;	O
va_copy	O
(	O
ap	pointer
,	O
orig_ap	array
)	O
;	O
alloc_fmt_size	long
=	O
strlen	function
(	O
orig_fmt	pointer
)	O
+	O
1	int
;	O
alloc_fmt	pointer
=	O
__GMP_ALLOCATE_FUNC_TYPE	O
(	O
alloc_fmt_size	long
,	O
char	O
)	O
;	O
fmt	pointer
=	O
alloc_fmt	pointer
;	O
strcpy	function
(	O
fmt	pointer
,	O
orig_fmt	pointer
)	O
;	O
last_fmt	pointer
=	O
fmt	pointer
;	O
va_copy	O
(	O
last_ap	array
,	O
ap	pointer
)	O
;	O
for	O
(	O
;	O
;	O
)	O
{	O
TRACE	O
(	O
printf	function
(	O
"next: \"%s\"\n"	pointer
,	O
fmt	pointer
)	O
)	O
;	O
fmt	pointer
=	O
strchr	function
(	O
fmt	pointer
,	O
'%'	O
)	O
;	O
if	O
(	O
fmt	pointer
==	O
NULL	O
)	O
break	O
;	O
this_fmt	pointer
=	O
fmt	pointer
;	O
va_copy	O
(	O
this_ap	array
,	O
ap	pointer
)	O
;	O
fmt	pointer
++	O
;	O
TRACE	O
(	O
printf	function
(	O
"considering\n"	pointer
)	O
;	O
printf	function
(	O
"  last: \"%s\"\n"	pointer
,	O
last_fmt	pointer
)	O
;	O
printf	function
(	O
"  this: \"%s\"\n"	pointer
,	O
this_fmt	pointer
)	O
)	O
;	O
type	int
=	O
'\0'	O
;	O
value	pointer
=	O
&	O
param	struct
.	O
width	int
;	O
param	struct
.	O
base	int
=	O
10	int
;	O
param	struct
.	O
conv	int
=	O
0	int
;	O
param	struct
.	O
expfmt	pointer
=	O
"e%c%02ld"	pointer
;	O
param	struct
.	O
exptimes4	int
=	O
0	int
;	O
param	struct
.	O
fill	char
=	O
' '	O
;	O
param	struct
.	O
justify	int
=	O
DOPRNT_JUSTIFY_RIGHT	int
;	O
param	struct
.	O
prec	int
=	O
6	int
;	O
param	struct
.	O
showbase	int
=	O
DOPRNT_SHOWBASE_NO	int
;	O
param	struct
.	O
showpoint	int
=	O
0	int
;	O
param	struct
.	O
showtrailing	int
=	O
1	int
;	O
param	struct
.	O
sign	char
=	O
'\0'	O
;	O
param	struct
.	O
width	int
=	O
0	int
;	O
seen_precision	int
=	O
0	int
;	O
for	O
(	O
;	O
;	O
)	O
{	O
fchar	int
=	O
*	O
fmt	pointer
++	O
;	O
if	O
(	O
fchar	int
==	O
'\0'	O
)	O
break	O
;	O
switch	O
(	O
fchar	int
)	O
{	O
case	O
'a'	O
:	O
param	struct
.	O
base	int
=	O
16	int
;	O
param	struct
.	O
expfmt	pointer
=	O
"p%c%ld"	pointer
;	O
goto	O
conv_a	O
;	O
case	O
'A'	O
:	O
param	struct
.	O
base	int
=	O
-	O
16	int
;	O
param	struct
.	O
expfmt	pointer
=	O
"P%c%ld"	pointer
;	O
conv_a	O
:	O
param	struct
.	O
conv	int
=	O
DOPRNT_CONV_SCIENTIFIC	int
;	O
param	struct
.	O
exptimes4	int
=	O
1	int
;	O
if	O
(	O
!	O
seen_precision	int
)	O
param	struct
.	O
prec	int
=	O
-	O
1	int
;	O
param	struct
.	O
showbase	int
=	O
DOPRNT_SHOWBASE_YES	int
;	O
param	struct
.	O
showtrailing	int
=	O
1	int
;	O
goto	O
floating_a	O
;	O
case	O
'c'	O
:	O
(	O
void	O
)	O
va_arg	O
(	O
ap	pointer
,	O
int	O
)	O
;	O
goto	O
next	pointer
;	O
case	O
'd'	O
:	O
case	O
'i'	O
:	O
case	O
'u'	O
:	O
integer	O
:	O
TRACE	O
(	O
printf	function
(	O
"integer, base=%d\n"	pointer
,	O
param	struct
.	O
base	int
)	O
)	O
;	O
if	O
(	O
!	O
seen_precision	int
)	O
param	struct
.	O
prec	int
=	O
-	O
1	int
;	O
switch	O
(	O
type	int
)	O
{	O
case	O
'j'	O
:	O
(	O
void	O
)	O
va_arg	O
(	O
ap	pointer
,	O
intmax_t	long
)	O
;	O
break	O
;	O
case	O
'l'	O
:	O
(	O
void	O
)	O
va_arg	O
(	O
ap	pointer
,	O
long	O
)	O
;	O
break	O
;	O
case	O
'L'	O
:	O
(	O
void	O
)	O
va_arg	O
(	O
ap	pointer
,	O
long	O
long	O
)	O
;	O
break	O
;	O
case	O
'N'	O
:	O
{	O
mp_ptr	pointer
xp	pointer
;	O
mp_size_t	long
xsize	long
,	O
abs_xsize	long
;	O
mpz_t	array
z	array
;	O
FLUSH	O
(	O
)	O
;	O
xp	pointer
=	O
va_arg	O
(	O
ap	pointer
,	O
mp_ptr	pointer
)	O
;	O
PTR	O
(	O
z	array
)	O
=	O
xp	pointer
;	O
xsize	long
=	O
(	O
int	O
)	O
va_arg	O
(	O
ap	pointer
,	O
mp_size_t	long
)	O
;	O
abs_xsize	long
=	O
ABS	O
(	O
xsize	long
)	O
;	O
MPN_NORMALIZE	O
(	O
xp	pointer
,	O
abs_xsize	long
)	O
;	O
SIZ	O
(	O
z	array
)	O
=	O
(	O
xsize	long
>=	O
0	int
?	O
abs_xsize	long
:	O
-	O
abs_xsize	long
)	O
;	O
ASSERT_CODE	O
(	O
ALLOC	O
(	O
z	array
)	O
=	O
abs_xsize	long
)	O
;	O
gmp_str	pointer
=	O
mpz_get_str	O
(	O
NULL	O
,	O
param	struct
.	O
base	int
,	O
z	array
)	O
;	O
goto	O
gmp_integer	O
;	O
}	O
case	O
'q'	O
:	O
(	O
void	O
)	O
va_arg	O
(	O
ap	pointer
,	O
quad_t	long
)	O
;	O
break	O
;	O
case	O
'Q'	O
:	O
FLUSH	O
(	O
)	O
;	O
gmp_str	pointer
=	O
mpq_get_str	O
(	O
NULL	O
,	O
param	struct
.	O
base	int
,	O
va_arg	O
(	O
ap	pointer
,	O
mpq_srcptr	pointer
)	O
)	O
;	O
goto	O
gmp_integer	O
;	O
case	O
't'	O
:	O
(	O
void	O
)	O
va_arg	O
(	O
ap	pointer
,	O
ptrdiff_t	long
)	O
;	O
break	O
;	O
case	O
'z'	O
:	O
(	O
void	O
)	O
va_arg	O
(	O
ap	pointer
,	O
size_t	long
)	O
;	O
break	O
;	O
case	O
'Z'	O
:	O
{	O
int	O
ret	int
;	O
FLUSH	O
(	O
)	O
;	O
gmp_str	pointer
=	O
mpz_get_str	O
(	O
NULL	O
,	O
param	struct
.	O
base	int
,	O
va_arg	O
(	O
ap	pointer
,	O
mpz_srcptr	pointer
)	O
)	O
;	O
gmp_integer	O
:	O
ret	int
=	O
__gmp_doprnt_integer	function
(	O
funs	pointer
,	O
data	pointer
,	O
&	O
param	struct
,	O
gmp_str	pointer
)	O
;	O
(	O
*	O
__gmp_free_func	pointer
)	O
(	O
gmp_str	pointer
,	O
strlen	function
(	O
gmp_str	pointer
)	O
+	O
1	int
)	O
;	O
DOPRNT_ACCUMULATE	O
(	O
ret	int
)	O
;	O
va_copy	O
(	O
last_ap	array
,	O
ap	pointer
)	O
;	O
last_fmt	pointer
=	O
fmt	pointer
;	O
}	O
break	O
;	O
default	O
:	O
(	O
void	O
)	O
va_arg	O
(	O
ap	pointer
,	O
int	O
)	O
;	O
break	O
;	O
}	O
goto	O
next	pointer
;	O
case	O
'E'	O
:	O
param	struct
.	O
base	int
=	O
-	O
10	int
;	O
param	struct
.	O
expfmt	pointer
=	O
"E%c%02ld"	pointer
;	O
case	O
'e'	O
:	O
param	struct
.	O
conv	int
=	O
DOPRNT_CONV_SCIENTIFIC	int
;	O
floating	O
:	O
if	O
(	O
param	struct
.	O
showbase	int
==	O
DOPRNT_SHOWBASE_NONZERO	int
)	O
{	O
param	struct
.	O
showpoint	int
=	O
1	int
;	O
param	struct
.	O
showtrailing	int
=	O
1	int
;	O
}	O
floating_a	O
:	O
switch	O
(	O
type	int
)	O
{	O
case	O
'F'	O
:	O
FLUSH	O
(	O
)	O
;	O
DOPRNT_ACCUMULATE	O
(	O
__gmp_doprnt_mpf	O
(	O
funs	pointer
,	O
data	pointer
,	O
&	O
param	struct
,	O
GMP_DECIMAL_POINT	O
,	O
va_arg	O
(	O
ap	pointer
,	O
mpf_srcptr	pointer
)	O
)	O
)	O
;	O
va_copy	O
(	O
last_ap	array
,	O
ap	pointer
)	O
;	O
last_fmt	pointer
=	O
fmt	pointer
;	O
break	O
;	O
case	O
'L'	O
:	O
(	O
void	O
)	O
va_arg	O
(	O
ap	pointer
,	O
long	O
double	O
)	O
;	O
break	O
;	O
default	O
:	O
(	O
void	O
)	O
va_arg	O
(	O
ap	pointer
,	O
double	O
)	O
;	O
break	O
;	O
}	O
goto	O
next	pointer
;	O
case	O
'f'	O
:	O
param	struct
.	O
conv	int
=	O
DOPRNT_CONV_FIXED	int
;	O
goto	O
floating	O
;	O
case	O
'F'	O
:	O
case	O
'j'	O
:	O
case	O
'L'	O
:	O
case	O
'N'	O
:	O
case	O
'q'	O
:	O
case	O
'Q'	O
:	O
case	O
't'	O
:	O
case	O
'z'	O
:	O
case	O
'Z'	O
:	O
set_type	O
:	O
type	int
=	O
fchar	int
;	O
break	O
;	O
case	O
'G'	O
:	O
param	struct
.	O
base	int
=	O
-	O
10	int
;	O
param	struct
.	O
expfmt	pointer
=	O
"E%c%02ld"	pointer
;	O
case	O
'g'	O
:	O
param	struct
.	O
conv	int
=	O
DOPRNT_CONV_GENERAL	int
;	O
param	struct
.	O
showtrailing	int
=	O
0	int
;	O
goto	O
floating	O
;	O
case	O
'h'	O
:	O
if	O
(	O
type	int
!=	O
'h'	O
)	O
goto	O
set_type	O
;	O
type	int
=	O
'H'	O
;	O
break	O
;	O
case	O
'l'	O
:	O
if	O
(	O
type	int
!=	O
'l'	O
)	O
goto	O
set_type	O
;	O
type	int
=	O
'L'	O
;	O
break	O
;	O
case	O
'm'	O
:	O
goto	O
next	pointer
;	O
case	O
'M'	O
:	O
fmt	pointer
[	O
-	O
1	int
]	O
=	O
'l'	O
;	O
type	int
=	O
'l'	O
;	O
break	O
;	O
case	O
'n'	O
:	O
{	O
void	O
*	O
p	pointer
;	O
FLUSH	O
(	O
)	O
;	O
p	pointer
=	O
va_arg	O
(	O
ap	pointer
,	O
void	O
*	O
)	O
;	O
switch	O
(	O
type	int
)	O
{	O
case	O
'\0'	O
:	O
*	O
(	O
int	O
*	O
)	O
p	pointer
=	O
retval	int
;	O
break	O
;	O
case	O
'F'	O
:	O
mpf_set_si	O
(	O
(	O
mpf_ptr	pointer
)	O
p	pointer
,	O
(	O
long	O
)	O
retval	int
)	O
;	O
break	O
;	O
case	O
'H'	O
:	O
*	O
(	O
char	O
*	O
)	O
p	pointer
=	O
retval	int
;	O
break	O
;	O
case	O
'h'	O
:	O
*	O
(	O
short	O
*	O
)	O
p	pointer
=	O
retval	int
;	O
break	O
;	O
case	O
'j'	O
:	O
*	O
(	O
intmax_t	long
*	O
)	O
p	pointer
=	O
retval	int
;	O
break	O
;	O
case	O
'l'	O
:	O
*	O
(	O
long	O
*	O
)	O
p	pointer
=	O
retval	int
;	O
break	O
;	O
case	O
'q'	O
:	O
ASSERT_ALWAYS	O
(	O
sizeof	O
(	O
quad_t	long
)	O
==	O
sizeof	O
(	O
long	O
long	O
)	O
)	O
;	O
case	O
'L'	O
:	O
*	O
(	O
long	O
long	O
*	O
)	O
p	pointer
=	O
retval	int
;	O
break	O
;	O
case	O
'N'	O
:	O
{	O
mp_size_t	long
n	long
;	O
n	long
=	O
va_arg	O
(	O
ap	pointer
,	O
mp_size_t	long
)	O
;	O
n	long
=	O
ABS	O
(	O
n	long
)	O
;	O
if	O
(	O
n	long
!=	O
0	int
)	O
{	O
*	O
(	O
mp_ptr	pointer
)	O
p	pointer
=	O
retval	int
;	O
MPN_ZERO	O
(	O
(	O
mp_ptr	pointer
)	O
p	pointer
+	O
1	int
,	O
n	long
-	O
1	int
)	O
;	O
}	O
}	O
break	O
;	O
case	O
'Q'	O
:	O
mpq_set_si	O
(	O
(	O
mpq_ptr	pointer
)	O
p	pointer
,	O
(	O
long	O
)	O
retval	int
,	O
1L	int
)	O
;	O
break	O
;	O
case	O
't'	O
:	O
*	O
(	O
ptrdiff_t	long
*	O
)	O
p	pointer
=	O
retval	int
;	O
break	O
;	O
case	O
'z'	O
:	O
*	O
(	O
size_t	long
*	O
)	O
p	pointer
=	O
retval	int
;	O
break	O
;	O
case	O
'Z'	O
:	O
mpz_set_si	O
(	O
(	O
mpz_ptr	pointer
)	O
p	pointer
,	O
(	O
long	O
)	O
retval	int
)	O
;	O
break	O
;	O
}	O
}	O
va_copy	O
(	O
last_ap	array
,	O
ap	pointer
)	O
;	O
last_fmt	pointer
=	O
fmt	pointer
;	O
goto	O
next	pointer
;	O
case	O
'o'	O
:	O
param	struct
.	O
base	int
=	O
8	int
;	O
goto	O
integer	O
;	O
case	O
'p'	O
:	O
case	O
's'	O
:	O
(	O
void	O
)	O
va_arg	O
(	O
ap	pointer
,	O
const	O
void	O
*	O
)	O
;	O
goto	O
next	pointer
;	O
case	O
'x'	O
:	O
param	struct
.	O
base	int
=	O
16	int
;	O
goto	O
integer	O
;	O
case	O
'X'	O
:	O
param	struct
.	O
base	int
=	O
-	O
16	int
;	O
goto	O
integer	O
;	O
case	O
'%'	O
:	O
goto	O
next	pointer
;	O
case	O
'#'	O
:	O
param	struct
.	O
showbase	int
=	O
DOPRNT_SHOWBASE_NONZERO	int
;	O
break	O
;	O
case	O
'\''	O
:	O
break	O
;	O
case	O
'+'	O
:	O
case	O
' '	O
:	O
param	struct
.	O
sign	char
=	O
fchar	int
;	O
break	O
;	O
case	O
'-'	O
:	O
param	struct
.	O
justify	int
=	O
DOPRNT_JUSTIFY_LEFT	int
;	O
break	O
;	O
case	O
'.'	O
:	O
seen_precision	int
=	O
1	int
;	O
param	struct
.	O
prec	int
=	O
-	O
1	int
;	O
value	pointer
=	O
&	O
param	struct
.	O
prec	int
;	O
break	O
;	O
case	O
'*'	O
:	O
{	O
int	O
n	long
=	O
va_arg	O
(	O
ap	pointer
,	O
int	O
)	O
;	O
if	O
(	O
value	pointer
==	O
&	O
param	struct
.	O
width	int
)	O
{	O
if	O
(	O
n	long
<	O
0	int
)	O
{	O
param	struct
.	O
justify	int
=	O
DOPRNT_JUSTIFY_LEFT	int
;	O
n	long
=	O
-	O
n	long
;	O
}	O
param	struct
.	O
width	int
=	O
n	long
;	O
}	O
else	O
{	O
param	struct
.	O
prec	int
=	O
MAX	O
(	O
0	int
,	O
n	long
)	O
;	O
}	O
}	O
break	O
;	O
case	O
'0'	O
:	O
if	O
(	O
value	pointer
==	O
&	O
param	struct
.	O
width	int
)	O
{	O
param	struct
.	O
fill	char
=	O
'0'	O
;	O
if	O
(	O
param	struct
.	O
justify	int
==	O
DOPRNT_JUSTIFY_RIGHT	int
)	O
param	struct
.	O
justify	int
=	O
DOPRNT_JUSTIFY_INTERNAL	int
;	O
}	O
else	O
{	O
*	O
value	pointer
=	O
0	int
;	O
}	O
break	O
;	O
case	O
'1'	O
:	O
case	O
'2'	O
:	O
case	O
'3'	O
:	O
case	O
'4'	O
:	O
case	O
'5'	O
:	O
case	O
'6'	O
:	O
case	O
'7'	O
:	O
case	O
'8'	O
:	O
case	O
'9'	O
:	O
{	O
int	O
n	long
=	O
0	int
;	O
do	O
{	O
n	long
=	O
n	long
*	O
10	int
+	O
(	O
fchar	int
-	O
'0'	O
)	O
;	O
fchar	int
=	O
*	O
fmt	pointer
++	O
;	O
}	O
while	O
(	O
isascii	function
(	O
fchar	int
)	O
&&	O
isdigit	function
(	O
fchar	int
)	O
)	O
;	O
fmt	pointer
--	O
;	O
*	O
value	pointer
=	O
n	long
;	O
}	O
break	O
;	O
default	O
:	O
ASSERT	O
(	O
0	int
)	O
;	O
goto	O
next	pointer
;	O
}	O
}	O
next	pointer
:	O
;	O
}	O
TRACE	O
(	O
printf	function
(	O
"remainder: \"%s\"\n"	pointer
,	O
last_fmt	pointer
)	O
)	O
;	O
if	O
(	O
*	O
last_fmt	pointer
!=	O
'\0'	O
)	O
DOPRNT_FORMAT	O
(	O
last_fmt	pointer
,	O
last_ap	array
)	O
;	O
if	O
(	O
funs	pointer
->	O
final	pointer
!=	O
NULL	O
)	O
if	O
(	O
(	O
*	O
funs	pointer
->	O
final	pointer
)	O
(	O
data	pointer
)	O
==	O
-	O
1	int
)	O
goto	O
error	O
;	O
done	O
:	O
(	O
*	O
__gmp_free_func	pointer
)	O
(	O
alloc_fmt	pointer
,	O
alloc_fmt_size	long
)	O
;	O
return	O
retval	int
;	O
error	O
:	O
retval	int
=	O
-	O
1	int
;	O
goto	O
done	O
;	O
}	O
