static	O
char	O
*	O
copy_and_trim_name	function
(	O
const	O
char	O
*	O
filename	pointer
)	O
{	O
int	O
name_length	int
=	O
strlen	function
(	O
filename	pointer
)	O
;	O
char	O
*	O
name	short
=	O
malloc	function
(	O
name_length	int
+	O
1	int
)	O
;	O
char	O
*	O
start	pointer
=	O
name	short
;	O
char	O
*	O
p	pointer
;	O
char	O
*	O
name2	pointer
;	O
strcpy	function
(	O
name	short
,	O
filename	pointer
)	O
;	O
p	pointer
=	O
strrchr	function
(	O
name	short
,	O
'/'	O
)	O
;	O
if	O
(	O
p	pointer
)	O
{	O
p	pointer
++	O
;	O
name_length	int
-=	O
(	O
p	pointer
-	O
name	short
)	O
;	O
start	pointer
=	O
p	pointer
;	O
}	O
if	O
(	O
strncmp	function
(	O
start	pointer
,	O
"mc_"	pointer
,	O
3	int
)	O
==	O
0	int
)	O
{	O
start	pointer
+=	O
3	int
;	O
name_length	int
-=	O
3	int
;	O
}	O
if	O
(	O
strncmp	function
(	O
start	pointer
+	O
name_length	int
-	O
3	int
,	O
".db"	pointer
,	O
3	int
)	O
==	O
0	int
)	O
start	pointer
[	O
name_length	int
-	O
3	int
]	O
=	O
'\0'	O
;	O
name2	pointer
=	O
malloc	function
(	O
name_length	int
+	O
1	int
)	O
;	O
strcpy	function
(	O
name2	pointer
,	O
start	pointer
)	O
;	O
free	function
(	O
name	short
)	O
;	O
return	O
name2	pointer
;	O
}	O
int	O
main	function
(	O
int	O
argc	int
,	O
char	O
*	O
argv	array
[	O
]	O
)	O
{	O
int	O
N	int
=	O
mc_get_size_of_pattern_values_table	function
(	O
)	O
;	O
unsigned	O
int	O
*	O
values	array
;	O
int	O
i	int
;	O
int	O
k	int
;	O
char	O
*	O
name	short
;	O
if	O
(	O
argc	int
<	O
2	int
)	O
{	O
fprintf	function
(	O
stderr	pointer
,	O
"Usage: ...\n"	pointer
)	O
;	O
exit	function
(	O
EXIT_FAILURE	int
)	O
;	O
}	O
printf	function
(	O
"/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\\\n * This is GNU Go, a Go program. Contact gnugo@gnu.org, or see       *\n * http://www.gnu.org/software/gnugo/ for more information.          *\n *                                                                   *\n * Copyright 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007,   *\n * 2008 and 2009 by the Free Software Foundation.                    *\n *                                                                   *\n * This program is free software; you can redistribute it and/or     *\n * modify it under the terms of the GNU General Public License as    *\n * published by the Free Software Foundation - version 3             *\n * or (at your option) any later version                             *\n *                                                                   *\n * This program is distributed in the hope that it will be useful,   *\n * but WITHOUT ANY WARRANTY; without even the implied warranty of    *\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the     *\n * GNU General Public License in file COPYING for more details.      *\n *                                                                   *\n * You should have received a copy of the GNU General Public         *\n * License along with this program; if not, write to the Free        *\n * Software Foundation, Inc., 51 Franklin Street, Fifth Floor,       *\n * Boston, MA 02111, USA.                                            *\n\\* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\n"	pointer
)	O
;	O
printf	function
(	O
"/* This file is automatically generated by mkmcpat. Do not\n"	pointer
)	O
;	O
printf	function
(	O
" * edit it directly. Instead, edit the pattern databases\n"	pointer
)	O
;	O
printf	function
(	O
" * mc_*.db.\n"	pointer
)	O
;	O
printf	function
(	O
" */\n\n"	pointer
)	O
;	O
printf	function
(	O
"#include <stdio.h> /* for NULL */\n"	pointer
)	O
;	O
printf	function
(	O
"#include \"liberty.h\"\n\n"	pointer
)	O
;	O
printf	function
(	O
"#include \"patterns.h\"\n\n"	pointer
)	O
;	O
values	array
=	O
malloc	function
(	O
N	int
*	O
sizeof	O
(	O
*	O
values	array
)	O
)	O
;	O
for	O
(	O
i	int
=	O
1	int
;	O
i	int
<	O
argc	int
;	O
i	int
++	O
)	O
{	O
if	O
(	O
!	O
mc_load_patterns_from_db	function
(	O
argv	array
[	O
i	int
]	O
,	O
values	array
)	O
)	O
exit	function
(	O
EXIT_FAILURE	int
)	O
;	O
name	short
=	O
copy_and_trim_name	function
(	O
argv	array
[	O
i	int
]	O
)	O
;	O
printf	function
(	O
"static const unsigned int %s_values[] = {\n"	pointer
,	O
name	short
)	O
;	O
for	O
(	O
k	int
=	O
0	int
;	O
k	int
<	O
N	int
;	O
k	int
++	O
)	O
{	O
printf	function
(	O
"%u, "	pointer
,	O
values	array
[	O
k	int
]	O
)	O
;	O
if	O
(	O
k	int
%	O
16	int
==	O
15	int
)	O
printf	function
(	O
"\n"	pointer
)	O
;	O
}	O
printf	function
(	O
"\n};\n\n"	pointer
)	O
;	O
free	function
(	O
name	short
)	O
;	O
}	O
printf	function
(	O
"struct mc_pattern_database mc_pattern_databases[] = {\n"	pointer
)	O
;	O
for	O
(	O
i	int
=	O
1	int
;	O
i	int
<	O
argc	int
;	O
i	int
++	O
)	O
{	O
name	short
=	O
copy_and_trim_name	function
(	O
argv	array
[	O
i	int
]	O
)	O
;	O
printf	function
(	O
"  {\"%s\", %s_values},\n"	pointer
,	O
name	short
,	O
name	short
)	O
;	O
free	function
(	O
name	short
)	O
;	O
}	O
printf	function
(	O
"  {NULL, NULL}};\n"	pointer
)	O
;	O
return	O
0	int
;	O
}	O
