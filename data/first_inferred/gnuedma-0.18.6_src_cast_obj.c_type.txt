OBJID	long
EDMAPROC	O
edma_upcast_obj	function
(	O
OBJID	long
IdObj	long
,	O
EPChar	pointer
classname	pointer
)	O
{	O
CLASSID	long
idc	long
;	O
ESint32	long
i	long
,	O
ap	long
;	O
OBJID	long
f	pointer
;	O
POBJ	pointer
pObj	pointer
,	O
pObj2	pointer
;	O
if	O
(	O
(	O
edma_check_obj_id	function
(	O
IdObj	long
,	O
"edma_upcast_obj"	pointer
)	O
)	O
==	O
-	O
1	int
)	O
return	O
-	O
1	int
;	O
pObj	pointer
=	O
gObj	O
[	O
IdObj	long
]	O
;	O
idc	long
=	O
edma_get_class_id	function
(	O
classname	pointer
)	O
;	O
ap	long
=	O
0	int
;	O
if	O
(	O
idc	long
!=	O
-	O
1	int
)	O
{	O
if	O
(	O
pObj	pointer
->	O
IdClass	long
==	O
idc	long
)	O
return	O
pObj	pointer
->	O
IdObj	long
;	O
}	O
else	O
ap	long
=	O
1	int
;	O
for	O
(	O
i	long
=	O
0	int
;	O
i	long
<	O
pObj	pointer
->	O
nUpTable	long
;	O
i	long
++	O
)	O
{	O
if	O
(	O
pObj	pointer
->	O
UpTable	pointer
[	O
i	long
]	O
.	O
Obj	long
!=	O
-	O
1	int
)	O
{	O
pObj2	pointer
=	O
gObj	O
[	O
pObj	pointer
->	O
UpTable	pointer
[	O
i	long
]	O
.	O
Obj	long
]	O
;	O
if	O
(	O
ap	long
)	O
{	O
if	O
(	O
strncmp	function
(	O
classname	pointer
,	O
pObj	pointer
->	O
UpTable	pointer
[	O
i	long
]	O
.	O
Id	pointer
,	O
EDMA_GENERAL_ID_LEN	int
)	O
==	O
0	int
)	O
return	O
pObj2	pointer
->	O
IdObj	long
;	O
else	O
{	O
f	pointer
=	O
edma_upcast_obj	function
(	O
pObj2	pointer
->	O
IdObj	long
,	O
classname	pointer
)	O
;	O
if	O
(	O
f	pointer
!=	O
-	O
1	int
)	O
return	O
f	pointer
;	O
}	O
continue	O
;	O
}	O
f	pointer
=	O
edma_upcast_obj	function
(	O
pObj2	pointer
->	O
IdObj	long
,	O
classname	pointer
)	O
;	O
if	O
(	O
f	pointer
!=	O
-	O
1	int
)	O
return	O
f	pointer
;	O
}	O
}	O
return	O
-	O
1	int
;	O
}	O
OBJID	long
EDMAPROC	O
edma_downcast_obj	function
(	O
OBJID	long
IdObj	long
,	O
EPChar	pointer
classname	pointer
)	O
{	O
CLASSID	long
idc	long
;	O
ESint32	long
i	long
,	O
ap	long
;	O
OBJID	long
f	pointer
;	O
POBJ	pointer
pObj	pointer
,	O
pObj2	pointer
;	O
if	O
(	O
(	O
edma_check_obj_id	function
(	O
IdObj	long
,	O
"edma_downcast_obj"	pointer
)	O
)	O
==	O
-	O
1	int
)	O
return	O
-	O
1	int
;	O
pObj	pointer
=	O
gObj	O
[	O
IdObj	long
]	O
;	O
idc	long
=	O
edma_get_class_id	function
(	O
classname	pointer
)	O
;	O
ap	long
=	O
0	int
;	O
if	O
(	O
idc	long
!=	O
-	O
1	int
)	O
{	O
if	O
(	O
pObj	pointer
->	O
IdClass	long
==	O
idc	long
)	O
return	O
pObj	pointer
->	O
IdObj	long
;	O
}	O
else	O
ap	long
=	O
1	int
;	O
for	O
(	O
i	long
=	O
0	int
;	O
i	long
<	O
pObj	pointer
->	O
nDownTable	long
;	O
i	long
++	O
)	O
{	O
pObj2	pointer
=	O
gObj	O
[	O
pObj	pointer
->	O
DownTable	pointer
[	O
i	long
]	O
.	O
Obj	long
]	O
;	O
if	O
(	O
pObj2	pointer
==	O
NULL	O
)	O
{	O
edma_printf	function
(	O
"[%s] Entry %d '%s' still not linked"	pointer
,	O
__FUNCTION__	O
,	O
i	long
,	O
pObj	pointer
->	O
DownTable	pointer
[	O
i	long
]	O
.	O
Id	pointer
)	O
;	O
continue	O
;	O
}	O
if	O
(	O
ap	long
)	O
{	O
if	O
(	O
strncmp	function
(	O
classname	pointer
,	O
pObj	pointer
->	O
DownTable	pointer
[	O
i	long
]	O
.	O
Id	pointer
,	O
EDMA_GENERAL_ID_LEN	int
)	O
==	O
0	int
)	O
return	O
pObj2	pointer
->	O
IdObj	long
;	O
else	O
{	O
f	pointer
=	O
edma_downcast_obj	function
(	O
pObj2	pointer
->	O
IdObj	long
,	O
classname	pointer
)	O
;	O
if	O
(	O
f	pointer
!=	O
-	O
1	int
)	O
return	O
f	pointer
;	O
}	O
continue	O
;	O
}	O
f	pointer
=	O
edma_downcast_obj	function
(	O
pObj2	pointer
->	O
IdObj	long
,	O
classname	pointer
)	O
;	O
if	O
(	O
f	pointer
!=	O
-	O
1	int
)	O
return	O
f	pointer
;	O
}	O
return	O
-	O
1	int
;	O
}	O
OBJID	long
EDMAPROC	O
edma_cast_obj	function
(	O
OBJID	long
IdObj	long
,	O
EPChar	pointer
classname	pointer
)	O
{	O
OBJID	long
id	long
;	O
if	O
(	O
(	O
edma_check_obj_id	function
(	O
IdObj	long
,	O
"edma_cast_obj"	pointer
)	O
)	O
==	O
-	O
1	int
)	O
return	O
-	O
1	int
;	O
id	long
=	O
edma_upcast_obj	function
(	O
IdObj	long
,	O
classname	pointer
)	O
;	O
if	O
(	O
id	long
==	O
-	O
1	int
)	O
id	long
=	O
edma_downcast_obj	function
(	O
IdObj	long
,	O
classname	pointer
)	O
;	O
return	O
id	long
;	O
}	O
