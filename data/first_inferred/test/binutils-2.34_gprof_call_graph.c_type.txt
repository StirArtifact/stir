void	O
cg_tally	function
(	O
bfd_vma	long
from_pc	long
,	O
bfd_vma	long
self_pc	O
,	O
unsigned	O
long	O
count	long
)	O
{	O
Sym	struct
*	O
parent	*
;	O
Sym	struct
*	O
child	double
;	O
parent	*
=	O
sym_lookup	function
(	O
&	O
symtab	struct
,	O
from_pc	*
)	O
;	O
child	double
=	O
sym_lookup	function
(	O
&	O
symtab	struct
,	O
self_pc	*
)	O
;	O
if	O
(	O
child	*
==	O
NULL	O
||	O
parent	*
==	O
NULL	O
)	O
return	O
;	O
while	O
(	O
child	double
>=	O
symtab	*
.	O
base	int
&&	O
!	O
child	int
->	O
is_func	int
)	O
--	O
child	int
;	O
if	O
(	O
child	double
<	O
symtab	*
.	O
base	int
)	O
return	O
;	O
if	O
(	O
sym_id_arc_is_present	function
(	O
&	O
syms	array
[	O
INCL_ARCS	int
]	O
,	O
parent	*
,	O
child	double
)	O
||	O
(	O
syms	array
[	O
INCL_ARCS	int
]	O
.	O
len	long
==	O
0	int
&&	O
!	O
sym_id_arc_is_present	function
(	O
&	O
syms	array
[	O
EXCL_ARCS	int
]	O
,	O
parent	*
,	O
child	*
)	O
)	O
)	O
{	O
child	*
->	O
ncalls	int
+=	O
count	int
;	O
DBG	O
(	O
TALLYDEBUG	int
,	O
printf	function
(	O
_	O
(	O
"[cg_tally] arc from %s to %s traversed %lu times\n"	*
)	O
,	O
parent	*
->	O
name	*
,	O
child	*
->	O
name	*
,	O
count	int
)	O
)	O
;	O
arc_add	function
(	O
parent	*
,	O
child	double
,	O
count	int
)	O
;	O
}	O
}	O
void	O
cg_read_rec	function
(	O
FILE	struct
*	O
ifp	*
,	O
const	O
char	O
*	O
filename	*
)	O
{	O
bfd_vma	long
from_pc	long
,	O
self_pc	*
;	O
unsigned	O
int	O
count	int
;	O
if	O
(	O
gmon_io_read_vma	function
(	O
ifp	*
,	O
&	O
from_pc	*
)	O
||	O
gmon_io_read_vma	function
(	O
ifp	*
,	O
&	O
self_pc	*
)	O
||	O
gmon_io_read_32	function
(	O
ifp	*
,	O
&	O
count	*
)	O
)	O
{	O
fprintf	function
(	O
stderr	*
,	O
_	O
(	O
"%s: %s: unexpected end of file\n"	*
)	O
,	O
whoami	*
,	O
filename	*
)	O
;	O
done	function
(	O
1	int
)	O
;	O
}	O
DBG	O
(	O
SAMPLEDEBUG	*
,	O
printf	function
(	O
"[cg_read_rec] frompc 0x%lx selfpc 0x%lx count %lu\n"	*
,	O
(	O
unsigned	O
long	O
)	O
from_pc	int
,	O
(	O
unsigned	O
long	O
)	O
self_pc	*
,	O
(	O
unsigned	O
long	O
)	O
count	long
)	O
)	O
;	O
cg_tally	function
(	O
from_pc	*
,	O
self_pc	*
,	O
count	long
)	O
;	O
}	O
void	O
cg_write_arcs	function
(	O
FILE	struct
*	O
ofp	*
,	O
const	O
char	O
*	O
filename	*
)	O
{	O
Arc	struct
*	O
arc	struct
;	O
Sym	struct
*	O
sym	*
;	O
for	O
(	O
sym	*
=	O
symtab	*
.	O
base	*
;	O
sym	*
<	O
symtab	struct
.	O
limit	long
;	O
sym	int
++	O
)	O
{	O
for	O
(	O
arc	struct
=	O
sym	*
->	O
cg	struct
.	O
children	*
;	O
arc	struct
;	O
arc	struct
=	O
arc	struct
->	O
next_child	*
)	O
{	O
if	O
(	O
gmon_io_write_8	function
(	O
ofp	*
,	O
GMON_TAG_CG_ARC	*
)	O
||	O
gmon_io_write_vma	function
(	O
ofp	*
,	O
arc	struct
->	O
parent	*
->	O
addr	*
)	O
||	O
gmon_io_write_vma	function
(	O
ofp	*
,	O
arc	*
->	O
child	double
->	O
addr	*
)	O
||	O
gmon_io_write_32	function
(	O
ofp	*
,	O
arc	*
->	O
count	long
)	O
)	O
{	O
perror	function
(	O
filename	*
)	O
;	O
done	function
(	O
1	int
)	O
;	O
}	O
DBG	O
(	O
SAMPLEDEBUG	int
,	O
printf	function
(	O
"[cg_write_arcs] frompc 0x%lx selfpc 0x%lx count %lu\n"	*
,	O
(	O
unsigned	O
long	O
)	O
arc	struct
->	O
parent	*
->	O
addr	*
,	O
(	O
unsigned	O
long	O
)	O
arc	struct
->	O
child	double
->	O
addr	*
,	O
arc	*
->	O
count	long
)	O
)	O
;	O
}	O
}	O
}	O