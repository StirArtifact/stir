int	O
iconveh_open	function
(	O
const	O
char	O
*	O
to_codeset	pointer
,	O
const	O
char	O
*	O
from_codeset	pointer
,	O
iconveh_t	struct
*	O
cdp	pointer
)	O
{	O
iconv_t	pointer
cd	pointer
;	O
iconv_t	pointer
cd1	pointer
;	O
iconv_t	pointer
cd2	pointer
;	O
cd	pointer
=	O
iconv_open	function
(	O
to_codeset	pointer
,	O
from_codeset	pointer
)	O
;	O
if	O
(	O
STRCASEEQ	O
(	O
from_codeset	pointer
,	O
"UTF-8"	pointer
,	O
'U'	O
,	O
'T'	O
,	O
'F'	O
,	O
'-'	O
,	O
'8'	O
,	O
0	int
,	O
0	int
,	O
0	int
,	O
0	int
)	O
)	O
cd1	pointer
=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
;	O
else	O
{	O
cd1	pointer
=	O
iconv_open	function
(	O
"UTF-8"	pointer
,	O
from_codeset	pointer
)	O
;	O
if	O
(	O
cd1	pointer
==	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
if	O
(	O
cd	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
iconv_close	function
(	O
cd	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
return	O
-	O
1	int
;	O
}	O
}	O
if	O
(	O
STRCASEEQ	O
(	O
to_codeset	pointer
,	O
"UTF-8"	pointer
,	O
'U'	O
,	O
'T'	O
,	O
'F'	O
,	O
'-'	O
,	O
'8'	O
,	O
0	int
,	O
0	int
,	O
0	int
,	O
0	int
)	O
||	O
c_strcasecmp	function
(	O
to_codeset	pointer
,	O
"UTF-8//TRANSLIT"	pointer
)	O
==	O
0	int
)	O
cd2	pointer
=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
;	O
else	O
{	O
cd2	pointer
=	O
iconv_open	function
(	O
to_codeset	pointer
,	O
"UTF-8"	pointer
)	O
;	O
if	O
(	O
cd2	pointer
==	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
if	O
(	O
cd1	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
iconv_close	function
(	O
cd1	pointer
)	O
;	O
if	O
(	O
cd	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
iconv_close	function
(	O
cd	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
return	O
-	O
1	int
;	O
}	O
}	O
cdp	pointer
->	O
cd	pointer
=	O
cd	pointer
;	O
cdp	pointer
->	O
cd1	pointer
=	O
cd1	pointer
;	O
cdp	pointer
->	O
cd2	pointer
=	O
cd2	pointer
;	O
return	O
0	int
;	O
}	O
int	O
iconveh_close	function
(	O
const	O
iconveh_t	struct
*	O
cd	pointer
)	O
{	O
if	O
(	O
cd	pointer
->	O
cd2	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
&&	O
iconv_close	function
(	O
cd	pointer
->	O
cd2	pointer
)	O
<	O
0	int
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
if	O
(	O
cd	pointer
->	O
cd1	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
iconv_close	function
(	O
cd	pointer
->	O
cd1	pointer
)	O
;	O
if	O
(	O
cd	pointer
->	O
cd	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
iconv_close	function
(	O
cd	pointer
->	O
cd	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
return	O
-	O
1	int
;	O
}	O
if	O
(	O
cd	pointer
->	O
cd1	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
&&	O
iconv_close	function
(	O
cd	pointer
->	O
cd1	pointer
)	O
<	O
0	int
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
if	O
(	O
cd	pointer
->	O
cd	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
iconv_close	function
(	O
cd	pointer
->	O
cd	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
return	O
-	O
1	int
;	O
}	O
if	O
(	O
cd	pointer
->	O
cd	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
&&	O
iconv_close	function
(	O
cd	pointer
->	O
cd	pointer
)	O
<	O
0	int
)	O
return	O
-	O
1	int
;	O
return	O
0	int
;	O
}	O
static	O
size_t	long
iconv_carefully_1	function
(	O
iconv_t	pointer
cd	pointer
,	O
const	O
char	O
*	O
*	O
inbuf	pointer
,	O
size_t	long
*	O
inbytesleft	pointer
,	O
char	O
*	O
*	O
outbuf	pointer
,	O
size_t	long
*	O
outbytesleft	pointer
,	O
bool	bool
*	O
incremented	pointer
)	O
{	O
const	O
char	O
*	O
inptr_before	pointer
=	O
*	O
inbuf	pointer
;	O
const	O
char	O
*	O
inptr	pointer
=	O
inptr_before	pointer
;	O
const	O
char	O
*	O
inptr_end	pointer
=	O
inptr_before	pointer
+	O
*	O
inbytesleft	pointer
;	O
char	O
*	O
outptr	pointer
=	O
*	O
outbuf	pointer
;	O
size_t	long
outsize	long
=	O
*	O
outbytesleft	pointer
;	O
size_t	long
res	long
=	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
;	O
size_t	long
insize	long
;	O
for	O
(	O
insize	long
=	O
1	int
;	O
inptr_before	pointer
+	O
insize	long
<=	O
inptr_end	pointer
;	O
insize	long
++	O
)	O
{	O
inptr	pointer
=	O
inptr_before	pointer
;	O
res	long
=	O
iconv	function
(	O
cd	pointer
,	O
(	O
ICONV_CONST	O
char	O
*	O
*	O
)	O
&	O
inptr	pointer
,	O
&	O
insize	long
,	O
&	O
outptr	pointer
,	O
&	O
outsize	long
)	O
;	O
if	O
(	O
!	O
(	O
res	long
==	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
&&	O
errno	O
==	O
EINVAL	int
)	O
)	O
break	O
;	O
if	O
(	O
inptr	pointer
>	O
inptr_before	pointer
)	O
{	O
res	long
=	O
0	int
;	O
break	O
;	O
}	O
}	O
*	O
inbuf	pointer
=	O
inptr	pointer
;	O
*	O
inbytesleft	pointer
=	O
inptr_end	pointer
-	O
inptr	pointer
;	O
if	O
(	O
res	long
!=	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
)	O
{	O
*	O
outbuf	pointer
=	O
outptr	pointer
;	O
*	O
outbytesleft	pointer
=	O
outsize	long
;	O
}	O
*	O
incremented	pointer
=	O
false	int
;	O
return	O
res	long
;	O
}	O
static	O
size_t	long
utf8conv_carefully	function
(	O
bool	bool
one_character_only	bool
,	O
const	O
char	O
*	O
*	O
inbuf	pointer
,	O
size_t	long
*	O
inbytesleft	pointer
,	O
char	O
*	O
*	O
outbuf	pointer
,	O
size_t	long
*	O
outbytesleft	pointer
,	O
bool	bool
*	O
incremented	pointer
)	O
{	O
const	O
char	O
*	O
inptr	pointer
=	O
*	O
inbuf	pointer
;	O
size_t	long
insize	long
=	O
*	O
inbytesleft	pointer
;	O
char	O
*	O
outptr	pointer
=	O
*	O
outbuf	pointer
;	O
size_t	long
outsize	long
=	O
*	O
outbytesleft	pointer
;	O
size_t	long
res	long
;	O
res	long
=	O
0	int
;	O
do	O
{	O
ucs4_t	int
uc	int
;	O
int	O
n	long
;	O
int	O
m	int
;	O
n	long
=	O
u8_mbtoucr	function
(	O
&	O
uc	int
,	O
(	O
const	O
uint8_t	char
*	O
)	O
inptr	pointer
,	O
insize	long
)	O
;	O
if	O
(	O
n	long
<	O
0	int
)	O
{	O
errno	O
=	O
(	O
n	long
==	O
-	O
2	int
?	O
EINVAL	int
:	O
EILSEQ	int
)	O
;	O
n	long
=	O
u8_mbtouc	function
(	O
&	O
uc	int
,	O
(	O
const	O
uint8_t	char
*	O
)	O
inptr	pointer
,	O
insize	long
)	O
;	O
inptr	pointer
+=	O
n	long
;	O
insize	long
-=	O
n	long
;	O
res	long
=	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
;	O
*	O
incremented	pointer
=	O
true	int
;	O
break	O
;	O
}	O
if	O
(	O
outsize	long
==	O
0	int
)	O
{	O
errno	O
=	O
E2BIG	int
;	O
res	long
=	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
;	O
*	O
incremented	pointer
=	O
false	int
;	O
break	O
;	O
}	O
m	int
=	O
u8_uctomb	function
(	O
(	O
uint8_t	char
*	O
)	O
outptr	pointer
,	O
uc	int
,	O
outsize	long
)	O
;	O
if	O
(	O
m	int
==	O
-	O
2	int
)	O
{	O
errno	O
=	O
E2BIG	int
;	O
res	long
=	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
;	O
*	O
incremented	pointer
=	O
false	int
;	O
break	O
;	O
}	O
inptr	pointer
+=	O
n	long
;	O
insize	long
-=	O
n	long
;	O
if	O
(	O
m	int
==	O
-	O
1	int
)	O
{	O
errno	O
=	O
EILSEQ	int
;	O
res	long
=	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
;	O
*	O
incremented	pointer
=	O
true	int
;	O
break	O
;	O
}	O
outptr	pointer
+=	O
m	int
;	O
outsize	long
-=	O
m	int
;	O
}	O
while	O
(	O
!	O
one_character_only	bool
&&	O
insize	long
>	O
0	int
)	O
;	O
*	O
inbuf	pointer
=	O
inptr	pointer
;	O
*	O
inbytesleft	pointer
=	O
insize	long
;	O
*	O
outbuf	pointer
=	O
outptr	pointer
;	O
*	O
outbytesleft	pointer
=	O
outsize	long
;	O
return	O
res	long
;	O
}	O
static	O
int	O
mem_cd_iconveh_internal	function
(	O
const	O
char	O
*	O
src	pointer
,	O
size_t	long
srclen	long
,	O
iconv_t	pointer
cd	pointer
,	O
iconv_t	pointer
cd1	pointer
,	O
iconv_t	pointer
cd2	pointer
,	O
enum	O
iconv_ilseq_handler	enum
handler	enum
,	O
size_t	long
extra_alloc	long
,	O
size_t	long
*	O
offsets	pointer
,	O
char	O
*	O
*	O
resultp	pointer
,	O
size_t	long
*	O
lengthp	pointer
)	O
{	O
union	O
{	O
unsigned	O
int	O
align	int
;	O
char	O
buf	array
[	O
tmpbufsize	int
]	O
;	O
}	O
tmp	union
;	O
char	O
*	O
initial_result	pointer
;	O
char	O
*	O
result	pointer
;	O
size_t	long
allocated	long
;	O
size_t	long
length	long
;	O
size_t	long
last_length	long
=	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
;	O
if	O
(	O
*	O
resultp	pointer
!=	O
NULL	O
&&	O
*	O
lengthp	pointer
>=	O
sizeof	O
(	O
tmpbuf	O
)	O
)	O
{	O
initial_result	pointer
=	O
*	O
resultp	pointer
;	O
allocated	long
=	O
*	O
lengthp	pointer
;	O
}	O
else	O
{	O
initial_result	pointer
=	O
tmpbuf	O
;	O
allocated	long
=	O
sizeof	O
(	O
tmpbuf	O
)	O
;	O
}	O
result	pointer
=	O
initial_result	pointer
;	O
if	O
(	O
cd	pointer
==	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
goto	O
indirectly	O
;	O
if	O
(	O
offsets	pointer
!=	O
NULL	O
)	O
{	O
size_t	long
i	long
;	O
for	O
(	O
i	long
=	O
0	int
;	O
i	long
<	O
srclen	long
;	O
i	long
++	O
)	O
offsets	pointer
[	O
i	long
]	O
=	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
;	O
last_length	long
=	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
;	O
}	O
length	long
=	O
0	int
;	O
{	O
const	O
char	O
*	O
inptr	pointer
=	O
src	pointer
;	O
size_t	long
insize	long
=	O
srclen	long
;	O
iconv	function
(	O
cd	pointer
,	O
NULL	O
,	O
NULL	O
,	O
NULL	O
,	O
NULL	O
)	O
;	O
while	O
(	O
insize	long
>	O
0	int
)	O
{	O
char	O
*	O
outptr	pointer
=	O
result	pointer
+	O
length	long
;	O
size_t	long
outsize	long
=	O
allocated	long
-	O
extra_alloc	long
-	O
length	long
;	O
bool	bool
incremented	pointer
;	O
size_t	long
res	long
;	O
bool	bool
grow	bool
;	O
if	O
(	O
offsets	pointer
!=	O
NULL	O
)	O
{	O
if	O
(	O
length	long
!=	O
last_length	long
)	O
{	O
offsets	pointer
[	O
inptr	pointer
-	O
src	pointer
]	O
=	O
length	long
;	O
last_length	long
=	O
length	long
;	O
}	O
res	long
=	O
iconv_carefully_1	function
(	O
cd	pointer
,	O
&	O
inptr	pointer
,	O
&	O
insize	long
,	O
&	O
outptr	pointer
,	O
&	O
outsize	long
,	O
&	O
incremented	pointer
)	O
;	O
}	O
else	O
res	long
=	O
iconv_carefully	O
(	O
cd	pointer
,	O
&	O
inptr	pointer
,	O
&	O
insize	long
,	O
&	O
outptr	pointer
,	O
&	O
outsize	long
,	O
&	O
incremented	pointer
)	O
;	O
length	long
=	O
outptr	pointer
-	O
result	pointer
;	O
grow	bool
=	O
(	O
length	long
+	O
extra_alloc	long
>	O
allocated	long
/	O
2	int
)	O
;	O
if	O
(	O
res	long
==	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
)	O
{	O
if	O
(	O
errno	O
==	O
E2BIG	int
)	O
grow	bool
=	O
true	int
;	O
else	O
if	O
(	O
errno	O
==	O
EINVAL	int
)	O
break	O
;	O
else	O
if	O
(	O
errno	O
==	O
EILSEQ	int
&&	O
handler	enum
!=	O
iconveh_error	int
)	O
{	O
if	O
(	O
cd2	pointer
==	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
{	O
if	O
(	O
length	long
+	O
1	int
+	O
extra_alloc	long
>	O
allocated	long
)	O
{	O
char	O
*	O
memory	pointer
;	O
allocated	long
=	O
2	int
*	O
allocated	long
;	O
if	O
(	O
length	long
+	O
1	int
+	O
extra_alloc	long
>	O
allocated	long
)	O
abort	function
(	O
)	O
;	O
if	O
(	O
result	pointer
==	O
initial_result	pointer
)	O
memory	pointer
=	O
(	O
char	O
*	O
)	O
malloc	function
(	O
allocated	long
)	O
;	O
else	O
memory	pointer
=	O
(	O
char	O
*	O
)	O
realloc	function
(	O
result	pointer
,	O
allocated	long
)	O
;	O
if	O
(	O
memory	pointer
==	O
NULL	O
)	O
{	O
if	O
(	O
result	pointer
!=	O
initial_result	pointer
)	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
ENOMEM	int
;	O
return	O
-	O
1	int
;	O
}	O
if	O
(	O
result	pointer
==	O
initial_result	pointer
)	O
memcpy	function
(	O
memory	pointer
,	O
initial_result	pointer
,	O
length	long
)	O
;	O
result	pointer
=	O
memory	pointer
;	O
grow	bool
=	O
false	int
;	O
}	O
if	O
(	O
!	O
incremented	pointer
)	O
{	O
if	O
(	O
insize	long
==	O
0	int
)	O
abort	function
(	O
)	O
;	O
inptr	pointer
++	O
;	O
insize	long
--	O
;	O
}	O
result	pointer
[	O
length	long
]	O
=	O
'?'	O
;	O
length	long
++	O
;	O
}	O
else	O
goto	O
indirectly	O
;	O
}	O
else	O
{	O
if	O
(	O
result	pointer
!=	O
initial_result	pointer
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
}	O
return	O
-	O
1	int
;	O
}	O
}	O
if	O
(	O
insize	long
==	O
0	int
)	O
break	O
;	O
if	O
(	O
grow	bool
)	O
{	O
char	O
*	O
memory	pointer
;	O
allocated	long
=	O
2	int
*	O
allocated	long
;	O
if	O
(	O
result	pointer
==	O
initial_result	pointer
)	O
memory	pointer
=	O
(	O
char	O
*	O
)	O
malloc	function
(	O
allocated	long
)	O
;	O
else	O
memory	pointer
=	O
(	O
char	O
*	O
)	O
realloc	function
(	O
result	pointer
,	O
allocated	long
)	O
;	O
if	O
(	O
memory	pointer
==	O
NULL	O
)	O
{	O
if	O
(	O
result	pointer
!=	O
initial_result	pointer
)	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
ENOMEM	int
;	O
return	O
-	O
1	int
;	O
}	O
if	O
(	O
result	pointer
==	O
initial_result	pointer
)	O
memcpy	function
(	O
memory	pointer
,	O
initial_result	pointer
,	O
length	long
)	O
;	O
result	pointer
=	O
memory	pointer
;	O
}	O
}	O
}	O
for	O
(	O
;	O
;	O
)	O
{	O
char	O
*	O
outptr	pointer
=	O
result	pointer
+	O
length	long
;	O
size_t	long
outsize	long
=	O
allocated	long
-	O
extra_alloc	long
-	O
length	long
;	O
size_t	long
res	long
;	O
res	long
=	O
iconv	function
(	O
cd	pointer
,	O
NULL	O
,	O
NULL	O
,	O
&	O
outptr	pointer
,	O
&	O
outsize	long
)	O
;	O
length	long
=	O
outptr	pointer
-	O
result	pointer
;	O
if	O
(	O
res	long
==	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
)	O
{	O
if	O
(	O
errno	O
==	O
E2BIG	int
)	O
{	O
char	O
*	O
memory	pointer
;	O
allocated	long
=	O
2	int
*	O
allocated	long
;	O
if	O
(	O
result	pointer
==	O
initial_result	pointer
)	O
memory	pointer
=	O
(	O
char	O
*	O
)	O
malloc	function
(	O
allocated	long
)	O
;	O
else	O
memory	pointer
=	O
(	O
char	O
*	O
)	O
realloc	function
(	O
result	pointer
,	O
allocated	long
)	O
;	O
if	O
(	O
memory	pointer
==	O
NULL	O
)	O
{	O
if	O
(	O
result	pointer
!=	O
initial_result	pointer
)	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
ENOMEM	int
;	O
return	O
-	O
1	int
;	O
}	O
if	O
(	O
result	pointer
==	O
initial_result	pointer
)	O
memcpy	function
(	O
memory	pointer
,	O
initial_result	pointer
,	O
length	long
)	O
;	O
result	pointer
=	O
memory	pointer
;	O
}	O
else	O
{	O
if	O
(	O
result	pointer
!=	O
initial_result	pointer
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
}	O
return	O
-	O
1	int
;	O
}	O
}	O
else	O
break	O
;	O
}	O
goto	O
done	O
;	O
indirectly	O
:	O
if	O
(	O
offsets	pointer
!=	O
NULL	O
)	O
{	O
size_t	long
i	long
;	O
for	O
(	O
i	long
=	O
0	int
;	O
i	long
<	O
srclen	long
;	O
i	long
++	O
)	O
offsets	pointer
[	O
i	long
]	O
=	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
;	O
last_length	long
=	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
;	O
}	O
length	long
=	O
0	int
;	O
{	O
const	O
bool	bool
slowly	bool
=	O
(	O
offsets	pointer
!=	O
NULL	O
||	O
handler	enum
==	O
iconveh_error	int
)	O
;	O
char	O
utf8buf	array
[	O
utf8bufsize	int
+	O
1	int
]	O
;	O
size_t	long
utf8len	long
=	O
0	int
;	O
const	O
char	O
*	O
in1ptr	pointer
=	O
src	pointer
;	O
size_t	long
in1size	long
=	O
srclen	long
;	O
bool	bool
do_final_flush1	bool
=	O
true	int
;	O
bool	bool
do_final_flush2	bool
=	O
true	int
;	O
if	O
(	O
cd1	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
iconv	function
(	O
cd1	pointer
,	O
NULL	O
,	O
NULL	O
,	O
NULL	O
,	O
NULL	O
)	O
;	O
if	O
(	O
cd2	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
iconv	function
(	O
cd2	pointer
,	O
NULL	O
,	O
NULL	O
,	O
NULL	O
,	O
NULL	O
)	O
;	O
while	O
(	O
in1size	long
>	O
0	int
||	O
do_final_flush1	bool
||	O
utf8len	long
>	O
0	int
||	O
do_final_flush2	bool
)	O
{	O
char	O
*	O
out1ptr	pointer
=	O
utf8buf	array
+	O
utf8len	long
;	O
size_t	long
out1size	long
=	O
utf8bufsize	int
-	O
utf8len	long
;	O
bool	bool
incremented1	bool
;	O
size_t	long
res1	long
;	O
int	O
errno1	int
;	O
if	O
(	O
in1size	long
>	O
0	int
)	O
{	O
if	O
(	O
offsets	pointer
!=	O
NULL	O
&&	O
length	long
!=	O
last_length	long
)	O
{	O
offsets	pointer
[	O
in1ptr	pointer
-	O
src	pointer
]	O
=	O
length	long
;	O
last_length	long
=	O
length	long
;	O
}	O
if	O
(	O
cd1	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
{	O
if	O
(	O
slowly	bool
)	O
res1	long
=	O
iconv_carefully_1	function
(	O
cd1	pointer
,	O
&	O
in1ptr	pointer
,	O
&	O
in1size	long
,	O
&	O
out1ptr	pointer
,	O
&	O
out1size	long
,	O
&	O
incremented1	bool
)	O
;	O
else	O
res1	long
=	O
iconv_carefully	O
(	O
cd1	pointer
,	O
&	O
in1ptr	pointer
,	O
&	O
in1size	long
,	O
&	O
out1ptr	pointer
,	O
&	O
out1size	long
,	O
&	O
incremented1	bool
)	O
;	O
}	O
else	O
{	O
res1	long
=	O
utf8conv_carefully	function
(	O
slowly	bool
,	O
&	O
in1ptr	pointer
,	O
&	O
in1size	long
,	O
&	O
out1ptr	pointer
,	O
&	O
out1size	long
,	O
&	O
incremented1	bool
)	O
;	O
}	O
}	O
else	O
if	O
(	O
do_final_flush1	bool
)	O
{	O
if	O
(	O
cd1	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
res1	long
=	O
iconv	function
(	O
cd1	pointer
,	O
NULL	O
,	O
NULL	O
,	O
&	O
out1ptr	pointer
,	O
&	O
out1size	long
)	O
;	O
else	O
res1	long
=	O
0	int
;	O
do_final_flush1	bool
=	O
false	int
;	O
incremented1	bool
=	O
true	int
;	O
}	O
else	O
{	O
res1	long
=	O
0	int
;	O
incremented1	bool
=	O
true	int
;	O
}	O
if	O
(	O
res1	long
==	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
&&	O
!	O
(	O
errno	O
==	O
E2BIG	int
||	O
errno	O
==	O
EINVAL	int
||	O
errno	O
==	O
EILSEQ	int
)	O
)	O
{	O
if	O
(	O
result	pointer
!=	O
initial_result	pointer
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
}	O
return	O
-	O
1	int
;	O
}	O
if	O
(	O
res1	long
==	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
&&	O
errno	O
==	O
EILSEQ	int
&&	O
handler	enum
!=	O
iconveh_error	int
)	O
{	O
if	O
(	O
!	O
incremented1	bool
)	O
{	O
if	O
(	O
in1size	long
==	O
0	int
)	O
abort	function
(	O
)	O
;	O
in1ptr	pointer
++	O
;	O
in1size	long
--	O
;	O
}	O
*	O
out1ptr	pointer
++	O
=	O
'?'	O
;	O
res1	long
=	O
0	int
;	O
}	O
errno1	int
=	O
errno	O
;	O
utf8len	long
=	O
out1ptr	pointer
-	O
utf8buf	array
;	O
if	O
(	O
offsets	pointer
!=	O
NULL	O
||	O
in1size	long
==	O
0	int
||	O
utf8len	long
>	O
utf8bufsize	int
/	O
2	int
||	O
(	O
res1	long
==	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
&&	O
errno1	int
==	O
E2BIG	int
)	O
)	O
{	O
const	O
char	O
*	O
in2ptr	pointer
=	O
utf8buf	array
;	O
size_t	long
in2size	long
=	O
utf8len	long
;	O
while	O
(	O
in2size	long
>	O
0	int
||	O
(	O
in1size	long
==	O
0	int
&&	O
!	O
do_final_flush1	bool
&&	O
do_final_flush2	bool
)	O
)	O
{	O
char	O
*	O
out2ptr	pointer
=	O
result	pointer
+	O
length	long
;	O
size_t	long
out2size	long
=	O
allocated	long
-	O
extra_alloc	long
-	O
length	long
;	O
bool	bool
incremented2	bool
;	O
size_t	long
res2	long
;	O
bool	bool
grow	bool
;	O
if	O
(	O
in2size	long
>	O
0	int
)	O
{	O
if	O
(	O
cd2	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
res2	long
=	O
iconv_carefully	O
(	O
cd2	pointer
,	O
&	O
in2ptr	pointer
,	O
&	O
in2size	long
,	O
&	O
out2ptr	pointer
,	O
&	O
out2size	long
,	O
&	O
incremented2	bool
)	O
;	O
else	O
res2	long
=	O
utf8conv_carefully	function
(	O
false	int
,	O
&	O
in2ptr	pointer
,	O
&	O
in2size	long
,	O
&	O
out2ptr	pointer
,	O
&	O
out2size	long
,	O
&	O
incremented2	bool
)	O
;	O
}	O
else	O
{	O
if	O
(	O
cd2	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
res2	long
=	O
iconv	function
(	O
cd2	pointer
,	O
NULL	O
,	O
NULL	O
,	O
&	O
out2ptr	pointer
,	O
&	O
out2size	long
)	O
;	O
else	O
res2	long
=	O
0	int
;	O
do_final_flush2	bool
=	O
false	int
;	O
incremented2	bool
=	O
true	int
;	O
}	O
length	long
=	O
out2ptr	pointer
-	O
result	pointer
;	O
grow	bool
=	O
(	O
length	long
+	O
extra_alloc	long
>	O
allocated	long
/	O
2	int
)	O
;	O
if	O
(	O
res2	long
==	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
)	O
{	O
if	O
(	O
errno	O
==	O
E2BIG	int
)	O
grow	bool
=	O
true	int
;	O
else	O
if	O
(	O
errno	O
==	O
EINVAL	int
)	O
break	O
;	O
else	O
if	O
(	O
errno	O
==	O
EILSEQ	int
&&	O
handler	enum
!=	O
iconveh_error	int
)	O
{	O
char	O
scratchbuf	array
[	O
10	int
]	O
;	O
size_t	long
scratchlen	long
;	O
ucs4_t	int
uc	int
;	O
const	O
char	O
*	O
inptr	pointer
;	O
size_t	long
insize	long
;	O
size_t	long
res	long
;	O
if	O
(	O
incremented2	bool
)	O
{	O
if	O
(	O
u8_prev	function
(	O
&	O
uc	int
,	O
(	O
const	O
uint8_t	char
*	O
)	O
in2ptr	pointer
,	O
(	O
const	O
uint8_t	char
*	O
)	O
utf8buf	array
)	O
==	O
NULL	O
)	O
abort	function
(	O
)	O
;	O
}	O
else	O
{	O
int	O
n	long
;	O
if	O
(	O
in2size	long
==	O
0	int
)	O
abort	function
(	O
)	O
;	O
n	long
=	O
u8_mbtouc_unsafe	function
(	O
&	O
uc	int
,	O
(	O
const	O
uint8_t	char
*	O
)	O
in2ptr	pointer
,	O
in2size	long
)	O
;	O
in2ptr	pointer
+=	O
n	long
;	O
in2size	long
-=	O
n	long
;	O
}	O
if	O
(	O
handler	enum
==	O
iconveh_escape_sequence	int
)	O
{	O
static	O
char	O
hex	array
[	O
16	int
]	O
=	O
"0123456789ABCDEF"	pointer
;	O
scratchlen	long
=	O
0	int
;	O
scratchbuf	array
[	O
scratchlen	long
++	O
]	O
=	O
'\\'	O
;	O
if	O
(	O
uc	int
<	O
0x10000	int
)	O
scratchbuf	array
[	O
scratchlen	long
++	O
]	O
=	O
'u'	O
;	O
else	O
{	O
scratchbuf	array
[	O
scratchlen	long
++	O
]	O
=	O
'U'	O
;	O
scratchbuf	array
[	O
scratchlen	long
++	O
]	O
=	O
hex	array
[	O
(	O
uc	int
>>	O
28	int
)	O
&	O
15	int
]	O
;	O
scratchbuf	array
[	O
scratchlen	long
++	O
]	O
=	O
hex	array
[	O
(	O
uc	int
>>	O
24	int
)	O
&	O
15	int
]	O
;	O
scratchbuf	array
[	O
scratchlen	long
++	O
]	O
=	O
hex	array
[	O
(	O
uc	int
>>	O
20	int
)	O
&	O
15	int
]	O
;	O
scratchbuf	array
[	O
scratchlen	long
++	O
]	O
=	O
hex	array
[	O
(	O
uc	int
>>	O
16	int
)	O
&	O
15	int
]	O
;	O
}	O
scratchbuf	array
[	O
scratchlen	long
++	O
]	O
=	O
hex	array
[	O
(	O
uc	int
>>	O
12	int
)	O
&	O
15	int
]	O
;	O
scratchbuf	array
[	O
scratchlen	long
++	O
]	O
=	O
hex	array
[	O
(	O
uc	int
>>	O
8	int
)	O
&	O
15	int
]	O
;	O
scratchbuf	array
[	O
scratchlen	long
++	O
]	O
=	O
hex	array
[	O
(	O
uc	int
>>	O
4	int
)	O
&	O
15	int
]	O
;	O
scratchbuf	array
[	O
scratchlen	long
++	O
]	O
=	O
hex	array
[	O
uc	int
&	O
15	int
]	O
;	O
}	O
else	O
{	O
scratchbuf	array
[	O
0	int
]	O
=	O
'?'	O
;	O
scratchlen	long
=	O
1	int
;	O
}	O
inptr	pointer
=	O
scratchbuf	array
;	O
insize	long
=	O
scratchlen	long
;	O
if	O
(	O
cd2	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
res	long
=	O
iconv	function
(	O
cd2	pointer
,	O
(	O
ICONV_CONST	O
char	O
*	O
*	O
)	O
&	O
inptr	pointer
,	O
&	O
insize	long
,	O
&	O
out2ptr	pointer
,	O
&	O
out2size	long
)	O
;	O
else	O
{	O
if	O
(	O
out2size	long
>=	O
insize	long
)	O
{	O
memcpy	function
(	O
out2ptr	pointer
,	O
inptr	pointer
,	O
insize	long
)	O
;	O
out2ptr	pointer
+=	O
insize	long
;	O
out2size	long
-=	O
insize	long
;	O
inptr	pointer
+=	O
insize	long
;	O
insize	long
=	O
0	int
;	O
res	long
=	O
0	int
;	O
}	O
else	O
{	O
errno	O
=	O
E2BIG	int
;	O
res	long
=	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
;	O
}	O
}	O
length	long
=	O
out2ptr	pointer
-	O
result	pointer
;	O
if	O
(	O
res	long
==	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
&&	O
errno	O
==	O
E2BIG	int
)	O
{	O
char	O
*	O
memory	pointer
;	O
allocated	long
=	O
2	int
*	O
allocated	long
;	O
if	O
(	O
length	long
+	O
1	int
+	O
extra_alloc	long
>	O
allocated	long
)	O
abort	function
(	O
)	O
;	O
if	O
(	O
result	pointer
==	O
initial_result	pointer
)	O
memory	pointer
=	O
(	O
char	O
*	O
)	O
malloc	function
(	O
allocated	long
)	O
;	O
else	O
memory	pointer
=	O
(	O
char	O
*	O
)	O
realloc	function
(	O
result	pointer
,	O
allocated	long
)	O
;	O
if	O
(	O
memory	pointer
==	O
NULL	O
)	O
{	O
if	O
(	O
result	pointer
!=	O
initial_result	pointer
)	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
ENOMEM	int
;	O
return	O
-	O
1	int
;	O
}	O
if	O
(	O
result	pointer
==	O
initial_result	pointer
)	O
memcpy	function
(	O
memory	pointer
,	O
initial_result	pointer
,	O
length	long
)	O
;	O
result	pointer
=	O
memory	pointer
;	O
grow	bool
=	O
false	int
;	O
out2ptr	pointer
=	O
result	pointer
+	O
length	long
;	O
out2size	long
=	O
allocated	long
-	O
extra_alloc	long
-	O
length	long
;	O
if	O
(	O
cd2	pointer
!=	O
(	O
iconv_t	pointer
)	O
(	O
-	O
1	int
)	O
)	O
res	long
=	O
iconv	function
(	O
cd2	pointer
,	O
(	O
ICONV_CONST	O
char	O
*	O
*	O
)	O
&	O
inptr	pointer
,	O
&	O
insize	long
,	O
&	O
out2ptr	pointer
,	O
&	O
out2size	long
)	O
;	O
else	O
{	O
if	O
(	O
!	O
(	O
out2size	long
>=	O
insize	long
)	O
)	O
abort	function
(	O
)	O
;	O
memcpy	function
(	O
out2ptr	pointer
,	O
inptr	pointer
,	O
insize	long
)	O
;	O
out2ptr	pointer
+=	O
insize	long
;	O
out2size	long
-=	O
insize	long
;	O
inptr	pointer
+=	O
insize	long
;	O
insize	long
=	O
0	int
;	O
res	long
=	O
0	int
;	O
}	O
length	long
=	O
out2ptr	pointer
-	O
result	pointer
;	O
}	O
if	O
(	O
res	long
==	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
)	O
{	O
if	O
(	O
result	pointer
!=	O
initial_result	pointer
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
}	O
return	O
-	O
1	int
;	O
}	O
}	O
else	O
{	O
if	O
(	O
result	pointer
!=	O
initial_result	pointer
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
}	O
return	O
-	O
1	int
;	O
}	O
}	O
if	O
(	O
!	O
(	O
in2size	long
>	O
0	int
||	O
(	O
in1size	long
==	O
0	int
&&	O
!	O
do_final_flush1	bool
&&	O
do_final_flush2	bool
)	O
)	O
)	O
break	O
;	O
if	O
(	O
grow	bool
)	O
{	O
char	O
*	O
memory	pointer
;	O
allocated	long
=	O
2	int
*	O
allocated	long
;	O
if	O
(	O
result	pointer
==	O
initial_result	pointer
)	O
memory	pointer
=	O
(	O
char	O
*	O
)	O
malloc	function
(	O
allocated	long
)	O
;	O
else	O
memory	pointer
=	O
(	O
char	O
*	O
)	O
realloc	function
(	O
result	pointer
,	O
allocated	long
)	O
;	O
if	O
(	O
memory	pointer
==	O
NULL	O
)	O
{	O
if	O
(	O
result	pointer
!=	O
initial_result	pointer
)	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
ENOMEM	int
;	O
return	O
-	O
1	int
;	O
}	O
if	O
(	O
result	pointer
==	O
initial_result	pointer
)	O
memcpy	function
(	O
memory	pointer
,	O
initial_result	pointer
,	O
length	long
)	O
;	O
result	pointer
=	O
memory	pointer
;	O
}	O
}	O
if	O
(	O
in2size	long
>	O
0	int
)	O
memmove	function
(	O
utf8buf	array
,	O
in2ptr	pointer
,	O
in2size	long
)	O
;	O
utf8len	long
=	O
in2size	long
;	O
}	O
if	O
(	O
res1	long
==	O
(	O
size_t	long
)	O
(	O
-	O
1	int
)	O
)	O
{	O
if	O
(	O
errno1	int
==	O
EINVAL	int
)	O
in1size	long
=	O
0	int
;	O
else	O
if	O
(	O
errno1	int
==	O
EILSEQ	int
)	O
{	O
if	O
(	O
result	pointer
!=	O
initial_result	pointer
)	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
errno1	int
;	O
return	O
-	O
1	int
;	O
}	O
}	O
}	O
}	O
done	O
:	O
if	O
(	O
result	pointer
==	O
tmpbuf	O
)	O
{	O
size_t	long
memsize	long
=	O
length	long
+	O
extra_alloc	long
;	O
if	O
(	O
*	O
resultp	pointer
!=	O
NULL	O
&&	O
*	O
lengthp	pointer
>=	O
memsize	long
)	O
result	pointer
=	O
*	O
resultp	pointer
;	O
else	O
{	O
char	O
*	O
memory	pointer
;	O
memory	pointer
=	O
(	O
char	O
*	O
)	O
malloc	function
(	O
memsize	long
>	O
0	int
?	O
memsize	long
:	O
1	int
)	O
;	O
if	O
(	O
memory	pointer
!=	O
NULL	O
)	O
result	pointer
=	O
memory	pointer
;	O
else	O
{	O
errno	O
=	O
ENOMEM	int
;	O
return	O
-	O
1	int
;	O
}	O
}	O
memcpy	function
(	O
result	pointer
,	O
tmpbuf	O
,	O
length	long
)	O
;	O
}	O
else	O
if	O
(	O
result	pointer
!=	O
*	O
resultp	pointer
&&	O
length	long
+	O
extra_alloc	long
<	O
allocated	long
)	O
{	O
size_t	long
memsize	long
=	O
length	long
+	O
extra_alloc	long
;	O
char	O
*	O
memory	pointer
;	O
memory	pointer
=	O
(	O
char	O
*	O
)	O
realloc	function
(	O
result	pointer
,	O
memsize	long
>	O
0	int
?	O
memsize	long
:	O
1	int
)	O
;	O
if	O
(	O
memory	pointer
!=	O
NULL	O
)	O
result	pointer
=	O
memory	pointer
;	O
}	O
*	O
resultp	pointer
=	O
result	pointer
;	O
*	O
lengthp	pointer
=	O
length	long
;	O
return	O
0	int
;	O
}	O
int	O
mem_cd_iconveh	function
(	O
const	O
char	O
*	O
src	pointer
,	O
size_t	long
srclen	long
,	O
const	O
iconveh_t	struct
*	O
cd	pointer
,	O
enum	O
iconv_ilseq_handler	enum
handler	enum
,	O
size_t	long
*	O
offsets	pointer
,	O
char	O
*	O
*	O
resultp	pointer
,	O
size_t	long
*	O
lengthp	pointer
)	O
{	O
return	O
mem_cd_iconveh_internal	function
(	O
src	pointer
,	O
srclen	long
,	O
cd	pointer
->	O
cd	pointer
,	O
cd	pointer
->	O
cd1	pointer
,	O
cd	pointer
->	O
cd2	pointer
,	O
handler	enum
,	O
0	int
,	O
offsets	pointer
,	O
resultp	pointer
,	O
lengthp	pointer
)	O
;	O
}	O
char	O
*	O
str_cd_iconveh	function
(	O
const	O
char	O
*	O
src	pointer
,	O
const	O
iconveh_t	struct
*	O
cd	pointer
,	O
enum	O
iconv_ilseq_handler	enum
handler	enum
)	O
{	O
char	O
*	O
result	pointer
=	O
NULL	O
;	O
size_t	long
length	long
=	O
0	int
;	O
int	O
retval	int
=	O
mem_cd_iconveh_internal	function
(	O
src	pointer
,	O
strlen	function
(	O
src	pointer
)	O
,	O
cd	pointer
->	O
cd	pointer
,	O
cd	pointer
->	O
cd1	pointer
,	O
cd	pointer
->	O
cd2	pointer
,	O
handler	enum
,	O
1	int
,	O
NULL	O
,	O
&	O
result	pointer
,	O
&	O
length	long
)	O
;	O
if	O
(	O
retval	int
<	O
0	int
)	O
{	O
if	O
(	O
result	pointer
!=	O
NULL	O
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
}	O
return	O
NULL	O
;	O
}	O
result	pointer
[	O
length	long
]	O
=	O
'\0'	O
;	O
return	O
result	pointer
;	O
}	O
int	O
mem_iconveh	function
(	O
const	O
char	O
*	O
src	pointer
,	O
size_t	long
srclen	long
,	O
const	O
char	O
*	O
from_codeset	pointer
,	O
const	O
char	O
*	O
to_codeset	pointer
,	O
enum	O
iconv_ilseq_handler	enum
handler	enum
,	O
size_t	long
*	O
offsets	pointer
,	O
char	O
*	O
*	O
resultp	pointer
,	O
size_t	long
*	O
lengthp	pointer
)	O
{	O
if	O
(	O
srclen	long
==	O
0	int
)	O
{	O
*	O
lengthp	pointer
=	O
0	int
;	O
return	O
0	int
;	O
}	O
else	O
if	O
(	O
offsets	pointer
==	O
NULL	O
&&	O
c_strcasecmp	function
(	O
from_codeset	pointer
,	O
to_codeset	pointer
)	O
==	O
0	int
)	O
{	O
char	O
*	O
result	pointer
;	O
if	O
(	O
*	O
resultp	pointer
!=	O
NULL	O
&&	O
*	O
lengthp	pointer
>=	O
srclen	long
)	O
result	pointer
=	O
*	O
resultp	pointer
;	O
else	O
{	O
result	pointer
=	O
(	O
char	O
*	O
)	O
malloc	function
(	O
srclen	long
)	O
;	O
if	O
(	O
result	pointer
==	O
NULL	O
)	O
{	O
errno	O
=	O
ENOMEM	int
;	O
return	O
-	O
1	int
;	O
}	O
}	O
memcpy	function
(	O
result	pointer
,	O
src	pointer
,	O
srclen	long
)	O
;	O
*	O
resultp	pointer
=	O
result	pointer
;	O
*	O
lengthp	pointer
=	O
srclen	long
;	O
return	O
0	int
;	O
}	O
else	O
{	O
iconveh_t	struct
cd	pointer
;	O
char	O
*	O
result	pointer
;	O
size_t	long
length	long
;	O
int	O
retval	int
;	O
if	O
(	O
iconveh_open	function
(	O
to_codeset	pointer
,	O
from_codeset	pointer
,	O
&	O
cd	pointer
)	O
<	O
0	int
)	O
return	O
-	O
1	int
;	O
result	pointer
=	O
*	O
resultp	pointer
;	O
length	long
=	O
*	O
lengthp	pointer
;	O
retval	int
=	O
mem_cd_iconveh	function
(	O
src	pointer
,	O
srclen	long
,	O
&	O
cd	pointer
,	O
handler	enum
,	O
offsets	pointer
,	O
&	O
result	pointer
,	O
&	O
length	long
)	O
;	O
if	O
(	O
retval	int
<	O
0	int
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
iconveh_close	function
(	O
&	O
cd	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
}	O
else	O
{	O
if	O
(	O
iconveh_close	function
(	O
&	O
cd	pointer
)	O
<	O
0	int
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
if	O
(	O
result	pointer
!=	O
*	O
resultp	pointer
&&	O
result	pointer
!=	O
NULL	O
)	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
return	O
-	O
1	int
;	O
}	O
*	O
resultp	pointer
=	O
result	pointer
;	O
*	O
lengthp	pointer
=	O
length	long
;	O
}	O
return	O
retval	int
;	O
}	O
}	O
char	O
*	O
str_iconveh	function
(	O
const	O
char	O
*	O
src	pointer
,	O
const	O
char	O
*	O
from_codeset	pointer
,	O
const	O
char	O
*	O
to_codeset	pointer
,	O
enum	O
iconv_ilseq_handler	enum
handler	enum
)	O
{	O
if	O
(	O
*	O
src	pointer
==	O
'\0'	O
||	O
c_strcasecmp	function
(	O
from_codeset	pointer
,	O
to_codeset	pointer
)	O
==	O
0	int
)	O
{	O
char	O
*	O
result	pointer
=	O
strdup	function
(	O
src	pointer
)	O
;	O
if	O
(	O
result	pointer
==	O
NULL	O
)	O
errno	O
=	O
ENOMEM	int
;	O
return	O
result	pointer
;	O
}	O
else	O
{	O
iconveh_t	struct
cd	pointer
;	O
char	O
*	O
result	pointer
;	O
if	O
(	O
iconveh_open	function
(	O
to_codeset	pointer
,	O
from_codeset	pointer
,	O
&	O
cd	pointer
)	O
<	O
0	int
)	O
return	O
NULL	O
;	O
result	pointer
=	O
str_cd_iconveh	function
(	O
src	pointer
,	O
&	O
cd	pointer
,	O
handler	enum
)	O
;	O
if	O
(	O
result	pointer
==	O
NULL	O
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
iconveh_close	function
(	O
&	O
cd	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
}	O
else	O
{	O
if	O
(	O
iconveh_close	function
(	O
&	O
cd	pointer
)	O
<	O
0	int
)	O
{	O
int	O
saved_errno	int
=	O
errno	O
;	O
free	function
(	O
result	pointer
)	O
;	O
errno	O
=	O
saved_errno	int
;	O
return	O
NULL	O
;	O
}	O
}	O
return	O
result	pointer
;	O
}	O
}	O
