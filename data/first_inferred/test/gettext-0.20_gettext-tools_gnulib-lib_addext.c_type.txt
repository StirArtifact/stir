void	O
addext	function
(	O
char	O
*	O
filename	pointer
,	O
char	O
const	O
*	O
ext	array
,	O
char	O
e	pointer
)	O
{	O
char	O
*	O
s	pointer
=	O
basename	function
(	O
filename	pointer
)	O
;	O
size_t	long
slen	long
=	O
strlen	function
(	O
s	pointer
)	O
,	O
extlen	array
=	O
strlen	function
(	O
ext	array
)	O
;	O
long	O
slen_max	long
=	O
-	O
1	int
;	O
if	O
(	O
slen	long
+	O
extlen	int
<=	O
_POSIX_NAME_MAX	int
&&	O
!	O
HAVE_DOS_FILE_NAMES	int
)	O
slen_max	pointer
=	O
_POSIX_NAME_MAX	pointer
;	O
else	O
if	O
(	O
s	pointer
==	O
filename	pointer
)	O
slen_max	pointer
=	O
pathconf	function
(	O
"."	pointer
,	O
_PC_NAME_MAX	pointer
)	O
;	O
else	O
{	O
char	O
c	int
=	O
*	O
s	pointer
;	O
*	O
s	pointer
=	O
0	int
;	O
slen_max	pointer
=	O
pathconf	function
(	O
filename	pointer
,	O
_PC_NAME_MAX	pointer
)	O
;	O
*	O
s	pointer
=	O
c	int
;	O
}	O
if	O
(	O
slen_max	long
<	O
0	int
)	O
slen_max	int
=	O
HAVE_LONG_FILE_NAMES	int
?	O
255	int
:	O
14	int
;	O
if	O
(	O
HAVE_DOS_FILE_NAMES	int
&&	O
slen_max	int
<=	O
12	int
)	O
{	O
char	O
*	O
dot	pointer
=	O
strchr	function
(	O
s	pointer
,	O
'.'	O
)	O
;	O
if	O
(	O
dot	pointer
)	O
{	O
slen	long
-=	O
dot	long
+	O
1	int
-	O
s	array
;	O
s	array
=	O
dot	long
+	O
1	int
;	O
slen_max	int
=	O
3	int
;	O
}	O
else	O
slen_max	int
=	O
8	int
;	O
extlen	int
=	O
9	int
;	O
}	O
if	O
(	O
slen	long
+	O
extlen	int
<=	O
slen_max	int
)	O
strcpy	function
(	O
s	array
+	O
slen	long
,	O
ext	array
)	O
;	O
else	O
{	O
if	O
(	O
slen_max	long
<=	O
slen	long
)	O
slen	long
=	O
slen_max	int
-	O
1	int
;	O
s	array
[	O
slen	long
]	O
=	O
e	int
;	O
s	array
[	O
slen	long
+	O
1	int
]	O
=	O
0	int
;	O
}	O
}	O