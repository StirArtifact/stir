typedef	O
struct	O
{	O
EPChar	*
script_code	*
;	O
OBJID	int
interpreter	int
;	O
EDMAT_BUFFER	struct
private	struct
;	O
}	O
DtEDMA_SCRIPT	struct
;	O
ESint32	int
EDMAPROC	O
EDMA_SCRIPTset_scriptZrS32	function
(	O
OBJID	int
IdObj	int
,	O
EPChar	*
script_name	*
)	O
{	O
DtEDMA_SCRIPT	struct
*	O
m	*
;	O
m	*
=	O
(	O
DtEDMA_SCRIPT	struct
*	O
)	O
edma_get_data_ref	function
(	O
IdObj	int
)	O
;	O
if	O
(	O
strstr	function
(	O
script_name	int
,	O
".py"	*
)	O
)	O
{	O
edma_met3	function
(	O
IdObj	int
,	O
"ANNA_PYTHON_INTERP@INTERPRETER<Initialize"	*
)	O
;	O
edma_met3	function
(	O
IdObj	int
,	O
"Run_Script"	*
,	O
script_name	*
)	O
;	O
return	O
0	int
;	O
}	O
return	O
0	int
;	O
}	O
ESint32	int
EDMAPROC	O
EDMA_SCRIPTupdate_objectOOrS32	function
(	O
OBJID	int
IdObj	int
,	O
OBJID	int
newid	int
,	O
OBJID	int
oldid	int
)	O
{	O
DtEDMA_SCRIPT	struct
*	O
m	*
;	O
EChar	char
cmd	array
[	O
1024	int
]	O
;	O
m	*
=	O
(	O
DtEDMA_SCRIPT	struct
*	O
)	O
edma_get_data_ref	function
(	O
IdObj	int
)	O
;	O
sprintf	function
(	O
cmd	int
,	O
"update (%ld,%ld);"	*
,	O
newid	*
,	O
oldid	*
)	O
;	O
edma_met3	function
(	O
IdObj	int
,	O
"Run_SimpleString"	*
,	O
cmd	int
)	O
;	O
return	O
0	int
;	O
}	O
ESint32	int
EDMAPROC	O
EDMA_SCRIPTrunrS32	function
(	O
OBJID	int
IdObj	int
)	O
{	O
DtEDMA_SCRIPT	struct
*	O
m	*
;	O
m	*
=	O
(	O
DtEDMA_SCRIPT	struct
*	O
)	O
edma_get_data_ref	function
(	O
IdObj	int
)	O
;	O
return	O
0	int
;	O
}	O
ESint32	int
EDMAPROC	O
EDMA_SCRIPTborn	function
(	O
OBJID	int
IdObj	int
)	O
{	O
DtEDMA_SCRIPT	struct
*	O
m	*
;	O
m	*
=	O
(	O
DtEDMA_SCRIPT	struct
*	O
)	O
edma_get_data_ref	function
(	O
IdObj	int
)	O
;	O
m	*
->	O
script_code	*
=	O
NULL	O
;	O
m	*
->	O
interpreter	int
=	O
-	O
1	int
;	O
return	O
0	int
;	O
}	O
ESint32	int
EDMAPROC	O
EDMA_SCRIPTrip	function
(	O
OBJID	int
IdObj	int
)	O
{	O
DtEDMA_SCRIPT	struct
*	O
m	*
;	O
m	*
=	O
(	O
DtEDMA_SCRIPT	struct
*	O
)	O
edma_get_data_ref	function
(	O
IdObj	int
)	O
;	O
edma_printf_obj	function
(	O
IdObj	int
,	O
"Ddestroying Object..."	*
)	O
;	O
edma_met3	function
(	O
IdObj	int
,	O
"Finalize"	*
)	O
;	O
if	O
(	O
m	*
->	O
interpreter	int
!=	O
-	O
1	int
)	O
edma_free_obj	function
(	O
m	*
->	O
interpreter	int
)	O
;	O
return	O
0	int
;	O
}	O
ESint32	int
EDMA_SCRIPT_class_factory	function
(	O
)	O
{	O
CLASSID	int
cid	int
;	O
cid	int
=	O
edma_idf_get_free_class_id	function
(	O
EDMA_LOCAL_CLASS	int
)	O
;	O
edma_idf_set_class_name	function
(	O
cid	int
,	O
"EDMA_SCRIPT"	*
)	O
;	O
edma_idf_set_class_namespace	function
(	O
cid	int
,	O
"system"	*
)	O
;	O
edma_idf_set_class_version	function
(	O
cid	int
,	O
0	int
,	O
0	int
)	O
;	O
edma_add_local_class_property	function
(	O
cid	int
,	O
"script_code"	*
,	O
DT_EZSTRING	int
,	O
E_L	int
,	O
0	int
)	O
;	O
edma_add_local_class_property	function
(	O
cid	int
,	O
"interpreter"	*
,	O
DT_EOBJECT	int
,	O
E_L	int
,	O
0	int
)	O
;	O
edma_add_local_class_property	function
(	O
cid	int
,	O
"private"	*
,	O
DT_EBUFFER	int
,	O
E_L	int
,	O
0	int
)	O
;	O
edma_add_local_class_method	function
(	O
cid	int
,	O
"set_script"	*
,	O
"ZrS32"	*
,	O
(	O
PPROC	*
)	O
EDMA_SCRIPTset_scriptZrS32	function
,	O
1	int
,	O
0	int
,	O
0	int
)	O
;	O
edma_add_local_class_method	function
(	O
cid	int
,	O
"update_object"	*
,	O
"OOrS32"	*
,	O
(	O
PPROC	*
)	O
EDMA_SCRIPTupdate_objectOOrS32	function
,	O
1	int
,	O
0	int
,	O
0	int
)	O
;	O
edma_add_local_class_method	function
(	O
cid	int
,	O
"run"	*
,	O
"rS32"	*
,	O
(	O
PPROC	*
)	O
EDMA_SCRIPTrunrS32	function
,	O
1	int
,	O
0	int
,	O
0	int
)	O
;	O
edma_add_local_class_method	function
(	O
cid	int
,	O
"born"	*
,	O
""	*
,	O
(	O
PPROC	*
)	O
EDMA_SCRIPTborn	function
,	O
0	int
,	O
0	int
,	O
0	int
)	O
;	O
edma_add_local_class_method	function
(	O
cid	int
,	O
"rip"	*
,	O
""	*
,	O
(	O
PPROC	*
)	O
EDMA_SCRIPTrip	function
,	O
0	int
,	O
0	int
,	O
0	int
)	O
;	O
edma_idf_set_class_id	function
(	O
cid	int
)	O
;	O
return	O
0	int
;	O
}	O