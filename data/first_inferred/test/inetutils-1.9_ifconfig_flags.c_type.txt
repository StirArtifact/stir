struct	O
if_flag	struct
{	O
const	O
char	O
*	O
name	pointer
;	O
int	O
mask	int
;	O
int	O
rev	int
;	O
}	O
if_flags	array
[	O
]	O
=	O
{	O
{	O
"UP"	pointer
,	O
IFF_UP	int
}	O
,	O
{	O
"BROADCAST"	pointer
,	O
IFF_BROADCAST	int
}	O
,	O
{	O
"DEBUG"	pointer
,	O
IFF_DEBUG	int
}	O
,	O
{	O
"LOOPBACK"	pointer
,	O
IFF_LOOPBACK	int
}	O
,	O
{	O
"POINTOPOINT"	pointer
,	O
IFF_POINTOPOINT	int
}	O
,	O
{	O
"RUNNING"	pointer
,	O
IFF_RUNNING	int
}	O
,	O
{	O
"NOARP"	pointer
,	O
IFF_NOARP	int
}	O
,	O
{	O
"ARP"	pointer
,	O
IFF_NOARP	int
,	O
1	int
}	O
,	O
{	O
"PROMISC"	pointer
,	O
IFF_PROMISC	int
}	O
,	O
{	O
"ALLMULTI"	pointer
,	O
IFF_ALLMULTI	int
}	O
,	O
{	O
"MULTICAST"	pointer
,	O
IFF_MULTICAST	int
}	O
,	O
{	O
"NOTRAILERS"	pointer
,	O
IFF_NOTRAILERS	int
}	O
,	O
{	O
"TRAILERS"	pointer
,	O
IFF_NOTRAILERS	int
,	O
1	int
}	O
,	O
{	O
"MASTER"	pointer
,	O
IFF_MASTER	int
}	O
,	O
{	O
"SLAVE"	pointer
,	O
IFF_SLAVE	int
}	O
,	O
{	O
"PORTSEL"	pointer
,	O
IFF_PORTSEL	int
}	O
,	O
{	O
"AUTOMEDIA"	pointer
,	O
IFF_AUTOMEDIA	int
}	O
,	O
{	O
"DYNAMIC"	pointer
,	O
IFF_DYNAMIC	int
}	O
,	O
{	O
"NOTRAILERS"	pointer
,	O
IFF_NOTRAILERS	int
}	O
,	O
{	O
"TRAILERS"	pointer
,	O
IFF_NOTRAILERS	int
,	O
1	int
}	O
,	O
{	O
NULL	O
}	O
}	O
;	O
static	O
int	O
cmpname	function
(	O
const	O
void	O
*	O
a	pointer
,	O
const	O
void	O
*	O
b	pointer
)	O
{	O
return	O
strcmp	function
(	O
*	O
(	O
const	O
char	O
*	O
*	O
)	O
a	pointer
,	O
*	O
(	O
const	O
char	O
*	O
*	O
)	O
b	pointer
)	O
;	O
}	O
char	O
*	O
if_list_flags	function
(	O
const	O
char	O
*	O
prefix	pointer
)	O
{	O
size_t	long
len	long
=	O
0	int
;	O
struct	O
if_flag	struct
*	O
fp	pointer
;	O
char	O
*	O
*	O
fnames	pointer
;	O
size_t	long
i	long
,	O
fcount	long
;	O
char	O
*	O
str	pointer
,	O
*	O
p	pointer
;	O
for	O
(	O
fp	pointer
=	O
if_flags	array
,	O
len	long
=	O
0	int
,	O
fcount	long
=	O
0	int
;	O
fp	pointer
->	O
name	pointer
;	O
fp	pointer
++	O
)	O
if	O
(	O
!	O
fp	pointer
->	O
rev	int
)	O
{	O
fcount	long
++	O
;	O
len	long
+=	O
strlen	function
(	O
fp	pointer
->	O
name	pointer
)	O
+	O
1	int
;	O
}	O
fcount	long
=	O
sizeof	O
(	O
if_flags	array
)	O
/	O
sizeof	O
(	O
if_flags	array
[	O
0	int
]	O
)	O
-	O
1	int
;	O
fnames	pointer
=	O
xmalloc	function
(	O
fcount	long
*	O
sizeof	O
(	O
fnames	pointer
[	O
0	int
]	O
)	O
+	O
len	long
)	O
;	O
p	pointer
=	O
(	O
char	O
*	O
)	O
(	O
fnames	pointer
+	O
fcount	long
)	O
;	O
for	O
(	O
fp	pointer
=	O
if_flags	array
,	O
i	long
=	O
0	int
;	O
fp	pointer
->	O
name	pointer
;	O
fp	pointer
++	O
)	O
if	O
(	O
!	O
fp	pointer
->	O
rev	int
)	O
{	O
const	O
char	O
*	O
q	pointer
;	O
fnames	pointer
[	O
i	long
++	O
]	O
=	O
p	pointer
;	O
q	pointer
=	O
fp	pointer
->	O
name	pointer
;	O
if	O
(	O
strncmp	function
(	O
q	pointer
,	O
"NO"	pointer
,	O
2	int
)	O
==	O
0	int
)	O
q	pointer
+=	O
2	int
;	O
for	O
(	O
;	O
*	O
q	pointer
;	O
q	pointer
++	O
)	O
*	O
p	pointer
++	O
=	O
tolower	function
(	O
*	O
q	pointer
)	O
;	O
*	O
p	pointer
++	O
=	O
0	int
;	O
}	O
fcount	long
=	O
i	long
;	O
qsort	function
(	O
fnames	pointer
,	O
fcount	long
,	O
sizeof	O
(	O
fnames	pointer
[	O
0	int
]	O
)	O
,	O
cmpname	function
)	O
;	O
len	long
+=	O
2	int
*	O
fcount	long
;	O
if	O
(	O
prefix	pointer
)	O
len	long
+=	O
strlen	function
(	O
prefix	pointer
)	O
;	O
str	pointer
=	O
xmalloc	function
(	O
len	long
+	O
1	int
)	O
;	O
p	pointer
=	O
str	pointer
;	O
if	O
(	O
prefix	pointer
)	O
{	O
strcpy	function
(	O
p	pointer
,	O
prefix	pointer
)	O
;	O
p	pointer
+=	O
strlen	function
(	O
prefix	pointer
)	O
;	O
}	O
for	O
(	O
i	long
=	O
0	int
;	O
i	long
<	O
fcount	long
;	O
i	long
++	O
)	O
{	O
if	O
(	O
i	long
&&	O
strcmp	function
(	O
fnames	pointer
[	O
i	long
-	O
1	int
]	O
,	O
fnames	pointer
[	O
i	long
]	O
)	O
==	O
0	int
)	O
continue	O
;	O
strcpy	function
(	O
p	pointer
,	O
fnames	pointer
[	O
i	long
]	O
)	O
;	O
p	pointer
+=	O
strlen	function
(	O
fnames	pointer
[	O
i	long
]	O
)	O
;	O
if	O
(	O
++	O
i	long
<	O
fcount	long
)	O
{	O
*	O
p	pointer
++	O
=	O
','	O
;	O
*	O
p	pointer
++	O
=	O
' '	O
;	O
}	O
else	O
break	O
;	O
}	O
*	O
p	pointer
=	O
0	int
;	O
free	function
(	O
fnames	pointer
)	O
;	O
return	O
str	pointer
;	O
}	O
const	O
char	O
*	O
if_flagtoname	function
(	O
int	O
flag	int
,	O
const	O
char	O
*	O
avoid	pointer
)	O
{	O
struct	O
if_flag	struct
*	O
fp	pointer
;	O
const	O
char	O
*	O
first_match	pointer
=	O
NULL	O
;	O
char	O
*	O
start	pointer
;	O
for	O
(	O
fp	pointer
=	O
if_flags	array
;	O
;	O
fp	pointer
++	O
)	O
{	O
if	O
(	O
!	O
fp	pointer
->	O
name	pointer
)	O
return	O
NULL	O
;	O
if	O
(	O
flag	int
==	O
fp	pointer
->	O
mask	int
&&	O
!	O
fp	pointer
->	O
rev	int
)	O
break	O
;	O
}	O
first_match	pointer
=	O
fp	pointer
->	O
name	pointer
;	O
if	O
(	O
avoid	pointer
)	O
do	O
{	O
start	pointer
=	O
strstr	function
(	O
avoid	pointer
,	O
fp	pointer
->	O
name	pointer
)	O
;	O
if	O
(	O
!	O
start	pointer
||	O
*	O
(	O
start	pointer
-	O
1	int
)	O
!=	O
':'	O
||	O
*	O
(	O
start	pointer
+	O
strlen	function
(	O
fp	pointer
->	O
name	pointer
)	O
)	O
!=	O
':'	O
)	O
break	O
;	O
fp	pointer
++	O
;	O
}	O
while	O
(	O
fp	pointer
->	O
name	pointer
)	O
;	O
if	O
(	O
fp	pointer
->	O
name	pointer
)	O
return	O
fp	pointer
->	O
name	pointer
;	O
else	O
return	O
first_match	pointer
;	O
}	O
int	O
if_nametoflag	function
(	O
const	O
char	O
*	O
name	pointer
,	O
size_t	long
len	long
,	O
int	O
*	O
prev	pointer
)	O
{	O
struct	O
if_flag	struct
*	O
fp	pointer
;	O
int	O
rev	int
=	O
0	int
;	O
if	O
(	O
len	long
>	O
1	int
&&	O
name	pointer
[	O
0	int
]	O
==	O
'-'	O
)	O
{	O
name	pointer
++	O
;	O
len	long
--	O
;	O
rev	int
=	O
1	int
;	O
}	O
else	O
if	O
(	O
len	long
>	O
2	int
&&	O
strncasecmp	function
(	O
name	pointer
,	O
"NO"	pointer
,	O
2	int
)	O
==	O
0	int
)	O
{	O
name	pointer
+=	O
2	int
;	O
len	long
-=	O
2	int
;	O
rev	int
=	O
1	int
;	O
}	O
for	O
(	O
fp	pointer
=	O
if_flags	array
;	O
fp	pointer
->	O
name	pointer
;	O
fp	pointer
++	O
)	O
{	O
if	O
(	O
strncasecmp	function
(	O
fp	pointer
->	O
name	pointer
,	O
name	pointer
,	O
len	long
)	O
==	O
0	int
)	O
{	O
*	O
prev	pointer
=	O
fp	pointer
->	O
rev	int
^	O
rev	int
;	O
return	O
fp	pointer
->	O
mask	int
;	O
}	O
}	O
return	O
0	int
;	O
}	O
int	O
if_nameztoflag	function
(	O
const	O
char	O
*	O
name	pointer
,	O
int	O
*	O
prev	pointer
)	O
{	O
return	O
if_nametoflag	function
(	O
name	pointer
,	O
strlen	function
(	O
name	pointer
)	O
,	O
prev	pointer
)	O
;	O
}	O
struct	O
if_flag_char	struct
{	O
int	O
mask	int
;	O
int	O
ch	int
;	O
}	O
;	O
static	O
struct	O
if_flag_char	struct
flag_char_tab	array
[	O
]	O
=	O
{	O
{	O
IFF_ALLMULTI	int
,	O
'A'	O
}	O
,	O
{	O
IFF_BROADCAST	int
,	O
'B'	O
}	O
,	O
{	O
IFF_DEBUG	int
,	O
'D'	O
}	O
,	O
{	O
IFF_LOOPBACK	int
,	O
'L'	O
}	O
,	O
{	O
IFF_MULTICAST	int
,	O
'M'	O
}	O
,	O
{	O
IFF_PROMISC	int
,	O
'P'	O
}	O
,	O
{	O
IFF_NOTRAILERS	int
,	O
'N'	O
}	O
,	O
{	O
IFF_NOARP	int
,	O
'O'	O
}	O
,	O
{	O
IFF_POINTOPOINT	int
,	O
'P'	O
}	O
,	O
{	O
IFF_SLAVE	int
,	O
's'	O
}	O
,	O
{	O
IFF_MASTER	int
,	O
'm'	O
}	O
,	O
{	O
IFF_RUNNING	int
,	O
'R'	O
}	O
,	O
{	O
IFF_UP	int
,	O
'U'	O
}	O
,	O
{	O
0	int
}	O
}	O
;	O
void	O
if_format_flags	function
(	O
int	O
flags	int
,	O
char	O
*	O
buf	pointer
,	O
size_t	long
size	long
)	O
{	O
struct	O
if_flag_char	struct
*	O
fp	pointer
;	O
size	long
--	O
;	O
for	O
(	O
fp	pointer
=	O
flag_char_tab	array
;	O
size	long
&&	O
fp	pointer
->	O
mask	int
;	O
fp	pointer
++	O
)	O
if	O
(	O
fp	pointer
->	O
mask	int
&	O
flags	int
)	O
{	O
*	O
buf	pointer
++	O
=	O
fp	pointer
->	O
ch	int
;	O
size	long
--	O
;	O
}	O
*	O
buf	pointer
=	O
0	int
;	O
}	O
int	O
print_if_flags	function
(	O
int	O
flags	int
,	O
const	O
char	O
*	O
avoid	pointer
,	O
char	O
separator	char
)	O
{	O
int	O
f	int
=	O
1	int
;	O
const	O
char	O
*	O
name	pointer
;	O
int	O
first	int
=	O
1	int
;	O
int	O
length	int
=	O
0	int
;	O
while	O
(	O
flags	int
&&	O
f	int
)	O
{	O
if	O
(	O
f	int
&	O
flags	int
)	O
{	O
name	pointer
=	O
if_flagtoname	function
(	O
f	int
,	O
avoid	pointer
)	O
;	O
if	O
(	O
name	pointer
)	O
{	O
if	O
(	O
!	O
first	int
)	O
{	O
putchar	function
(	O
separator	char
)	O
;	O
length	int
++	O
;	O
}	O
length	int
+=	O
printf	function
(	O
"%s"	pointer
,	O
name	pointer
)	O
;	O
flags	int
&=	O
~	O
f	int
;	O
first	int
=	O
0	int
;	O
}	O
}	O
f	int
=	O
f	int
<<	O
1	int
;	O
}	O
if	O
(	O
flags	int
)	O
{	O
if	O
(	O
!	O
first	int
)	O
{	O
putchar	function
(	O
separator	char
)	O
;	O
length	int
++	O
;	O
}	O
length	int
+=	O
printf	function
(	O
"%#x"	pointer
,	O
flags	int
)	O
;	O
}	O
return	O
length	int
;	O
}	O