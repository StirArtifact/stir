gsl_ntuple	struct
*	O
gsl_ntuple_create	function
(	O
char	O
*	O
filename	*
,	O
void	O
*	O
ntuple_data	*
,	O
size_t	long
size	long
)	O
{	O
gsl_ntuple	struct
*	O
ntuple	*
=	O
(	O
gsl_ntuple	struct
*	O
)	O
malloc	function
(	O
sizeof	O
(	O
gsl_ntuple	struct
)	O
)	O
;	O
if	O
(	O
ntuple	*
==	O
0	int
)	O
{	O
GSL_ERROR_VAL	O
(	O
"failed to allocate space for ntuple struct"	*
,	O
GSL_ENOMEM	int
,	O
0	int
)	O
;	O
}	O
ntuple	*
->	O
ntuple_data	*
=	O
ntuple_data	*
;	O
ntuple	*
->	O
size	long
=	O
size	long
;	O
ntuple	*
->	O
file	*
=	O
fopen	function
(	O
filename	*
,	O
"wb"	*
)	O
;	O
if	O
(	O
ntuple	*
->	O
file	*
==	O
0	int
)	O
{	O
free	function
(	O
ntuple	*
)	O
;	O
GSL_ERROR_VAL	O
(	O
"unable to create ntuple file"	*
,	O
GSL_EFAILED	int
,	O
0	int
)	O
;	O
}	O
return	O
ntuple	*
;	O
}	O
gsl_ntuple	struct
*	O
gsl_ntuple_open	function
(	O
char	O
*	O
filename	*
,	O
void	O
*	O
ntuple_data	*
,	O
size_t	long
size	long
)	O
{	O
gsl_ntuple	struct
*	O
ntuple	*
=	O
(	O
gsl_ntuple	struct
*	O
)	O
malloc	function
(	O
sizeof	O
(	O
gsl_ntuple	struct
)	O
)	O
;	O
if	O
(	O
ntuple	*
==	O
0	int
)	O
{	O
GSL_ERROR_VAL	O
(	O
"failed to allocate space for ntuple struct"	*
,	O
GSL_ENOMEM	int
,	O
0	int
)	O
;	O
}	O
ntuple	*
->	O
ntuple_data	*
=	O
ntuple_data	*
;	O
ntuple	*
->	O
size	long
=	O
size	long
;	O
ntuple	*
->	O
file	*
=	O
fopen	function
(	O
filename	*
,	O
"rb"	*
)	O
;	O
if	O
(	O
ntuple	*
->	O
file	*
==	O
0	int
)	O
{	O
free	function
(	O
ntuple	*
)	O
;	O
GSL_ERROR_VAL	O
(	O
"unable to open ntuple file for reading"	*
,	O
GSL_EFAILED	int
,	O
0	int
)	O
;	O
}	O
return	O
ntuple	*
;	O
}	O
int	O
gsl_ntuple_write	function
(	O
gsl_ntuple	struct
*	O
ntuple	*
)	O
{	O
size_t	long
nwrite	long
;	O
nwrite	long
=	O
fwrite	function
(	O
ntuple	*
->	O
ntuple_data	*
,	O
ntuple	*
->	O
size	long
,	O
1	int
,	O
ntuple	*
->	O
file	*
)	O
;	O
if	O
(	O
nwrite	int
!=	O
1	int
)	O
{	O
GSL_ERROR	O
(	O
"failed to write ntuple entry to file"	*
,	O
GSL_EFAILED	int
)	O
;	O
}	O
return	O
GSL_SUCCESS	int
;	O
}	O
int	O
gsl_ntuple_bookdata	function
(	O
gsl_ntuple	struct
*	O
ntuple	*
)	O
{	O
return	O
gsl_ntuple_write	function
(	O
ntuple	*
)	O
;	O
}	O
int	O
gsl_ntuple_read	function
(	O
gsl_ntuple	struct
*	O
ntuple	*
)	O
{	O
size_t	long
nread	long
;	O
nread	long
=	O
fread	function
(	O
ntuple	*
->	O
ntuple_data	*
,	O
ntuple	*
->	O
size	long
,	O
1	int
,	O
ntuple	*
->	O
file	*
)	O
;	O
if	O
(	O
nread	long
==	O
0	int
&&	O
feof	function
(	O
ntuple	*
->	O
file	*
)	O
)	O
{	O
return	O
GSL_EOF	int
;	O
}	O
if	O
(	O
nread	long
!=	O
1	int
)	O
{	O
GSL_ERROR	O
(	O
"failed to read ntuple entry from file"	*
,	O
GSL_EFAILED	int
)	O
;	O
}	O
return	O
GSL_SUCCESS	int
;	O
}	O
int	O
gsl_ntuple_project	function
(	O
gsl_histogram	struct
*	O
h	*
,	O
gsl_ntuple	struct
*	O
ntuple	*
,	O
gsl_ntuple_value_fn	struct
*	O
value_func	*
,	O
gsl_ntuple_select_fn	struct
*	O
select_func	*
)	O
{	O
size_t	long
nread	long
;	O
do	O
{	O
nread	int
=	O
fread	function
(	O
ntuple	*
->	O
ntuple_data	*
,	O
ntuple	*
->	O
size	long
,	O
1	int
,	O
ntuple	*
->	O
file	*
)	O
;	O
if	O
(	O
nread	*
==	O
0	int
&&	O
feof	function
(	O
ntuple	*
->	O
file	*
)	O
)	O
{	O
break	O
;	O
}	O
if	O
(	O
nread	long
!=	O
1	int
)	O
{	O
GSL_ERROR	O
(	O
"failed to read ntuple for projection"	*
,	O
GSL_EFAILED	int
)	O
;	O
}	O
if	O
(	O
EVAL	function
(	O
select_func	*
,	O
ntuple	*
->	O
ntuple_data	*
)	O
)	O
{	O
gsl_histogram_increment	function
(	O
h	*
,	O
EVAL	function
(	O
value_func	*
,	O
ntuple	*
->	O
ntuple_data	*
)	O
)	O
;	O
}	O
}	O
while	O
(	O
1	int
)	O
;	O
return	O
GSL_SUCCESS	int
;	O
}	O
int	O
gsl_ntuple_close	function
(	O
gsl_ntuple	struct
*	O
ntuple	*
)	O
{	O
int	O
status	int
=	O
fclose	function
(	O
ntuple	*
->	O
file	*
)	O
;	O
if	O
(	O
status	int
)	O
{	O
GSL_ERROR	O
(	O
"failed to close ntuple file"	*
,	O
GSL_EFAILED	int
)	O
;	O
}	O
free	function
(	O
ntuple	*
)	O
;	O
return	O
GSL_SUCCESS	int
;	O
}	O