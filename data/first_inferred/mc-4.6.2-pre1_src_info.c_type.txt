struct	O
WInfo	struct
{	O
Widget	struct
widget	pointer
;	O
int	O
ready	int
;	O
}	O
;	O
static	O
int	O
initialized	int
;	O
static	O
struct	O
my_statfs	struct
myfs_stats	pointer
;	O
static	O
void	O
info_box	function
(	O
Dlg_head	struct
*	O
h	pointer
,	O
struct	O
WInfo	struct
*	O
info	pointer
)	O
{	O
standend	O
(	O
)	O
;	O
attrset	function
(	O
NORMAL_COLOR	O
)	O
;	O
widget_erase	function
(	O
&	O
info	pointer
->	O
widget	pointer
)	O
;	O
draw_double_box	function
(	O
h	pointer
,	O
info	pointer
->	O
widget	pointer
.	O
y	short
,	O
info	pointer
->	O
widget	pointer
.	O
x	array
,	O
info	pointer
->	O
widget	pointer
.	O
lines	pointer
,	O
info	pointer
->	O
widget	pointer
.	O
cols	int
)	O
;	O
}	O
static	O
void	O
info_show_info	function
(	O
struct	O
WInfo	struct
*	O
info	pointer
)	O
{	O
static	O
int	O
i18n_adjust	int
=	O
0	int
;	O
static	O
const	O
char	O
*	O
file_label	pointer
;	O
struct	O
stat	struct
st	pointer
;	O
if	O
(	O
!	O
is_idle	function
(	O
)	O
)	O
return	O
;	O
info_box	function
(	O
info	pointer
->	O
widget	pointer
.	O
parent	pointer
,	O
info	pointer
)	O
;	O
attrset	function
(	O
MARKED_COLOR	O
)	O
;	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
1	int
,	O
3	int
)	O
;	O
tty_printf	function
(	O
_	O
(	O
"Midnight Commander %s"	pointer
)	O
,	O
VERSION	pointer
)	O
;	O
attrset	function
(	O
NORMAL_COLOR	O
)	O
;	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
2	int
,	O
1	int
)	O
;	O
hline	function
(	O
ACS_HLINE	O
|	O
NORMAL_COLOR	O
,	O
info	pointer
->	O
widget	pointer
.	O
cols	int
-	O
2	int
)	O
;	O
if	O
(	O
get_current_type	function
(	O
)	O
!=	O
view_listing	int
)	O
return	O
;	O
if	O
(	O
!	O
info	pointer
->	O
ready	int
)	O
return	O
;	O
my_statfs	struct
(	O
&	O
myfs_stats	pointer
,	O
current_panel	pointer
->	O
cwd	short
)	O
;	O
st	pointer
=	O
current_panel	pointer
->	O
dir	pointer
.	O
list	pointer
[	O
current_panel	pointer
->	O
selected	int
]	O
.	O
st	pointer
;	O
if	O
(	O
!	O
i18n_adjust	int
)	O
{	O
file_label	pointer
=	O
_	O
(	O
"File:       %s"	pointer
)	O
;	O
i18n_adjust	int
=	O
strlen	function
(	O
file_label	pointer
)	O
+	O
2	int
;	O
}	O
switch	O
(	O
info	pointer
->	O
widget	pointer
.	O
lines	pointer
-	O
2	int
)	O
{	O
default	O
:	O
case	O
16	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
16	int
,	O
3	int
)	O
;	O
if	O
(	O
myfs_stats	pointer
.	O
nfree	int
>	O
0	int
||	O
myfs_stats	pointer
.	O
nodes	int
>	O
0	int
)	O
tty_printf	function
(	O
_	O
(	O
"Free nodes: %d (%d%%) of %d"	pointer
)	O
,	O
myfs_stats	pointer
.	O
nfree	int
,	O
myfs_stats	pointer
.	O
total	double
?	O
100	int
*	O
myfs_stats	pointer
.	O
nfree	int
/	O
myfs_stats	pointer
.	O
nodes	int
:	O
0	int
,	O
myfs_stats	pointer
.	O
nodes	int
)	O
;	O
else	O
addstr	O
(	O
_	O
(	O
"No node information"	pointer
)	O
)	O
;	O
case	O
15	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
15	int
,	O
3	int
)	O
;	O
if	O
(	O
myfs_stats	pointer
.	O
avail	int
>	O
0	int
||	O
myfs_stats	pointer
.	O
total	double
>	O
0	int
)	O
{	O
char	O
buffer1	array
[	O
6	int
]	O
,	O
buffer2	array
[	O
6	int
]	O
;	O
size_trunc_len	function
(	O
buffer1	array
,	O
5	int
,	O
myfs_stats	pointer
.	O
avail	int
,	O
1	int
)	O
;	O
size_trunc_len	function
(	O
buffer2	array
,	O
5	int
,	O
myfs_stats	pointer
.	O
total	double
,	O
1	int
)	O
;	O
tty_printf	function
(	O
_	O
(	O
"Free space: %s (%d%%) of %s"	pointer
)	O
,	O
buffer1	array
,	O
myfs_stats	pointer
.	O
total	double
?	O
(	O
int	O
)	O
(	O
100	int
*	O
(	O
double	O
)	O
myfs_stats	pointer
.	O
avail	int
/	O
myfs_stats	pointer
.	O
total	double
)	O
:	O
0	int
,	O
buffer2	array
)	O
;	O
}	O
else	O
addstr	O
(	O
_	O
(	O
"No space information"	pointer
)	O
)	O
;	O
case	O
14	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
14	int
,	O
3	int
)	O
;	O
tty_printf	function
(	O
_	O
(	O
"Type:      %s "	pointer
)	O
,	O
myfs_stats	pointer
.	O
typename	pointer
?	O
myfs_stats	pointer
.	O
typename	pointer
:	O
_	O
(	O
"non-local vfs"	pointer
)	O
)	O
;	O
if	O
(	O
myfs_stats	pointer
.	O
type	enum
!=	O
0xffff	int
&&	O
myfs_stats	pointer
.	O
type	enum
!=	O
-	O
1	int
)	O
tty_printf	function
(	O
" (%Xh)"	pointer
,	O
myfs_stats	pointer
.	O
type	enum
)	O
;	O
case	O
13	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
13	int
,	O
3	int
)	O
;	O
tty_printf	function
(	O
_	O
(	O
"Device:    %s"	pointer
)	O
,	O
name_trunc	function
(	O
myfs_stats	pointer
.	O
device	pointer
,	O
info	pointer
->	O
widget	pointer
.	O
cols	int
-	O
i18n_adjust	int
)	O
)	O
;	O
case	O
12	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
12	int
,	O
3	int
)	O
;	O
tty_printf	function
(	O
_	O
(	O
"Filesystem: %s"	pointer
)	O
,	O
name_trunc	function
(	O
myfs_stats	pointer
.	O
mpoint	pointer
,	O
info	pointer
->	O
widget	pointer
.	O
cols	int
-	O
i18n_adjust	int
)	O
)	O
;	O
case	O
11	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
11	int
,	O
3	int
)	O
;	O
tty_printf	function
(	O
_	O
(	O
"Accessed:  %s"	pointer
)	O
,	O
file_date	function
(	O
st	pointer
.	O
st_atime	O
)	O
)	O
;	O
case	O
10	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
10	int
,	O
3	int
)	O
;	O
tty_printf	function
(	O
_	O
(	O
"Modified:  %s"	pointer
)	O
,	O
file_date	function
(	O
st	pointer
.	O
st_mtime	O
)	O
)	O
;	O
case	O
9	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
9	int
,	O
3	int
)	O
;	O
printw	O
(	O
_	O
(	O
"Status:    %s"	pointer
)	O
,	O
file_date	function
(	O
st	pointer
.	O
st_ctime	O
)	O
)	O
;	O
case	O
8	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
8	int
,	O
3	int
)	O
;	O
if	O
(	O
S_ISCHR	O
(	O
st	pointer
.	O
st_mode	int
)	O
||	O
S_ISBLK	O
(	O
st	pointer
.	O
st_mode	int
)	O
)	O
tty_printf	function
(	O
_	O
(	O
"Dev. type: major %lu, minor %lu"	pointer
)	O
,	O
(	O
unsigned	O
long	O
)	O
major	O
(	O
st	pointer
.	O
st_rdev	long
)	O
,	O
(	O
unsigned	O
long	O
)	O
minor	O
(	O
st	pointer
.	O
st_rdev	long
)	O
)	O
;	O
else	O
{	O
char	O
buffer	pointer
[	O
10	int
]	O
;	O
size_trunc_len	function
(	O
buffer	pointer
,	O
9	int
,	O
st	pointer
.	O
st_size	long
,	O
0	int
)	O
;	O
tty_printf	function
(	O
_	O
(	O
"Size:      %s"	pointer
)	O
,	O
buffer	pointer
)	O
;	O
tty_printf	function
(	O
ngettext	function
(	O
" (%ld block)"	pointer
,	O
" (%ld blocks)"	pointer
,	O
(	O
unsigned	O
long	O
int	O
)	O
st	pointer
.	O
st_blocks	long
)	O
,	O
(	O
long	O
int	O
)	O
st	pointer
.	O
st_blocks	long
)	O
;	O
}	O
case	O
7	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
7	int
,	O
3	int
)	O
;	O
tty_printf	function
(	O
_	O
(	O
"Owner:     %s/%s"	pointer
)	O
,	O
get_owner	function
(	O
st	pointer
.	O
st_uid	int
)	O
,	O
get_group	function
(	O
st	pointer
.	O
st_gid	int
)	O
)	O
;	O
case	O
6	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
6	int
,	O
3	int
)	O
;	O
tty_printf	function
(	O
_	O
(	O
"Links:     %d"	pointer
)	O
,	O
(	O
int	O
)	O
st	pointer
.	O
st_nlink	long
)	O
;	O
case	O
5	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
5	int
,	O
3	int
)	O
;	O
tty_printf	function
(	O
_	O
(	O
"Mode:      %s (%04o)"	pointer
)	O
,	O
string_perm	function
(	O
st	pointer
.	O
st_mode	int
)	O
,	O
(	O
unsigned	O
)	O
st	pointer
.	O
st_mode	int
&	O
07777	int
)	O
;	O
case	O
4	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
4	int
,	O
3	int
)	O
;	O
tty_printf	function
(	O
_	O
(	O
"Location:  %Xh:%Xh"	pointer
)	O
,	O
(	O
int	O
)	O
st	pointer
.	O
st_dev	long
,	O
(	O
int	O
)	O
st	pointer
.	O
st_ino	long
)	O
;	O
case	O
3	int
:	O
widget_move	O
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
3	int
,	O
2	int
)	O
;	O
if	O
(	O
current_panel	pointer
->	O
selected	int
)	O
{	O
tty_printf	function
(	O
file_label	pointer
,	O
name_trunc	function
(	O
current_panel	pointer
->	O
dir	pointer
.	O
list	pointer
[	O
current_panel	pointer
->	O
selected	int
]	O
.	O
fname	pointer
,	O
info	pointer
->	O
widget	pointer
.	O
cols	int
-	O
i18n_adjust	int
)	O
)	O
;	O
}	O
else	O
addstr	O
(	O
_	O
(	O
"File:       None"	pointer
)	O
)	O
;	O
case	O
2	int
:	O
case	O
1	int
:	O
case	O
0	int
:	O
;	O
}	O
}	O
static	O
void	O
info_hook	function
(	O
void	O
*	O
data	pointer
)	O
{	O
struct	O
WInfo	struct
*	O
info	pointer
=	O
(	O
struct	O
WInfo	struct
*	O
)	O
data	pointer
;	O
Widget	struct
*	O
other_widget	pointer
;	O
other_widget	pointer
=	O
get_panel_widget	function
(	O
get_current_index	function
(	O
)	O
)	O
;	O
if	O
(	O
!	O
other_widget	pointer
)	O
return	O
;	O
if	O
(	O
dlg_overlap	function
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
other_widget	pointer
)	O
)	O
return	O
;	O
info	pointer
->	O
ready	int
=	O
1	int
;	O
info_show_info	function
(	O
info	pointer
)	O
;	O
}	O
static	O
cb_ret_t	enum
info_callback	function
(	O
Widget	struct
*	O
w	pointer
,	O
widget_msg_t	enum
msg	pointer
,	O
int	O
parm	int
)	O
{	O
struct	O
WInfo	struct
*	O
info	pointer
=	O
(	O
struct	O
WInfo	struct
*	O
)	O
w	pointer
;	O
switch	O
(	O
msg	pointer
)	O
{	O
case	O
WIDGET_INIT	int
:	O
add_hook	function
(	O
&	O
select_file_hook	pointer
,	O
info_hook	function
,	O
info	pointer
)	O
;	O
info	pointer
->	O
ready	int
=	O
0	int
;	O
return	O
MSG_HANDLED	int
;	O
case	O
WIDGET_DRAW	int
:	O
info_hook	function
(	O
info	pointer
)	O
;	O
info_show_info	function
(	O
info	pointer
)	O
;	O
return	O
MSG_HANDLED	int
;	O
case	O
WIDGET_FOCUS	int
:	O
return	O
MSG_NOT_HANDLED	int
;	O
case	O
WIDGET_DESTROY	int
:	O
delete_hook	function
(	O
&	O
select_file_hook	pointer
,	O
info_hook	function
)	O
;	O
return	O
MSG_HANDLED	int
;	O
default	O
:	O
return	O
default_proc	function
(	O
msg	pointer
,	O
parm	int
)	O
;	O
}	O
}	O
struct	O
WInfo	struct
*	O
info_new	function
(	O
)	O
{	O
struct	O
WInfo	struct
*	O
info	pointer
=	O
g_new	O
(	O
struct	O
WInfo	struct
,	O
1	int
)	O
;	O
init_widget	function
(	O
&	O
info	pointer
->	O
widget	pointer
,	O
0	int
,	O
0	int
,	O
0	int
,	O
0	int
,	O
info_callback	function
,	O
NULL	O
)	O
;	O
widget_want_cursor	O
(	O
info	pointer
->	O
widget	pointer
,	O
0	int
)	O
;	O
if	O
(	O
!	O
initialized	int
)	O
{	O
initialized	int
=	O
1	int
;	O
init_my_statfs	function
(	O
)	O
;	O
}	O
return	O
info	pointer
;	O
}	O
