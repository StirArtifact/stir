static	O
const	O
char	O
revid	array
[	O
]	O
=	O
"$Id: hash_conv.c,v 1.4 2000/06/28 16:47:01 loic Exp $"	pointer
;	O
int	O
CDB___ham_pgin	function
(	O
dbenv	pointer
,	O
pg	int
,	O
pp	pointer
,	O
cookie	pointer
)	O
DB_ENV	struct
*	O
dbenv	pointer
;	O
db_pgno_t	int
pg	int
;	O
void	O
*	O
pp	pointer
;	O
DBT	struct
*	O
cookie	pointer
;	O
{	O
DB_PGINFO	struct
*	O
pginfo	pointer
;	O
PAGE	struct
*	O
h	pointer
;	O
h	pointer
=	O
pp	pointer
;	O
pginfo	pointer
=	O
(	O
DB_PGINFO	struct
*	O
)	O
cookie	pointer
->	O
data	pointer
;	O
if	O
(	O
TYPE	O
(	O
h	pointer
)	O
!=	O
P_HASHMETA	int
&&	O
h	pointer
->	O
pgno	int
==	O
PGNO_INVALID	int
)	O
{	O
P_INIT	O
(	O
pp	pointer
,	O
pginfo	pointer
->	O
db_pagesize	long
,	O
pg	int
,	O
PGNO_INVALID	int
,	O
PGNO_INVALID	int
,	O
0	int
,	O
P_HASH	int
,	O
0	int
)	O
;	O
return	O
(	O
0	int
)	O
;	O
}	O
if	O
(	O
!	O
pginfo	pointer
->	O
needswap	int
)	O
return	O
(	O
0	int
)	O
;	O
return	O
(	O
TYPE	O
(	O
h	pointer
)	O
==	O
P_HASHMETA	int
?	O
CDB___ham_mswap	function
(	O
pp	pointer
)	O
:	O
CDB___db_byteswap	function
(	O
dbenv	pointer
,	O
pg	int
,	O
pp	pointer
,	O
pginfo	pointer
->	O
db_pagesize	long
,	O
1	int
)	O
)	O
;	O
}	O
int	O
CDB___ham_pgout	function
(	O
dbenv	pointer
,	O
pg	int
,	O
pp	pointer
,	O
cookie	pointer
)	O
DB_ENV	struct
*	O
dbenv	pointer
;	O
db_pgno_t	int
pg	int
;	O
void	O
*	O
pp	pointer
;	O
DBT	struct
*	O
cookie	pointer
;	O
{	O
DB_PGINFO	struct
*	O
pginfo	pointer
;	O
PAGE	struct
*	O
h	pointer
;	O
pginfo	pointer
=	O
(	O
DB_PGINFO	struct
*	O
)	O
cookie	pointer
->	O
data	pointer
;	O
if	O
(	O
!	O
pginfo	pointer
->	O
needswap	int
)	O
return	O
(	O
0	int
)	O
;	O
h	pointer
=	O
pp	pointer
;	O
return	O
(	O
TYPE	O
(	O
h	pointer
)	O
==	O
P_HASHMETA	int
?	O
CDB___ham_mswap	function
(	O
pp	pointer
)	O
:	O
CDB___db_byteswap	function
(	O
dbenv	pointer
,	O
pg	int
,	O
pp	pointer
,	O
pginfo	pointer
->	O
db_pagesize	long
,	O
0	int
)	O
)	O
;	O
}	O
int	O
CDB___ham_mswap	function
(	O
pg	int
)	O
void	O
*	O
pg	int
;	O
{	O
u_int8_t	char
*	O
p	pointer
;	O
int	O
i	int
;	O
CDB___db_metaswap	function
(	O
pg	int
)	O
;	O
p	pointer
=	O
(	O
u_int8_t	char
*	O
)	O
pg	int
+	O
sizeof	O
(	O
DBMETA	struct
)	O
;	O
SWAP32	O
(	O
p	pointer
)	O
;	O
SWAP32	O
(	O
p	pointer
)	O
;	O
SWAP32	O
(	O
p	pointer
)	O
;	O
SWAP32	O
(	O
p	pointer
)	O
;	O
SWAP32	O
(	O
p	pointer
)	O
;	O
SWAP32	O
(	O
p	pointer
)	O
;	O
for	O
(	O
i	int
=	O
0	int
;	O
i	int
<	O
NCACHED	int
;	O
++	O
i	int
)	O
SWAP32	O
(	O
p	pointer
)	O
;	O
return	O
(	O
0	int
)	O
;	O
}	O
