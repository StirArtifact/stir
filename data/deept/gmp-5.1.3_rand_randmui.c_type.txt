unsigned	O
long	O
gmp_urandomm_ui	O
(	O
gmp_randstate_ptr	pointer
rstate	pointer
,	O
unsigned	O
long	O
n	long
)	O
{	O
mp_limb_t	long
a	int
[	O
LIMBS_PER_ULONG	int
]	O
;	O
unsigned	O
long	O
ret	long
,	O
bits	int
,	O
leading	long
;	O
int	O
i	long
;	O
if	O
(	O
UNLIKELY	O
(	O
n	long
==	O
0	int
)	O
)	O
DIVIDE_BY_ZERO	O
;	O
a	int
[	O
0	int
]	O
=	O
0	int
;	O
count_leading_zeros	O
(	O
leading	long
,	O
(	O
mp_limb_t	long
)	O
n	long
)	O
;	O
bits	int
=	O
GMP_LIMB_BITS	int
-	O
leading	long
-	O
(	O
POW2_P	O
(	O
n	long
)	O
!=	O
0	int
)	O
;	O
for	O
(	O
i	long
=	O
0	int
;	O
i	long
<	O
MAX_URANDOMM_ITER	int
;	O
i	long
++	O
)	O
{	O
_gmp_rand	O
(	O
a	int
,	O
rstate	pointer
,	O
bits	int
)	O
;	O
ret	long
=	O
a	int
[	O
0	int
]	O
;	O
if	O
(	O
LIKELY	O
(	O
ret	long
<	O
n	long
)	O
)	O
goto	O
done	O
;	O
}	O
ret	long
-=	O
n	long
;	O
ASSERT	O
(	O
ret	long
<	O
n	long
)	O
;	O
done	O
:	O
return	O
ret	long
;	O
}	O
