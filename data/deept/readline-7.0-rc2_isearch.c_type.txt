char	O
*	O
_rl_isearch_terminators	pointer
=	O
(	O
char	O
*	O
)	O
NULL	O
;	O
_rl_search_cxt	struct
*	O
_rl_iscxt	pointer
=	O
0	int
;	O
extern	O
HIST_ENTRY	struct
*	O
_rl_saved_line_for_history	pointer
;	O
static	O
int	O
rl_search_history	function
PARAMS	O
(	O
(	O
int	O
,	O
int	O
)	O
)	O
;	O
static	O
_rl_search_cxt	struct
*	O
_rl_isearch_init	function
PARAMS	O
(	O
(	O
int	O
)	O
)	O
;	O
static	O
void	O
_rl_isearch_fini	function
PARAMS	O
(	O
(	O
_rl_search_cxt	struct
*	O
)	O
)	O
;	O
static	O
char	O
*	O
last_isearch_string	pointer
;	O
static	O
int	O
last_isearch_string_len	int
;	O
static	O
char	O
*	O
const	O
default_isearch_terminators	pointer
=	O
"\033\012"	pointer
;	O
_rl_search_cxt	struct
*	O
_rl_scxt_alloc	function
(	O
type	char
,	O
flags	int
)	O
int	O
type	char
,	O
flags	int
;	O
{	O
_rl_search_cxt	struct
*	O
cxt	pointer
;	O
cxt	pointer
=	O
(	O
_rl_search_cxt	struct
*	O
)	O
xmalloc	function
(	O
sizeof	O
(	O
_rl_search_cxt	struct
)	O
)	O
;	O
cxt	pointer
->	O
type	char
=	O
type	char
;	O
cxt	pointer
->	O
sflags	int
=	O
flags	int
;	O
cxt	pointer
->	O
search_string	pointer
=	O
0	int
;	O
cxt	pointer
->	O
search_string_size	int
=	O
cxt	pointer
->	O
search_string_index	int
=	O
0	int
;	O
cxt	pointer
->	O
lines	pointer
=	O
0	int
;	O
cxt	pointer
->	O
allocated_line	pointer
=	O
0	int
;	O
cxt	pointer
->	O
hlen	int
=	O
cxt	pointer
->	O
hindex	int
=	O
0	int
;	O
cxt	pointer
->	O
save_point	int
=	O
rl_point	int
;	O
cxt	pointer
->	O
save_mark	int
=	O
rl_mark	int
;	O
cxt	pointer
->	O
save_line	int
=	O
where_history	function
(	O
)	O
;	O
cxt	pointer
->	O
last_found_line	int
=	O
cxt	pointer
->	O
save_line	int
;	O
cxt	pointer
->	O
prev_line_found	pointer
=	O
0	int
;	O
cxt	pointer
->	O
save_undo_list	pointer
=	O
0	int
;	O
cxt	pointer
->	O
keymap	pointer
=	O
_rl_keymap	pointer
;	O
cxt	pointer
->	O
okeymap	pointer
=	O
_rl_keymap	pointer
;	O
cxt	pointer
->	O
history_pos	int
=	O
0	int
;	O
cxt	pointer
->	O
direction	int
=	O
0	int
;	O
cxt	pointer
->	O
prevc	int
=	O
cxt	pointer
->	O
lastc	int
=	O
0	int
;	O
cxt	pointer
->	O
sline	pointer
=	O
0	int
;	O
cxt	pointer
->	O
sline_len	int
=	O
cxt	pointer
->	O
sline_index	int
=	O
0	int
;	O
cxt	pointer
->	O
search_terminators	pointer
=	O
0	int
;	O
return	O
cxt	pointer
;	O
}	O
void	O
_rl_scxt_dispose	function
(	O
cxt	pointer
,	O
flags	int
)	O
_rl_search_cxt	struct
*	O
cxt	pointer
;	O
int	O
flags	int
;	O
{	O
FREE	O
(	O
cxt	pointer
->	O
search_string	pointer
)	O
;	O
FREE	O
(	O
cxt	pointer
->	O
allocated_line	pointer
)	O
;	O
FREE	O
(	O
cxt	pointer
->	O
lines	pointer
)	O
;	O
xfree	function
(	O
cxt	pointer
)	O
;	O
}	O
int	O
rl_reverse_search_history	function
(	O
sign	int
,	O
key	int
)	O
int	O
sign	int
,	O
key	int
;	O
{	O
return	O
(	O
rl_search_history	function
(	O
-	O
sign	int
,	O
key	int
)	O
)	O
;	O
}	O
int	O
rl_forward_search_history	function
(	O
sign	int
,	O
key	int
)	O
int	O
sign	int
,	O
key	int
;	O
{	O
return	O
(	O
rl_search_history	function
(	O
sign	int
,	O
key	int
)	O
)	O
;	O
}	O
static	O
void	O
rl_display_search	function
(	O
search_string	pointer
,	O
flags	int
,	O
where	int
)	O
char	O
*	O
search_string	pointer
;	O
int	O
flags	int
,	O
where	int
;	O
{	O
char	O
*	O
message	pointer
;	O
int	O
msglen	int
,	O
searchlen	int
;	O
searchlen	int
=	O
(	O
search_string	pointer
&&	O
*	O
search_string	pointer
)	O
?	O
strlen	function
(	O
search_string	pointer
)	O
:	O
0	int
;	O
message	pointer
=	O
(	O
char	O
*	O
)	O
xmalloc	function
(	O
searchlen	int
+	O
64	int
)	O
;	O
msglen	int
=	O
0	int
;	O
message	pointer
[	O
msglen	int
++	O
]	O
=	O
'('	O
;	O
if	O
(	O
flags	int
&	O
SF_FAILED	int
)	O
{	O
strcpy	function
(	O
message	pointer
+	O
msglen	int
,	O
"failed "	pointer
)	O
;	O
msglen	int
+=	O
7	int
;	O
}	O
if	O
(	O
flags	int
&	O
SF_REVERSE	int
)	O
{	O
strcpy	function
(	O
message	pointer
+	O
msglen	int
,	O
"reverse-"	pointer
)	O
;	O
msglen	int
+=	O
8	int
;	O
}	O
strcpy	function
(	O
message	pointer
+	O
msglen	int
,	O
"i-search)`"	pointer
)	O
;	O
msglen	int
+=	O
10	int
;	O
if	O
(	O
search_string	pointer
)	O
{	O
strcpy	function
(	O
message	pointer
+	O
msglen	int
,	O
search_string	pointer
)	O
;	O
msglen	int
+=	O
searchlen	int
;	O
}	O
strcpy	function
(	O
message	pointer
+	O
msglen	int
,	O
"': "	pointer
)	O
;	O
rl_message	function
(	O
"%s"	pointer
,	O
message	pointer
)	O
;	O
xfree	function
(	O
message	pointer
)	O
;	O
(	O
*	O
rl_redisplay_function	pointer
)	O
(	O
)	O
;	O
}	O
static	O
_rl_search_cxt	struct
*	O
_rl_isearch_init	function
(	O
direction	int
)	O
int	O
direction	int
;	O
{	O
_rl_search_cxt	struct
*	O
cxt	pointer
;	O
register	O
int	O
i	int
;	O
HIST_ENTRY	struct
*	O
*	O
hlist	pointer
;	O
cxt	pointer
=	O
_rl_scxt_alloc	function
(	O
RL_SEARCH_ISEARCH	int
,	O
0	int
)	O
;	O
if	O
(	O
direction	int
<	O
0	int
)	O
cxt	pointer
->	O
sflags	int
|=	O
SF_REVERSE	int
;	O
cxt	pointer
->	O
search_terminators	pointer
=	O
_rl_isearch_terminators	pointer
?	O
_rl_isearch_terminators	pointer
:	O
default_isearch_terminators	pointer
;	O
hlist	pointer
=	O
history_list	function
(	O
)	O
;	O
rl_maybe_replace_line	function
(	O
)	O
;	O
i	int
=	O
0	int
;	O
if	O
(	O
hlist	pointer
)	O
for	O
(	O
i	int
=	O
0	int
;	O
hlist	pointer
[	O
i	int
]	O
;	O
i	int
++	O
)	O
;	O
cxt	pointer
->	O
lines	pointer
=	O
(	O
char	O
*	O
*	O
)	O
xmalloc	function
(	O
(	O
1	int
+	O
(	O
cxt	pointer
->	O
hlen	int
=	O
i	int
)	O
)	O
*	O
sizeof	O
(	O
char	O
*	O
)	O
)	O
;	O
for	O
(	O
i	int
=	O
0	int
;	O
i	int
<	O
cxt	pointer
->	O
hlen	int
;	O
i	int
++	O
)	O
cxt	pointer
->	O
lines	pointer
[	O
i	int
]	O
=	O
hlist	pointer
[	O
i	int
]	O
->	O
line	pointer
;	O
if	O
(	O
_rl_saved_line_for_history	pointer
)	O
cxt	pointer
->	O
lines	pointer
[	O
i	int
]	O
=	O
_rl_saved_line_for_history	pointer
->	O
line	pointer
;	O
else	O
{	O
cxt	pointer
->	O
allocated_line	pointer
=	O
(	O
char	O
*	O
)	O
xmalloc	function
(	O
1	int
+	O
strlen	function
(	O
rl_line_buffer	pointer
)	O
)	O
;	O
strcpy	function
(	O
cxt	pointer
->	O
allocated_line	pointer
,	O
&	O
rl_line_buffer	pointer
[	O
0	int
]	O
)	O
;	O
cxt	pointer
->	O
lines	pointer
[	O
i	int
]	O
=	O
cxt	pointer
->	O
allocated_line	pointer
;	O
}	O
cxt	pointer
->	O
hlen	int
++	O
;	O
cxt	pointer
->	O
history_pos	int
=	O
cxt	pointer
->	O
save_line	int
;	O
rl_save_prompt	function
(	O
)	O
;	O
cxt	pointer
->	O
search_string	pointer
=	O
(	O
char	O
*	O
)	O
xmalloc	function
(	O
cxt	pointer
->	O
search_string_size	int
=	O
128	int
)	O
;	O
cxt	pointer
->	O
search_string	pointer
[	O
cxt	pointer
->	O
search_string_index	int
=	O
0	int
]	O
=	O
'\0'	O
;	O
cxt	pointer
->	O
direction	int
=	O
(	O
direction	int
>=	O
0	int
)	O
?	O
1	int
:	O
-	O
1	int
;	O
cxt	pointer
->	O
sline	pointer
=	O
rl_line_buffer	pointer
;	O
cxt	pointer
->	O
sline_len	int
=	O
strlen	function
(	O
cxt	pointer
->	O
sline	pointer
)	O
;	O
cxt	pointer
->	O
sline_index	int
=	O
rl_point	int
;	O
_rl_iscxt	pointer
=	O
cxt	pointer
;	O
return	O
cxt	pointer
;	O
}	O
static	O
void	O
_rl_isearch_fini	function
(	O
cxt	pointer
)	O
_rl_search_cxt	struct
*	O
cxt	pointer
;	O
{	O
strcpy	function
(	O
rl_line_buffer	pointer
,	O
cxt	pointer
->	O
lines	pointer
[	O
cxt	pointer
->	O
save_line	int
]	O
)	O
;	O
rl_restore_prompt	function
(	O
)	O
;	O
FREE	O
(	O
last_isearch_string	pointer
)	O
;	O
last_isearch_string	pointer
=	O
cxt	pointer
->	O
search_string	pointer
;	O
last_isearch_string_len	int
=	O
cxt	pointer
->	O
search_string_index	int
;	O
cxt	pointer
->	O
search_string	pointer
=	O
0	int
;	O
if	O
(	O
cxt	pointer
->	O
last_found_line	int
<	O
cxt	pointer
->	O
save_line	int
)	O
rl_get_previous_history	function
(	O
cxt	pointer
->	O
save_line	int
-	O
cxt	pointer
->	O
last_found_line	int
,	O
0	int
)	O
;	O
else	O
rl_get_next_history	function
(	O
cxt	pointer
->	O
last_found_line	int
-	O
cxt	pointer
->	O
save_line	int
,	O
0	int
)	O
;	O
if	O
(	O
cxt	pointer
->	O
sline_index	int
<	O
0	int
)	O
{	O
if	O
(	O
cxt	pointer
->	O
last_found_line	int
==	O
cxt	pointer
->	O
save_line	int
)	O
cxt	pointer
->	O
sline_index	int
=	O
cxt	pointer
->	O
save_point	int
;	O
else	O
cxt	pointer
->	O
sline_index	int
=	O
strlen	function
(	O
rl_line_buffer	pointer
)	O
;	O
rl_mark	int
=	O
cxt	pointer
->	O
save_mark	int
;	O
}	O
rl_point	int
=	O
cxt	pointer
->	O
sline_index	int
;	O
rl_clear_message	function
(	O
)	O
;	O
}	O
int	O
_rl_search_getchar	function
(	O
cxt	pointer
)	O
_rl_search_cxt	struct
*	O
cxt	pointer
;	O
{	O
int	O
c	int
;	O
RL_SETSTATE	O
(	O
RL_STATE_MOREINPUT	int
)	O
;	O
c	int
=	O
cxt	pointer
->	O
lastc	int
=	O
rl_read_key	function
(	O
)	O
;	O
RL_UNSETSTATE	O
(	O
RL_STATE_MOREINPUT	int
)	O
;	O
if	O
(	O
MB_CUR_MAX	O
>	O
1	int
&&	O
rl_byte_oriented	int
==	O
0	int
)	O
c	int
=	O
cxt	pointer
->	O
lastc	int
=	O
_rl_read_mbstring	function
(	O
cxt	pointer
->	O
lastc	int
,	O
cxt	pointer
->	O
mb	array
,	O
MB_LEN_MAX	int
)	O
;	O
RL_CHECK_SIGNALS	O
(	O
)	O
;	O
return	O
c	int
;	O
}	O
int	O
_rl_isearch_dispatch	function
(	O
cxt	pointer
,	O
c	int
)	O
_rl_search_cxt	struct
*	O
cxt	pointer
;	O
int	O
c	int
;	O
{	O
int	O
n	int
,	O
wstart	int
,	O
wlen	int
,	O
limit	int
,	O
cval	int
;	O
rl_command_func_t	function
*	O
f	pointer
;	O
f	pointer
=	O
(	O
rl_command_func_t	function
*	O
)	O
NULL	O
;	O
if	O
(	O
c	int
<	O
0	int
)	O
{	O
cxt	pointer
->	O
sflags	int
|=	O
SF_FAILED	int
;	O
cxt	pointer
->	O
history_pos	int
=	O
cxt	pointer
->	O
last_found_line	int
;	O
return	O
-	O
1	int
;	O
}	O
if	O
(	O
c	int
>=	O
0	int
&&	O
cxt	pointer
->	O
keymap	pointer
[	O
c	int
]	O
.	O
type	char
==	O
ISKMAP	int
&&	O
strchr	function
(	O
cxt	pointer
->	O
search_terminators	pointer
,	O
cxt	pointer
->	O
lastc	int
)	O
==	O
0	int
)	O
{	O
if	O
(	O
_rl_keyseq_timeout	int
>	O
0	int
&&	O
RL_ISSTATE	O
(	O
RL_STATE_CALLBACK	int
)	O
==	O
0	int
&&	O
RL_ISSTATE	O
(	O
RL_STATE_INPUTPENDING	int
)	O
==	O
0	int
&&	O
_rl_pushed_input_available	function
(	O
)	O
==	O
0	int
&&	O
(	O
(	O
Keymap	pointer
)	O
(	O
cxt	pointer
->	O
keymap	pointer
[	O
c	int
]	O
.	O
function	pointer
)	O
)	O
[	O
ANYOTHERKEY	O
]	O
.	O
function	pointer
&&	O
_rl_input_queued	function
(	O
_rl_keyseq_timeout	int
*	O
1000	int
)	O
==	O
0	int
)	O
goto	O
add_character	O
;	O
cxt	pointer
->	O
okeymap	pointer
=	O
cxt	pointer
->	O
keymap	pointer
;	O
cxt	pointer
->	O
keymap	pointer
=	O
FUNCTION_TO_KEYMAP	O
(	O
cxt	pointer
->	O
keymap	pointer
,	O
c	int
)	O
;	O
cxt	pointer
->	O
sflags	int
|=	O
SF_CHGKMAP	int
;	O
cxt	pointer
->	O
prevc	int
=	O
c	int
;	O
if	O
(	O
MB_CUR_MAX	O
>	O
1	int
&&	O
rl_byte_oriented	int
==	O
0	int
)	O
{	O
if	O
(	O
cxt	pointer
->	O
mb	array
[	O
1	int
]	O
==	O
0	int
)	O
{	O
cxt	pointer
->	O
pmb	array
[	O
0	int
]	O
=	O
c	int
;	O
cxt	pointer
->	O
pmb	array
[	O
1	int
]	O
=	O
'\0'	O
;	O
}	O
else	O
memcpy	function
(	O
cxt	pointer
->	O
pmb	array
,	O
cxt	pointer
->	O
mb	array
,	O
sizeof	O
(	O
cxt	pointer
->	O
pmb	array
)	O
)	O
;	O
}	O
return	O
1	int
;	O
}	O
add_character	O
:	O
if	O
(	O
c	int
>=	O
0	int
&&	O
cxt	pointer
->	O
keymap	pointer
[	O
c	int
]	O
.	O
type	char
==	O
ISFUNC	int
)	O
{	O
f	pointer
=	O
cxt	pointer
->	O
keymap	pointer
[	O
c	int
]	O
.	O
function	pointer
;	O
if	O
(	O
f	pointer
==	O
rl_reverse_search_history	function
)	O
cxt	pointer
->	O
lastc	int
=	O
(	O
cxt	pointer
->	O
sflags	int
&	O
SF_REVERSE	int
)	O
?	O
-	O
1	int
:	O
-	O
2	int
;	O
else	O
if	O
(	O
f	pointer
==	O
rl_forward_search_history	function
)	O
cxt	pointer
->	O
lastc	int
=	O
(	O
cxt	pointer
->	O
sflags	int
&	O
SF_REVERSE	int
)	O
?	O
-	O
2	int
:	O
-	O
1	int
;	O
else	O
if	O
(	O
f	pointer
==	O
rl_rubout	function
)	O
cxt	pointer
->	O
lastc	int
=	O
-	O
3	int
;	O
else	O
if	O
(	O
c	int
==	O
CTRL	O
(	O
'G'	O
)	O
||	O
f	pointer
==	O
rl_abort	function
)	O
cxt	pointer
->	O
lastc	int
=	O
-	O
4	int
;	O
else	O
if	O
(	O
c	int
==	O
CTRL	O
(	O
'W'	O
)	O
||	O
f	pointer
==	O
rl_unix_word_rubout	function
)	O
cxt	pointer
->	O
lastc	int
=	O
-	O
5	int
;	O
else	O
if	O
(	O
c	int
==	O
CTRL	O
(	O
'Y'	O
)	O
||	O
f	pointer
==	O
rl_yank	function
)	O
cxt	pointer
->	O
lastc	int
=	O
-	O
6	int
;	O
}	O
if	O
(	O
cxt	pointer
->	O
sflags	int
&	O
SF_CHGKMAP	int
)	O
{	O
cxt	pointer
->	O
keymap	pointer
=	O
cxt	pointer
->	O
okeymap	pointer
;	O
cxt	pointer
->	O
sflags	int
&=	O
~	O
SF_CHGKMAP	int
;	O
if	O
(	O
cxt	pointer
->	O
lastc	int
>	O
0	int
&&	O
ENDSRCH_CHAR	O
(	O
cxt	pointer
->	O
prevc	int
)	O
)	O
{	O
rl_stuff_char	function
(	O
cxt	pointer
->	O
lastc	int
)	O
;	O
rl_execute_next	function
(	O
cxt	pointer
->	O
prevc	int
)	O
;	O
return	O
(	O
0	int
)	O
;	O
}	O
else	O
if	O
(	O
cxt	pointer
->	O
lastc	int
>	O
0	int
&&	O
cxt	pointer
->	O
prevc	int
>	O
0	int
&&	O
cxt	pointer
->	O
keymap	pointer
[	O
cxt	pointer
->	O
prevc	int
]	O
.	O
type	char
==	O
ISKMAP	int
&&	O
(	O
f	pointer
==	O
0	int
||	O
f	pointer
==	O
rl_insert	function
)	O
)	O
{	O
rl_execute_next	function
(	O
cxt	pointer
->	O
lastc	int
)	O
;	O
cxt	pointer
->	O
lastc	int
=	O
cxt	pointer
->	O
prevc	int
;	O
if	O
(	O
MB_CUR_MAX	O
>	O
1	int
&&	O
rl_byte_oriented	int
==	O
0	int
)	O
{	O
if	O
(	O
cxt	pointer
->	O
pmb	array
[	O
1	int
]	O
==	O
0	int
)	O
{	O
cxt	pointer
->	O
mb	array
[	O
0	int
]	O
=	O
cxt	pointer
->	O
lastc	int
;	O
cxt	pointer
->	O
mb	array
[	O
1	int
]	O
=	O
'\0'	O
;	O
}	O
else	O
memcpy	function
(	O
cxt	pointer
->	O
mb	array
,	O
cxt	pointer
->	O
pmb	array
,	O
sizeof	O
(	O
cxt	pointer
->	O
mb	array
)	O
)	O
;	O
}	O
cxt	pointer
->	O
prevc	int
=	O
0	int
;	O
}	O
else	O
if	O
(	O
cxt	pointer
->	O
lastc	int
>	O
0	int
&&	O
cxt	pointer
->	O
prevc	int
>	O
0	int
&&	O
f	pointer
&&	O
f	pointer
!=	O
rl_insert	function
)	O
{	O
rl_stuff_char	function
(	O
cxt	pointer
->	O
lastc	int
)	O
;	O
rl_execute_next	function
(	O
cxt	pointer
->	O
prevc	int
)	O
;	O
return	O
(	O
0	int
)	O
;	O
}	O
}	O
if	O
(	O
cxt	pointer
->	O
lastc	int
>	O
0	int
&&	O
strchr	function
(	O
cxt	pointer
->	O
search_terminators	pointer
,	O
cxt	pointer
->	O
lastc	int
)	O
)	O
{	O
if	O
(	O
cxt	pointer
->	O
lastc	int
==	O
ESC	O
&&	O
(	O
_rl_pushed_input_available	function
(	O
)	O
||	O
_rl_input_available	function
(	O
)	O
)	O
)	O
rl_execute_next	function
(	O
ESC	O
)	O
;	O
return	O
(	O
0	int
)	O
;	O
}	O
if	O
(	O
MB_CUR_MAX	O
>	O
1	int
&&	O
rl_byte_oriented	int
==	O
0	int
)	O
{	O
if	O
(	O
cxt	pointer
->	O
lastc	int
>=	O
0	int
&&	O
(	O
cxt	pointer
->	O
mb	array
[	O
0	int
]	O
&&	O
cxt	pointer
->	O
mb	array
[	O
1	int
]	O
==	O
'\0'	O
)	O
&&	O
ENDSRCH_CHAR	O
(	O
cxt	pointer
->	O
lastc	int
)	O
)	O
{	O
rl_execute_next	function
(	O
cxt	pointer
->	O
lastc	int
)	O
;	O
return	O
(	O
0	int
)	O
;	O
}	O
}	O
else	O
if	O
(	O
cxt	pointer
->	O
lastc	int
>=	O
0	int
&&	O
ENDSRCH_CHAR	O
(	O
cxt	pointer
->	O
lastc	int
)	O
)	O
{	O
rl_execute_next	function
(	O
cxt	pointer
->	O
lastc	int
)	O
;	O
return	O
(	O
0	int
)	O
;	O
}	O
switch	O
(	O
cxt	pointer
->	O
lastc	int
)	O
{	O
case	O
-	O
1	int
:	O
if	O
(	O
cxt	pointer
->	O
search_string_index	int
==	O
0	int
)	O
{	O
if	O
(	O
last_isearch_string	pointer
)	O
{	O
cxt	pointer
->	O
search_string_size	int
=	O
64	int
+	O
last_isearch_string_len	int
;	O
cxt	pointer
->	O
search_string	pointer
=	O
(	O
char	O
*	O
)	O
xrealloc	function
(	O
cxt	pointer
->	O
search_string	pointer
,	O
cxt	pointer
->	O
search_string_size	int
)	O
;	O
strcpy	function
(	O
cxt	pointer
->	O
search_string	pointer
,	O
last_isearch_string	pointer
)	O
;	O
cxt	pointer
->	O
search_string_index	int
=	O
last_isearch_string_len	int
;	O
rl_display_search	function
(	O
cxt	pointer
->	O
search_string	pointer
,	O
cxt	pointer
->	O
sflags	int
,	O
-	O
1	int
)	O
;	O
break	O
;	O
}	O
return	O
(	O
1	int
)	O
;	O
}	O
else	O
if	O
(	O
cxt	pointer
->	O
sflags	int
&	O
SF_REVERSE	int
)	O
cxt	pointer
->	O
sline_index	int
--	O
;	O
else	O
if	O
(	O
cxt	pointer
->	O
sline_index	int
!=	O
cxt	pointer
->	O
sline_len	int
)	O
cxt	pointer
->	O
sline_index	int
++	O
;	O
else	O
rl_ding	function
(	O
)	O
;	O
break	O
;	O
case	O
-	O
2	int
:	O
cxt	pointer
->	O
direction	int
=	O
-	O
cxt	pointer
->	O
direction	int
;	O
if	O
(	O
cxt	pointer
->	O
direction	int
<	O
0	int
)	O
cxt	pointer
->	O
sflags	int
|=	O
SF_REVERSE	int
;	O
else	O
cxt	pointer
->	O
sflags	int
&=	O
~	O
SF_REVERSE	int
;	O
break	O
;	O
case	O
-	O
3	int
:	O
if	O
(	O
cxt	pointer
->	O
search_string_index	int
==	O
0	int
)	O
rl_ding	function
(	O
)	O
;	O
else	O
if	O
(	O
MB_CUR_MAX	O
==	O
1	int
||	O
rl_byte_oriented	int
)	O
cxt	pointer
->	O
search_string	pointer
[	O
--	O
cxt	pointer
->	O
search_string_index	int
]	O
=	O
'\0'	O
;	O
else	O
{	O
wstart	int
=	O
_rl_find_prev_mbchar	function
(	O
cxt	pointer
->	O
search_string	pointer
,	O
cxt	pointer
->	O
search_string_index	int
,	O
MB_FIND_NONZERO	int
)	O
;	O
if	O
(	O
wstart	int
>=	O
0	int
)	O
cxt	pointer
->	O
search_string	pointer
[	O
cxt	pointer
->	O
search_string_index	int
=	O
wstart	int
]	O
=	O
'\0'	O
;	O
else	O
cxt	pointer
->	O
search_string	pointer
[	O
cxt	pointer
->	O
search_string_index	int
=	O
0	int
]	O
=	O
'\0'	O
;	O
}	O
if	O
(	O
cxt	pointer
->	O
search_string_index	int
==	O
0	int
)	O
rl_ding	function
(	O
)	O
;	O
break	O
;	O
case	O
-	O
4	int
:	O
rl_replace_line	function
(	O
cxt	pointer
->	O
lines	pointer
[	O
cxt	pointer
->	O
save_line	int
]	O
,	O
0	int
)	O
;	O
rl_point	int
=	O
cxt	pointer
->	O
save_point	int
;	O
rl_mark	int
=	O
cxt	pointer
->	O
save_mark	int
;	O
rl_restore_prompt	function
(	O
)	O
;	O
rl_clear_message	function
(	O
)	O
;	O
return	O
-	O
1	int
;	O
case	O
-	O
5	int
:	O
wstart	int
=	O
rl_point	int
+	O
cxt	pointer
->	O
search_string_index	int
;	O
if	O
(	O
wstart	int
>=	O
rl_end	int
)	O
{	O
rl_ding	function
(	O
)	O
;	O
break	O
;	O
}	O
cval	int
=	O
_rl_char_value	function
(	O
rl_line_buffer	pointer
,	O
wstart	int
)	O
;	O
if	O
(	O
_rl_walphabetic	function
(	O
cval	int
)	O
==	O
0	int
)	O
{	O
rl_ding	function
(	O
)	O
;	O
break	O
;	O
}	O
n	int
=	O
MB_NEXTCHAR	O
(	O
rl_line_buffer	pointer
,	O
wstart	int
,	O
1	int
,	O
MB_FIND_NONZERO	int
)	O
;	O
;	O
while	O
(	O
n	int
<	O
rl_end	int
)	O
{	O
cval	int
=	O
_rl_char_value	function
(	O
rl_line_buffer	pointer
,	O
n	int
)	O
;	O
if	O
(	O
_rl_walphabetic	function
(	O
cval	int
)	O
==	O
0	int
)	O
break	O
;	O
n	int
=	O
MB_NEXTCHAR	O
(	O
rl_line_buffer	pointer
,	O
n	int
,	O
1	int
,	O
MB_FIND_NONZERO	int
)	O
;	O
;	O
}	O
wlen	int
=	O
n	int
-	O
wstart	int
+	O
1	int
;	O
if	O
(	O
cxt	pointer
->	O
search_string_index	int
+	O
wlen	int
+	O
1	int
>=	O
cxt	pointer
->	O
search_string_size	int
)	O
{	O
cxt	pointer
->	O
search_string_size	int
+=	O
wlen	int
+	O
1	int
;	O
cxt	pointer
->	O
search_string	pointer
=	O
(	O
char	O
*	O
)	O
xrealloc	function
(	O
cxt	pointer
->	O
search_string	pointer
,	O
cxt	pointer
->	O
search_string_size	int
)	O
;	O
}	O
for	O
(	O
;	O
wstart	int
<	O
n	int
;	O
wstart	int
++	O
)	O
cxt	pointer
->	O
search_string	pointer
[	O
cxt	pointer
->	O
search_string_index	int
++	O
]	O
=	O
rl_line_buffer	pointer
[	O
wstart	int
]	O
;	O
cxt	pointer
->	O
search_string	pointer
[	O
cxt	pointer
->	O
search_string_index	int
]	O
=	O
'\0'	O
;	O
break	O
;	O
case	O
-	O
6	int
:	O
wstart	int
=	O
rl_point	int
+	O
cxt	pointer
->	O
search_string_index	int
;	O
if	O
(	O
wstart	int
>=	O
rl_end	int
)	O
{	O
rl_ding	function
(	O
)	O
;	O
break	O
;	O
}	O
n	int
=	O
rl_end	int
-	O
wstart	int
+	O
1	int
;	O
if	O
(	O
cxt	pointer
->	O
search_string_index	int
+	O
n	int
+	O
1	int
>=	O
cxt	pointer
->	O
search_string_size	int
)	O
{	O
cxt	pointer
->	O
search_string_size	int
+=	O
n	int
+	O
1	int
;	O
cxt	pointer
->	O
search_string	pointer
=	O
(	O
char	O
*	O
)	O
xrealloc	function
(	O
cxt	pointer
->	O
search_string	pointer
,	O
cxt	pointer
->	O
search_string_size	int
)	O
;	O
}	O
for	O
(	O
n	int
=	O
wstart	int
;	O
n	int
<	O
rl_end	int
;	O
n	int
++	O
)	O
cxt	pointer
->	O
search_string	pointer
[	O
cxt	pointer
->	O
search_string_index	int
++	O
]	O
=	O
rl_line_buffer	pointer
[	O
n	int
]	O
;	O
cxt	pointer
->	O
search_string	pointer
[	O
cxt	pointer
->	O
search_string_index	int
]	O
=	O
'\0'	O
;	O
break	O
;	O
default	O
:	O
if	O
(	O
cxt	pointer
->	O
search_string_index	int
+	O
2	int
>=	O
cxt	pointer
->	O
search_string_size	int
)	O
{	O
cxt	pointer
->	O
search_string_size	int
+=	O
128	int
;	O
cxt	pointer
->	O
search_string	pointer
=	O
(	O
char	O
*	O
)	O
xrealloc	function
(	O
cxt	pointer
->	O
search_string	pointer
,	O
cxt	pointer
->	O
search_string_size	int
)	O
;	O
}	O
if	O
(	O
MB_CUR_MAX	O
>	O
1	int
&&	O
rl_byte_oriented	int
==	O
0	int
)	O
{	O
int	O
j	int
,	O
l	int
;	O
if	O
(	O
cxt	pointer
->	O
mb	array
[	O
0	int
]	O
==	O
0	int
||	O
cxt	pointer
->	O
mb	array
[	O
1	int
]	O
==	O
0	int
)	O
cxt	pointer
->	O
search_string	pointer
[	O
cxt	pointer
->	O
search_string_index	int
++	O
]	O
=	O
cxt	pointer
->	O
mb	array
[	O
0	int
]	O
;	O
else	O
for	O
(	O
j	int
=	O
0	int
,	O
l	int
=	O
RL_STRLEN	O
(	O
cxt	pointer
->	O
mb	array
)	O
;	O
j	int
<	O
l	int
;	O
)	O
cxt	pointer
->	O
search_string	pointer
[	O
cxt	pointer
->	O
search_string_index	int
++	O
]	O
=	O
cxt	pointer
->	O
mb	array
[	O
j	int
++	O
]	O
;	O
}	O
else	O
cxt	pointer
->	O
search_string	pointer
[	O
cxt	pointer
->	O
search_string_index	int
++	O
]	O
=	O
cxt	pointer
->	O
lastc	int
;	O
cxt	pointer
->	O
search_string	pointer
[	O
cxt	pointer
->	O
search_string_index	int
]	O
=	O
'\0'	O
;	O
break	O
;	O
}	O
for	O
(	O
cxt	pointer
->	O
sflags	int
&=	O
~	O
(	O
SF_FOUND	int
|	O
SF_FAILED	int
)	O
;	O
;	O
)	O
{	O
if	O
(	O
cxt	pointer
->	O
search_string_index	int
==	O
0	int
)	O
{	O
cxt	pointer
->	O
sflags	int
|=	O
SF_FAILED	int
;	O
break	O
;	O
}	O
limit	int
=	O
cxt	pointer
->	O
sline_len	int
-	O
cxt	pointer
->	O
search_string_index	int
+	O
1	int
;	O
while	O
(	O
(	O
cxt	pointer
->	O
sflags	int
&	O
SF_REVERSE	int
)	O
?	O
(	O
cxt	pointer
->	O
sline_index	int
>=	O
0	int
)	O
:	O
(	O
cxt	pointer
->	O
sline_index	int
<	O
limit	int
)	O
)	O
{	O
if	O
(	O
STREQN	O
(	O
cxt	pointer
->	O
search_string	pointer
,	O
cxt	pointer
->	O
sline	pointer
+	O
cxt	pointer
->	O
sline_index	int
,	O
cxt	pointer
->	O
search_string_index	int
)	O
)	O
{	O
cxt	pointer
->	O
sflags	int
|=	O
SF_FOUND	int
;	O
break	O
;	O
}	O
else	O
cxt	pointer
->	O
sline_index	int
+=	O
cxt	pointer
->	O
direction	int
;	O
}	O
if	O
(	O
cxt	pointer
->	O
sflags	int
&	O
SF_FOUND	int
)	O
break	O
;	O
do	O
{	O
cxt	pointer
->	O
history_pos	int
+=	O
cxt	pointer
->	O
direction	int
;	O
if	O
(	O
(	O
cxt	pointer
->	O
sflags	int
&	O
SF_REVERSE	int
)	O
?	O
(	O
cxt	pointer
->	O
history_pos	int
<	O
0	int
)	O
:	O
(	O
cxt	pointer
->	O
history_pos	int
==	O
cxt	pointer
->	O
hlen	int
)	O
)	O
{	O
cxt	pointer
->	O
sflags	int
|=	O
SF_FAILED	int
;	O
break	O
;	O
}	O
cxt	pointer
->	O
sline	pointer
=	O
cxt	pointer
->	O
lines	pointer
[	O
cxt	pointer
->	O
history_pos	int
]	O
;	O
cxt	pointer
->	O
sline_len	int
=	O
strlen	function
(	O
cxt	pointer
->	O
sline	pointer
)	O
;	O
}	O
while	O
(	O
(	O
cxt	pointer
->	O
prev_line_found	pointer
&&	O
STREQ	O
(	O
cxt	pointer
->	O
prev_line_found	pointer
,	O
cxt	pointer
->	O
lines	pointer
[	O
cxt	pointer
->	O
history_pos	int
]	O
)	O
)	O
||	O
(	O
cxt	pointer
->	O
search_string_index	int
>	O
cxt	pointer
->	O
sline_len	int
)	O
)	O
;	O
if	O
(	O
cxt	pointer
->	O
sflags	int
&	O
SF_FAILED	int
)	O
break	O
;	O
cxt	pointer
->	O
sline_index	int
=	O
(	O
cxt	pointer
->	O
sflags	int
&	O
SF_REVERSE	int
)	O
?	O
cxt	pointer
->	O
sline_len	int
-	O
cxt	pointer
->	O
search_string_index	int
:	O
0	int
;	O
}	O
if	O
(	O
cxt	pointer
->	O
sflags	int
&	O
SF_FAILED	int
)	O
{	O
rl_ding	function
(	O
)	O
;	O
cxt	pointer
->	O
history_pos	int
=	O
cxt	pointer
->	O
last_found_line	int
;	O
rl_display_search	function
(	O
cxt	pointer
->	O
search_string	pointer
,	O
cxt	pointer
->	O
sflags	int
,	O
(	O
cxt	pointer
->	O
history_pos	int
==	O
cxt	pointer
->	O
save_line	int
)	O
?	O
-	O
1	int
:	O
cxt	pointer
->	O
history_pos	int
)	O
;	O
return	O
1	int
;	O
}	O
if	O
(	O
cxt	pointer
->	O
sflags	int
&	O
SF_FOUND	int
)	O
{	O
cxt	pointer
->	O
prev_line_found	pointer
=	O
cxt	pointer
->	O
lines	pointer
[	O
cxt	pointer
->	O
history_pos	int
]	O
;	O
rl_replace_line	function
(	O
cxt	pointer
->	O
lines	pointer
[	O
cxt	pointer
->	O
history_pos	int
]	O
,	O
0	int
)	O
;	O
rl_point	int
=	O
cxt	pointer
->	O
sline_index	int
;	O
cxt	pointer
->	O
last_found_line	int
=	O
cxt	pointer
->	O
history_pos	int
;	O
rl_display_search	function
(	O
cxt	pointer
->	O
search_string	pointer
,	O
cxt	pointer
->	O
sflags	int
,	O
(	O
cxt	pointer
->	O
history_pos	int
==	O
cxt	pointer
->	O
save_line	int
)	O
?	O
-	O
1	int
:	O
cxt	pointer
->	O
history_pos	int
)	O
;	O
}	O
return	O
1	int
;	O
}	O
int	O
_rl_isearch_cleanup	function
(	O
cxt	pointer
,	O
r	int
)	O
_rl_search_cxt	struct
*	O
cxt	pointer
;	O
int	O
r	int
;	O
{	O
if	O
(	O
r	int
>=	O
0	int
)	O
_rl_isearch_fini	function
(	O
cxt	pointer
)	O
;	O
_rl_scxt_dispose	function
(	O
cxt	pointer
,	O
0	int
)	O
;	O
_rl_iscxt	pointer
=	O
0	int
;	O
RL_UNSETSTATE	O
(	O
RL_STATE_ISEARCH	int
)	O
;	O
return	O
(	O
r	int
!=	O
0	int
)	O
;	O
}	O
static	O
int	O
rl_search_history	function
(	O
direction	int
,	O
invoking_key	int
)	O
int	O
direction	int
,	O
invoking_key	int
;	O
{	O
_rl_search_cxt	struct
*	O
cxt	pointer
;	O
int	O
c	int
,	O
r	int
;	O
RL_SETSTATE	O
(	O
RL_STATE_ISEARCH	int
)	O
;	O
cxt	pointer
=	O
_rl_isearch_init	function
(	O
direction	int
)	O
;	O
rl_display_search	function
(	O
cxt	pointer
->	O
search_string	pointer
,	O
cxt	pointer
->	O
sflags	int
,	O
-	O
1	int
)	O
;	O
if	O
(	O
RL_ISSTATE	O
(	O
RL_STATE_CALLBACK	int
)	O
)	O
return	O
(	O
0	int
)	O
;	O
r	int
=	O
-	O
1	int
;	O
for	O
(	O
;	O
;	O
)	O
{	O
c	int
=	O
_rl_search_getchar	function
(	O
cxt	pointer
)	O
;	O
r	int
=	O
_rl_isearch_dispatch	function
(	O
cxt	pointer
,	O
cxt	pointer
->	O
lastc	int
)	O
;	O
if	O
(	O
r	int
<=	O
0	int
)	O
break	O
;	O
}	O
return	O
(	O
_rl_isearch_cleanup	function
(	O
cxt	pointer
,	O
r	int
)	O
)	O
;	O
}	O
int	O
_rl_isearch_callback	function
(	O
cxt	pointer
)	O
_rl_search_cxt	struct
*	O
cxt	pointer
;	O
{	O
int	O
c	int
,	O
r	int
;	O
c	int
=	O
_rl_search_getchar	function
(	O
cxt	pointer
)	O
;	O
r	int
=	O
_rl_isearch_dispatch	function
(	O
cxt	pointer
,	O
cxt	pointer
->	O
lastc	int
)	O
;	O
return	O
(	O
r	int
<=	O
0	int
)	O
?	O
_rl_isearch_cleanup	function
(	O
cxt	pointer
,	O
r	int
)	O
:	O
0	int
;	O
}	O
