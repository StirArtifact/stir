static	O
struct	O
hurd_ihash	O
pghash	struct
=	O
HURD_IHASH_INITIALIZER	function
(	O
offsetof	O
(	O
struct	O
pgrp	O
,	O
pg_hashloc	O
)	O
)	O
;	O
static	O
struct	O
hurd_ihash	O
pidhash	struct
=	O
HURD_IHASH_INITIALIZER	function
(	O
offsetof	O
(	O
struct	O
proc	O
,	O
p_pidhashloc	O
)	O
)	O
;	O
static	O
struct	O
hurd_ihash	O
taskhash	struct
=	O
HURD_IHASH_INITIALIZER	function
(	O
offsetof	O
(	O
struct	O
proc	O
,	O
p_taskhashloc	O
)	O
)	O
;	O
static	O
struct	O
hurd_ihash	O
sidhash	struct
=	O
HURD_IHASH_INITIALIZER	function
(	O
offsetof	O
(	O
struct	O
session	O
,	O
s_hashloc	O
)	O
)	O
;	O
struct	O
proc	O
*	O
pid_find	function
(	O
pid_t	O
pid	int
)	O
{	O
struct	O
proc	O
*	O
p	pointer
;	O
p	pointer
=	O
hurd_ihash_find	function
(	O
&	O
pidhash	struct
,	O
pid	int
)	O
;	O
return	O
(	O
!	O
p	pointer
||	O
p	pointer
->	O
p_dead	O
)	O
?	O
0	int
:	O
p	pointer
;	O
}	O
struct	O
proc	O
*	O
pid_find_allow_zombie	function
(	O
pid_t	O
pid	int
)	O
{	O
return	O
hurd_ihash_find	function
(	O
&	O
pidhash	struct
,	O
pid	int
)	O
;	O
}	O
struct	O
proc	O
*	O
task_find	function
(	O
task_t	O
task	int
)	O
{	O
struct	O
proc	O
*	O
p	pointer
;	O
p	pointer
=	O
hurd_ihash_find	function
(	O
&	O
taskhash	struct
,	O
task	int
)	O
?	O
:	O
add_tasks	function
(	O
task	int
)	O
;	O
return	O
(	O
!	O
p	pointer
||	O
p	pointer
->	O
p_dead	O
)	O
?	O
0	int
:	O
p	pointer
;	O
}	O
struct	O
proc	O
*	O
task_find_nocreate	function
(	O
task_t	O
task	int
)	O
{	O
struct	O
proc	O
*	O
p	pointer
;	O
p	pointer
=	O
hurd_ihash_find	function
(	O
&	O
taskhash	struct
,	O
task	int
)	O
;	O
return	O
(	O
!	O
p	pointer
||	O
p	pointer
->	O
p_dead	O
)	O
?	O
0	int
:	O
p	pointer
;	O
}	O
struct	O
pgrp	O
*	O
pgrp_find	function
(	O
pid_t	O
pgid	int
)	O
{	O
return	O
hurd_ihash_find	function
(	O
&	O
pghash	struct
,	O
pgid	int
)	O
;	O
}	O
struct	O
session	O
*	O
session_find	function
(	O
pid_t	O
sid	int
)	O
{	O
return	O
hurd_ihash_find	function
(	O
&	O
sidhash	struct
,	O
sid	int
)	O
;	O
}	O
void	O
add_proc_to_hash	function
(	O
struct	O
proc	O
*	O
p	pointer
)	O
{	O
hurd_ihash_add	function
(	O
&	O
pidhash	struct
,	O
p	pointer
->	O
p_pid	O
,	O
p	pointer
)	O
;	O
hurd_ihash_add	function
(	O
&	O
taskhash	struct
,	O
p	pointer
->	O
p_task	O
,	O
p	pointer
)	O
;	O
}	O
void	O
add_pgrp_to_hash	function
(	O
struct	O
pgrp	O
*	O
pg	pointer
)	O
{	O
hurd_ihash_add	function
(	O
&	O
pghash	struct
,	O
pg	pointer
->	O
pg_pgid	O
,	O
pg	pointer
)	O
;	O
}	O
void	O
add_session_to_hash	function
(	O
struct	O
session	O
*	O
s	pointer
)	O
{	O
hurd_ihash_add	function
(	O
&	O
sidhash	struct
,	O
s	pointer
->	O
s_sid	O
,	O
s	pointer
)	O
;	O
}	O
void	O
remove_pgrp_from_hash	function
(	O
struct	O
pgrp	O
*	O
pg	pointer
)	O
{	O
hurd_ihash_locp_remove	function
(	O
&	O
pghash	struct
,	O
pg	pointer
->	O
pg_hashloc	O
)	O
;	O
}	O
void	O
remove_proc_from_hash	function
(	O
struct	O
proc	O
*	O
p	pointer
)	O
{	O
hurd_ihash_locp_remove	function
(	O
&	O
pidhash	struct
,	O
p	pointer
->	O
p_pidhashloc	O
)	O
;	O
hurd_ihash_locp_remove	function
(	O
&	O
taskhash	struct
,	O
p	pointer
->	O
p_taskhashloc	O
)	O
;	O
}	O
void	O
remove_session_from_hash	function
(	O
struct	O
session	O
*	O
s	pointer
)	O
{	O
hurd_ihash_locp_remove	function
(	O
&	O
sidhash	struct
,	O
s	pointer
->	O
s_hashloc	O
)	O
;	O
}	O
void	O
prociterate	function
(	O
void	O
(	O
*	O
fun	pointer
)	O
(	O
struct	O
proc	O
*	O
,	O
void	O
*	O
)	O
,	O
void	O
*	O
arg	pointer
)	O
{	O
HURD_IHASH_ITERATE	function
(	O
&	O
pidhash	struct
,	O
value	O
)	O
{	O
struct	O
proc	O
*	O
p	pointer
=	O
value	O
;	O
if	O
(	O
!	O
p	pointer
->	O
p_dead	O
)	O
(	O
*	O
fun	pointer
)	O
(	O
p	pointer
,	O
arg	pointer
)	O
;	O
}	O
}	O
int	O
pidfree	function
(	O
pid_t	O
pid	int
)	O
{	O
return	O
(	O
!	O
pid_find_allow_zombie	function
(	O
pid	int
)	O
&&	O
!	O
pgrp_find	function
(	O
pid	int
)	O
&&	O
!	O
session_find	function
(	O
pid	int
)	O
)	O
;	O
}	O
