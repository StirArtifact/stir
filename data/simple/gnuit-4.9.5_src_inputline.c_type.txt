extern	O
int	O
AnsiColors	int
;	O
static	O
char	O
*	O
InputLineFields	array
[	O
INPUTLINE_FIELDS	int
]	O
=	O
{	O
"InputLineForeground"	pointer
,	O
"InputLineBackground"	pointer
,	O
"InputLineBrightness"	pointer
,	O
"InputLineErrorForeground"	pointer
,	O
"InputLineErrorBackground"	pointer
,	O
"InputLineErrorBrightness"	pointer
,	O
}	O
;	O
static	O
int	O
InputLineColors	array
[	O
INPUTLINE_FIELDS	int
]	O
=	O
{	O
WHITE	int
,	O
BLACK	int
,	O
ON	int
,	O
RED	int
,	O
BLACK	int
,	O
ON	int
}	O
;	O
input_line_t	struct
*	O
il	pointer
=	O
NULL	O
;	O
static	O
int	O
il_separator	function
(	O
c	char
)	O
char	O
c	char
;	O
{	O
if	O
(	O
(	O
c	char
>=	O
'a'	O
&&	O
c	char
<=	O
'z'	O
)	O
||	O
(	O
c	char
>=	O
'A'	O
&&	O
c	char
<=	O
'Z'	O
)	O
||	O
(	O
c	char
>=	O
'0'	O
&&	O
c	char
<=	O
'9'	O
)	O
||	O
(	O
c	char
==	O
'$'	O
)	O
||	O
(	O
c	char
==	O
'%'	O
)	O
)	O
return	O
0	int
;	O
else	O
return	O
1	int
;	O
}	O
static	O
void	O
il_region_command	function
(	O
flags	int
)	O
int	O
flags	int
;	O
{	O
size_t	long
region_start	long
;	O
size_t	long
region_end	long
;	O
size_t	long
region_size	long
;	O
if	O
(	O
il	pointer
->	O
mark	long
==	O
il	pointer
->	O
point	long
)	O
return	O
;	O
if	O
(	O
il	pointer
->	O
mark	long
>	O
il	pointer
->	O
point	long
)	O
{	O
region_start	long
=	O
il	pointer
->	O
point	long
;	O
region_end	long
=	O
il	pointer
->	O
mark	long
;	O
}	O
else	O
{	O
region_start	long
=	O
il	pointer
->	O
mark	long
;	O
region_end	long
=	O
il	pointer
->	O
point	long
;	O
}	O
region_size	long
=	O
region_end	long
-	O
region_start	long
;	O
if	O
(	O
flags	int
&	O
IL_STORE	int
)	O
{	O
if	O
(	O
il	pointer
->	O
kill_ring	pointer
)	O
xfree	function
(	O
il	pointer
->	O
kill_ring	pointer
)	O
;	O
il	pointer
->	O
kill_ring	pointer
=	O
xmalloc	function
(	O
region_size	long
+	O
1	int
)	O
;	O
memcpy	function
(	O
il	pointer
->	O
kill_ring	pointer
,	O
il	pointer
->	O
buffer	pointer
+	O
region_start	long
,	O
region_size	long
)	O
;	O
il	pointer
->	O
kill_ring	pointer
[	O
region_size	long
]	O
=	O
'\0'	O
;	O
}	O
if	O
(	O
flags	int
&	O
IL_KILL	int
)	O
{	O
il	pointer
->	O
dynamic_length	long
-=	O
region_size	long
;	O
il	pointer
->	O
length	int
-=	O
region_size	long
;	O
il	pointer
->	O
point	long
=	O
region_start	long
;	O
il	pointer
->	O
mark	long
=	O
region_start	long
;	O
strcpy	function
(	O
il	pointer
->	O
buffer	pointer
+	O
region_start	long
,	O
il	pointer
->	O
buffer	pointer
+	O
region_end	long
)	O
;	O
IL_RESIZE	O
(	O
il	pointer
->	O
length	int
+	O
1	int
)	O
;	O
}	O
}	O
void	O
il_free	function
(	O
some_il	pointer
)	O
input_line_t	struct
*	O
some_il	pointer
;	O
{	O
if	O
(	O
some_il	pointer
==	O
NULL	O
)	O
return	O
;	O
if	O
(	O
some_il	pointer
->	O
buffer	pointer
)	O
xfree	function
(	O
some_il	pointer
->	O
buffer	pointer
)	O
;	O
if	O
(	O
some_il	pointer
->	O
kill_ring	pointer
)	O
xfree	function
(	O
some_il	pointer
->	O
kill_ring	pointer
)	O
;	O
xfree	function
(	O
some_il	pointer
)	O
;	O
}	O
static	O
size_t	long
il_compute_scroll	function
(	O
)	O
{	O
return	O
max	O
(	O
(	O
il	pointer
->	O
columns	int
-	O
il	pointer
->	O
static_length	long
)	O
/	O
4	int
,	O
1	int
)	O
;	O
}	O
void	O
il_init	function
(	O
)	O
{	O
char	O
*	O
data	pointer
;	O
il	pointer
=	O
(	O
input_line_t	struct
*	O
)	O
xmalloc	function
(	O
sizeof	O
(	O
input_line_t	struct
)	O
)	O
;	O
il	pointer
->	O
echo	int
=	O
1	int
;	O
il	pointer
->	O
error	int
=	O
0	int
;	O
il	pointer
->	O
buffer	pointer
=	O
NULL	O
;	O
il	pointer
->	O
kill_ring	pointer
=	O
NULL	O
;	O
il	pointer
->	O
columns	int
=	O
0	int
;	O
il	pointer
->	O
line	pointer
=	O
0	int
;	O
il_reset_line	function
(	O
)	O
;	O
il	pointer
->	O
window	pointer
=	O
window_init	function
(	O
)	O
;	O
use_section	function
(	O
"[GITFM-Setup]"	pointer
)	O
;	O
configuration_getvarinfo	function
(	O
"HistoryFile"	pointer
,	O
&	O
data	pointer
,	O
1	int
,	O
DO_SEEK	int
)	O
;	O
il	pointer
->	O
history_file	pointer
=	O
tilde_expand	function
(	O
data	pointer
?	O
data	pointer
:	O
"~/.githistory"	pointer
)	O
;	O
use_section	function
(	O
AnsiColors	int
?	O
color_section	array
:	O
monochrome_section	array
)	O
;	O
get_colorset_var	function
(	O
InputLineColors	array
,	O
InputLineFields	array
,	O
INPUTLINE_FIELDS	int
)	O
;	O
using_history	function
(	O
)	O
;	O
read_history	function
(	O
il	pointer
->	O
history_file	pointer
)	O
;	O
while	O
(	O
next_history	function
(	O
)	O
)	O
;	O
stifle_history	function
(	O
MAX_INPUT_HISTORY	int
)	O
;	O
}	O
void	O
il_end	function
(	O
)	O
{	O
write_history	function
(	O
il	pointer
->	O
history_file	pointer
)	O
;	O
window_end	function
(	O
il	pointer
->	O
window	pointer
)	O
;	O
il_free	function
(	O
il	pointer
)	O
;	O
il	pointer
=	O
NULL	O
;	O
}	O
void	O
il_resize	function
(	O
_columns	int
,	O
_line	int
)	O
int	O
_columns	int
,	O
_line	int
;	O
{	O
il	pointer
->	O
columns	int
=	O
_columns	int
;	O
il	pointer
->	O
line	pointer
=	O
_line	int
;	O
window_resize	function
(	O
il	pointer
->	O
window	pointer
,	O
0	int
,	O
_line	int
,	O
1	int
,	O
_columns	int
)	O
;	O
}	O
input_line_t	struct
*	O
il_save	function
(	O
)	O
{	O
input_line_t	struct
*	O
saved_il	pointer
=	O
(	O
input_line_t	struct
*	O
)	O
xmalloc	function
(	O
sizeof	O
(	O
input_line_t	struct
)	O
)	O
;	O
*	O
saved_il	pointer
=	O
*	O
il	pointer
;	O
if	O
(	O
saved_il	pointer
->	O
buffer	pointer
)	O
{	O
il	pointer
->	O
buffer	pointer
=	O
xmalloc	function
(	O
saved_il	pointer
->	O
size	int
)	O
;	O
memcpy	function
(	O
il	pointer
->	O
buffer	pointer
,	O
saved_il	pointer
->	O
buffer	pointer
,	O
saved_il	pointer
->	O
size	int
)	O
;	O
}	O
if	O
(	O
saved_il	pointer
->	O
kill_ring	pointer
)	O
il	pointer
->	O
kill_ring	pointer
=	O
xstrdup	function
(	O
saved_il	pointer
->	O
kill_ring	pointer
)	O
;	O
return	O
saved_il	pointer
;	O
}	O
void	O
il_restore	function
(	O
saved_il	pointer
)	O
input_line_t	struct
*	O
saved_il	pointer
;	O
{	O
size_t	long
columns	int
=	O
il	pointer
->	O
columns	int
;	O
size_t	long
line	pointer
=	O
il	pointer
->	O
line	pointer
;	O
if	O
(	O
saved_il	pointer
==	O
NULL	O
)	O
return	O
;	O
il_free	function
(	O
il	pointer
)	O
;	O
il	pointer
=	O
saved_il	pointer
;	O
il_resize	function
(	O
columns	int
,	O
line	pointer
)	O
;	O
}	O
size_t	long
il_point	function
(	O
)	O
{	O
return	O
il	pointer
->	O
point	long
-	O
il	pointer
->	O
static_length	long
;	O
}	O
int	O
il_echo	function
(	O
echo	int
)	O
int	O
echo	int
;	O
{	O
int	O
old_echo_flag	int
=	O
il	pointer
->	O
echo	int
;	O
il	pointer
->	O
echo	int
=	O
echo	int
;	O
return	O
old_echo_flag	int
;	O
}	O
int	O
il_is_empty	function
(	O
)	O
{	O
return	O
il	pointer
->	O
dynamic_length	long
==	O
0	int
;	O
}	O
void	O
il_set_mark	function
(	O
)	O
{	O
il	pointer
->	O
mark	long
=	O
il	pointer
->	O
point	long
;	O
}	O
void	O
il_kill_region	function
(	O
)	O
{	O
il_region_command	function
(	O
IL_STORE	int
|	O
IL_KILL	int
)	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_KILL_REGION	int
;	O
}	O
void	O
il_kill_ring_save	function
(	O
)	O
{	O
il_region_command	function
(	O
IL_STORE	int
)	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_KILL_RING_SAVE	int
;	O
}	O
void	O
il_yank	function
(	O
)	O
{	O
if	O
(	O
il	pointer
->	O
kill_ring	pointer
)	O
{	O
il_insert_text	function
(	O
il	pointer
->	O
kill_ring	pointer
)	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_YANK	int
;	O
}	O
}	O
void	O
il_exchange_point_and_mark	function
(	O
)	O
{	O
int	O
point	long
=	O
il	pointer
->	O
point	long
;	O
il	pointer
->	O
point	long
=	O
il	pointer
->	O
mark	long
;	O
il	pointer
->	O
mark	long
=	O
point	long
;	O
}	O
void	O
il_backward_char	function
(	O
)	O
{	O
if	O
(	O
il	pointer
->	O
point	long
>	O
il	pointer
->	O
static_length	long
)	O
{	O
il	pointer
->	O
point	long
--	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_BACKWARD_CHAR	int
;	O
}	O
}	O
void	O
il_forward_char	function
(	O
)	O
{	O
if	O
(	O
il	pointer
->	O
point	long
<	O
il	pointer
->	O
length	int
)	O
{	O
il	pointer
->	O
point	long
++	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_FORWARD_CHAR	int
;	O
}	O
}	O
void	O
il_backward_word	function
(	O
)	O
{	O
if	O
(	O
il	pointer
->	O
point	long
>	O
il	pointer
->	O
static_length	long
)	O
{	O
while	O
(	O
il	pointer
->	O
point	long
>	O
il	pointer
->	O
static_length	long
&&	O
il_separator	function
(	O
il	pointer
->	O
buffer	pointer
[	O
il	pointer
->	O
point	long
-	O
1	int
]	O
)	O
)	O
il_backward_char	function
(	O
)	O
;	O
while	O
(	O
il	pointer
->	O
point	long
>	O
il	pointer
->	O
static_length	long
&&	O
!	O
il_separator	function
(	O
il	pointer
->	O
buffer	pointer
[	O
il	pointer
->	O
point	long
-	O
1	int
]	O
)	O
)	O
il_backward_char	function
(	O
)	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_BACKWARD_WORD	int
;	O
}	O
}	O
void	O
il_forward_word	function
(	O
)	O
{	O
if	O
(	O
il	pointer
->	O
point	long
<	O
il	pointer
->	O
length	int
)	O
{	O
while	O
(	O
il	pointer
->	O
point	long
<	O
il	pointer
->	O
length	int
&&	O
il_separator	function
(	O
il	pointer
->	O
buffer	pointer
[	O
il	pointer
->	O
point	long
]	O
)	O
)	O
il_forward_char	function
(	O
)	O
;	O
while	O
(	O
il	pointer
->	O
point	long
<	O
il	pointer
->	O
length	int
&&	O
!	O
il_separator	function
(	O
il	pointer
->	O
buffer	pointer
[	O
il	pointer
->	O
point	long
]	O
)	O
)	O
il_forward_char	function
(	O
)	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_FORWARD_WORD	int
;	O
}	O
}	O
void	O
il_beginning_of_line	function
(	O
)	O
{	O
il	pointer
->	O
point	long
=	O
il	pointer
->	O
static_length	long
;	O
il	pointer
->	O
last_operation	int
=	O
IL_BEGINNING_OF_LINE	int
;	O
}	O
void	O
il_end_of_line	function
(	O
)	O
{	O
il	pointer
->	O
point	long
=	O
il	pointer
->	O
length	int
;	O
il	pointer
->	O
last_operation	int
=	O
IL_END_OF_LINE	int
;	O
}	O
void	O
il_insert_char	function
(	O
c	char
)	O
int	O
c	char
;	O
{	O
if	O
(	O
!	O
isprint	function
(	O
c	char
)	O
)	O
return	O
;	O
if	O
(	O
il	pointer
->	O
length	int
+	O
1	int
>=	O
il	pointer
->	O
size	int
)	O
IL_RESIZE	O
(	O
il	pointer
->	O
length	int
+	O
1	int
+	O
32	int
)	O
;	O
memmove	function
(	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
point	long
+	O
1	int
,	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
point	long
,	O
il	pointer
->	O
length	int
-	O
il	pointer
->	O
point	long
+	O
1	int
)	O
;	O
il	pointer
->	O
buffer	pointer
[	O
il	pointer
->	O
point	long
]	O
=	O
c	char
;	O
il	pointer
->	O
point	long
++	O
;	O
il	pointer
->	O
length	int
++	O
;	O
il	pointer
->	O
dynamic_length	long
++	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_INSERT_CHAR	int
;	O
}	O
void	O
il_delete_char	function
(	O
)	O
{	O
if	O
(	O
il	pointer
->	O
point	long
<	O
il	pointer
->	O
length	int
)	O
{	O
memcpy	function
(	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
point	long
,	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
point	long
+	O
1	int
,	O
il	pointer
->	O
length	int
-	O
il	pointer
->	O
point	long
+	O
1	int
)	O
;	O
il	pointer
->	O
length	int
--	O
;	O
il	pointer
->	O
dynamic_length	long
--	O
;	O
if	O
(	O
il	pointer
->	O
length	int
%	O
16	int
==	O
0	int
)	O
IL_RESIZE	O
(	O
il	pointer
->	O
length	int
+	O
1	int
)	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_DELETE_CHAR	int
;	O
}	O
}	O
void	O
il_backward_delete_char	function
(	O
)	O
{	O
if	O
(	O
il	pointer
->	O
point	long
>	O
il	pointer
->	O
static_length	long
)	O
{	O
memcpy	function
(	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
point	long
-	O
1	int
,	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
point	long
,	O
il	pointer
->	O
length	int
-	O
il	pointer
->	O
point	long
+	O
1	int
)	O
;	O
il	pointer
->	O
point	long
--	O
;	O
il	pointer
->	O
length	int
--	O
;	O
il	pointer
->	O
dynamic_length	long
--	O
;	O
if	O
(	O
il	pointer
->	O
length	int
%	O
16	int
==	O
0	int
)	O
IL_RESIZE	O
(	O
il	pointer
->	O
length	int
+	O
1	int
)	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_BACKWARD_DELETE_CHAR	int
;	O
}	O
}	O
void	O
il_kill_word	function
(	O
)	O
{	O
size_t	long
end_of_word	long
;	O
size_t	long
old_mark	long
=	O
il	pointer
->	O
mark	long
;	O
il_set_mark	function
(	O
)	O
;	O
il_forward_word	function
(	O
)	O
;	O
end_of_word	long
=	O
il	pointer
->	O
point	long
;	O
il_region_command	function
(	O
IL_STORE	int
|	O
IL_KILL	int
)	O
;	O
if	O
(	O
old_mark	long
<=	O
il	pointer
->	O
point	long
)	O
il	pointer
->	O
mark	long
=	O
old_mark	long
;	O
else	O
if	O
(	O
old_mark	long
>=	O
end_of_word	long
)	O
il	pointer
->	O
mark	long
=	O
old_mark	long
-	O
(	O
end_of_word	long
-	O
il	pointer
->	O
point	long
)	O
;	O
else	O
il	pointer
->	O
mark	long
=	O
il	pointer
->	O
point	long
;	O
il	pointer
->	O
last_operation	int
=	O
IL_KILL_WORD	int
;	O
}	O
void	O
il_backward_kill_word	function
(	O
)	O
{	O
size_t	long
old_mark	long
=	O
il	pointer
->	O
mark	long
;	O
size_t	long
old_point	long
=	O
il	pointer
->	O
point	long
;	O
il_set_mark	function
(	O
)	O
;	O
il_backward_word	function
(	O
)	O
;	O
il_region_command	function
(	O
IL_STORE	int
|	O
IL_KILL	int
)	O
;	O
if	O
(	O
old_mark	long
<=	O
il	pointer
->	O
point	long
)	O
il	pointer
->	O
mark	long
=	O
old_mark	long
;	O
else	O
if	O
(	O
old_mark	long
>=	O
old_point	long
)	O
il	pointer
->	O
mark	long
=	O
old_mark	long
-	O
(	O
old_point	long
-	O
il	pointer
->	O
point	long
)	O
;	O
else	O
il	pointer
->	O
mark	long
=	O
il	pointer
->	O
point	long
;	O
il	pointer
->	O
last_operation	int
=	O
IL_BACKWARD_KILL_WORD	int
;	O
}	O
void	O
il_reset_line	function
(	O
)	O
{	O
il	pointer
->	O
point	long
=	O
0	int
;	O
il	pointer
->	O
mark	long
=	O
0	int
;	O
il	pointer
->	O
length	int
=	O
0	int
;	O
il	pointer
->	O
static_length	long
=	O
0	int
;	O
il	pointer
->	O
dynamic_length	long
=	O
0	int
;	O
IL_RESIZE	O
(	O
1	int
)	O
;	O
il	pointer
->	O
buffer	pointer
[	O
0	int
]	O
=	O
'\0'	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_RESET_LINE	int
;	O
}	O
void	O
il_kill_line	function
(	O
store	int
)	O
int	O
store	int
;	O
{	O
il_beginning_of_line	function
(	O
)	O
;	O
il_set_mark	function
(	O
)	O
;	O
il_end_of_line	function
(	O
)	O
;	O
il_region_command	function
(	O
store	int
|	O
IL_KILL	int
)	O
;	O
il	pointer
->	O
mark	long
=	O
il	pointer
->	O
point	long
;	O
il	pointer
->	O
last_operation	int
=	O
IL_KILL_LINE	int
;	O
}	O
void	O
il_kill_to_beginning_of_line	function
(	O
)	O
{	O
size_t	long
old_mark	long
=	O
(	O
il	pointer
->	O
mark	long
<=	O
il	pointer
->	O
point	long
)	O
?	O
il	pointer
->	O
static_length	long
:	O
il	pointer
->	O
mark	long
-	O
il	pointer
->	O
point	long
;	O
il_set_mark	function
(	O
)	O
;	O
il_beginning_of_line	function
(	O
)	O
;	O
il_region_command	function
(	O
IL_STORE	int
|	O
IL_KILL	int
)	O
;	O
il	pointer
->	O
mark	long
=	O
min	O
(	O
old_mark	long
,	O
il	pointer
->	O
length	int
)	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_KILL_TO_BEGINNING_OF_LINE	int
;	O
}	O
void	O
il_kill_to_end_of_line	function
(	O
)	O
{	O
size_t	long
old_mark	long
=	O
il	pointer
->	O
mark	long
;	O
il_set_mark	function
(	O
)	O
;	O
il_end_of_line	function
(	O
)	O
;	O
il_region_command	function
(	O
IL_STORE	int
|	O
IL_KILL	int
)	O
;	O
il	pointer
->	O
mark	long
=	O
min	O
(	O
old_mark	long
,	O
il	pointer
->	O
length	int
)	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_KILL_TO_END_OF_LINE	int
;	O
}	O
void	O
il_just_one_space	function
(	O
)	O
{	O
if	O
(	O
il	pointer
->	O
buffer	pointer
[	O
il	pointer
->	O
point	long
]	O
==	O
' '	O
)	O
{	O
il_delete_horizontal_space	function
(	O
)	O
;	O
il_insert_char	function
(	O
' '	O
)	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_JUST_ONE_SPACE	int
;	O
}	O
}	O
void	O
il_delete_horizontal_space	function
(	O
)	O
{	O
if	O
(	O
il	pointer
->	O
buffer	pointer
[	O
il	pointer
->	O
point	long
]	O
==	O
' '	O
)	O
{	O
while	O
(	O
il	pointer
->	O
buffer	pointer
[	O
il	pointer
->	O
point	long
]	O
==	O
' '	O
)	O
il_delete_char	function
(	O
)	O
;	O
while	O
(	O
il	pointer
->	O
dynamic_length	long
&&	O
il	pointer
->	O
buffer	pointer
[	O
il	pointer
->	O
point	long
-	O
1	int
]	O
==	O
' '	O
)	O
il_backward_delete_char	function
(	O
)	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_DELETE_HORIZONTAL_SPACE	int
;	O
}	O
}	O
void	O
il_downcase_word	function
(	O
)	O
{	O
if	O
(	O
il	pointer
->	O
point	long
<	O
il	pointer
->	O
length	int
)	O
{	O
size_t	long
i	long
;	O
size_t	long
previous_point	long
=	O
il	pointer
->	O
point	long
;	O
il_forward_word	function
(	O
)	O
;	O
for	O
(	O
i	long
=	O
previous_point	long
;	O
i	long
<	O
il	pointer
->	O
point	long
;	O
i	long
++	O
)	O
il	pointer
->	O
buffer	pointer
[	O
i	long
]	O
=	O
tolower	function
(	O
(	O
int	O
)	O
il	pointer
->	O
buffer	pointer
[	O
i	long
]	O
)	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_DOWNCASE_WORD	int
;	O
}	O
}	O
void	O
il_upcase_word	function
(	O
)	O
{	O
if	O
(	O
il	pointer
->	O
point	long
<	O
il	pointer
->	O
length	int
)	O
{	O
size_t	long
i	long
;	O
size_t	long
previous_point	long
=	O
il	pointer
->	O
point	long
;	O
il_forward_word	function
(	O
)	O
;	O
for	O
(	O
i	long
=	O
previous_point	long
;	O
i	long
<	O
il	pointer
->	O
point	long
;	O
i	long
++	O
)	O
il	pointer
->	O
buffer	pointer
[	O
i	long
]	O
=	O
toupper	function
(	O
(	O
int	O
)	O
il	pointer
->	O
buffer	pointer
[	O
i	long
]	O
)	O
;	O
il	pointer
->	O
last_operation	int
=	O
IL_UPCASE_WORD	int
;	O
}	O
}	O
void	O
il_capitalize_word	function
(	O
)	O
{	O
if	O
(	O
il	pointer
->	O
point	long
<	O
il	pointer
->	O
length	int
)	O
{	O
size_t	long
i	long
;	O
int	O
first	int
=	O
1	int
;	O
size_t	long
previous_point	long
=	O
il	pointer
->	O
point	long
;	O
il_forward_word	function
(	O
)	O
;	O
for	O
(	O
i	long
=	O
previous_point	long
;	O
i	long
<	O
il	pointer
->	O
point	long
;	O
i	long
++	O
)	O
if	O
(	O
isalnum	function
(	O
(	O
int	O
)	O
il	pointer
->	O
buffer	pointer
[	O
i	long
]	O
)	O
)	O
{	O
if	O
(	O
first	int
)	O
{	O
il	pointer
->	O
buffer	pointer
[	O
i	long
]	O
=	O
toupper	function
(	O
(	O
int	O
)	O
il	pointer
->	O
buffer	pointer
[	O
i	long
]	O
)	O
;	O
first	int
=	O
0	int
;	O
}	O
else	O
il	pointer
->	O
buffer	pointer
[	O
i	long
]	O
=	O
tolower	function
(	O
(	O
int	O
)	O
il	pointer
->	O
buffer	pointer
[	O
i	long
]	O
)	O
;	O
}	O
il	pointer
->	O
last_operation	int
=	O
IL_CAPITALIZE_WORD	int
;	O
}	O
}	O
void	O
il_set_static_text	function
(	O
static_text	pointer
)	O
char	O
*	O
static_text	pointer
;	O
{	O
size_t	long
len	long
;	O
assert	O
(	O
static_text	pointer
)	O
;	O
len	long
=	O
strlen	function
(	O
static_text	pointer
)	O
;	O
il	pointer
->	O
point	long
+=	O
len	long
-	O
il	pointer
->	O
static_length	long
;	O
il	pointer
->	O
mark	long
+=	O
len	long
-	O
il	pointer
->	O
static_length	long
;	O
if	O
(	O
len	long
+	O
il	pointer
->	O
dynamic_length	long
+	O
1	int
>	O
il	pointer
->	O
size	int
)	O
IL_RESIZE	O
(	O
len	long
+	O
il	pointer
->	O
dynamic_length	long
+	O
1	int
)	O
;	O
memmove	function
(	O
il	pointer
->	O
buffer	pointer
+	O
len	long
,	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
static_length	long
,	O
il	pointer
->	O
dynamic_length	long
+	O
1	int
)	O
;	O
memcpy	function
(	O
il	pointer
->	O
buffer	pointer
,	O
static_text	pointer
,	O
len	long
)	O
;	O
toprintable	function
(	O
il	pointer
->	O
buffer	pointer
,	O
len	long
)	O
;	O
il	pointer
->	O
length	int
=	O
(	O
il	pointer
->	O
static_length	long
=	O
len	long
)	O
+	O
il	pointer
->	O
dynamic_length	long
;	O
il	pointer
->	O
last_operation	int
=	O
IL_SET_STATIC_TEXT	int
;	O
}	O
void	O
il_insert_text	function
(	O
text	pointer
)	O
char	O
*	O
text	pointer
;	O
{	O
size_t	long
len	long
;	O
if	O
(	O
text	pointer
==	O
NULL	O
)	O
return	O
;	O
len	long
=	O
strlen	function
(	O
text	pointer
)	O
;	O
if	O
(	O
il	pointer
->	O
length	int
+	O
len	long
+	O
1	int
>	O
il	pointer
->	O
size	int
)	O
IL_RESIZE	O
(	O
il	pointer
->	O
size	int
+	O
len	long
+	O
1	int
+	O
32	int
)	O
;	O
memmove	function
(	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
point	long
+	O
len	long
,	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
point	long
,	O
il	pointer
->	O
length	int
-	O
il	pointer
->	O
point	long
+	O
1	int
)	O
;	O
memcpy	function
(	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
point	long
,	O
text	pointer
,	O
len	long
)	O
;	O
toprintable	function
(	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
point	long
,	O
len	long
)	O
;	O
il	pointer
->	O
point	long
+=	O
len	long
;	O
il	pointer
->	O
length	int
+=	O
len	long
;	O
il	pointer
->	O
dynamic_length	long
+=	O
len	long
;	O
il	pointer
->	O
last_operation	int
=	O
IL_INSERT_TEXT	int
;	O
}	O
static	O
int	O
il_hide_static	function
(	O
)	O
{	O
int	O
normal_static_length	int
=	O
il	pointer
->	O
static_length	long
;	O
il	pointer
->	O
buffer	pointer
+=	O
il	pointer
->	O
static_length	long
;	O
il	pointer
->	O
length	int
-=	O
il	pointer
->	O
static_length	long
;	O
il	pointer
->	O
point	long
-=	O
il	pointer
->	O
static_length	long
;	O
il	pointer
->	O
mark	long
-=	O
il	pointer
->	O
static_length	long
;	O
il	pointer
->	O
static_length	long
=	O
0	int
;	O
return	O
normal_static_length	int
;	O
}	O
static	O
void	O
il_restore_static	function
(	O
normal_static_length	int
)	O
int	O
normal_static_length	int
;	O
{	O
il	pointer
->	O
static_length	long
=	O
normal_static_length	int
;	O
il	pointer
->	O
buffer	pointer
-=	O
il	pointer
->	O
static_length	long
;	O
il	pointer
->	O
length	int
+=	O
il	pointer
->	O
static_length	long
;	O
il	pointer
->	O
point	long
+=	O
il	pointer
->	O
static_length	long
;	O
il	pointer
->	O
mark	long
+=	O
il	pointer
->	O
static_length	long
;	O
}	O
void	O
il_update_point	function
(	O
)	O
{	O
int	O
scroll	int
;	O
size_t	long
len	long
;	O
size_t	long
normal_static_length	int
=	O
0	int
;	O
int	O
il_too_small	int
=	O
il	pointer
->	O
columns	int
<	O
il	pointer
->	O
static_length	long
+	O
3	int
;	O
tty_colors	function
(	O
il	pointer
->	O
error	int
?	O
InputLineErrorBrightness	O
:	O
InputLineBrightness	O
,	O
il	pointer
->	O
error	int
?	O
InputLineErrorForeground	O
:	O
InputLineForeground	O
,	O
il	pointer
->	O
error	int
?	O
InputLineErrorBackground	O
:	O
InputLineBackground	O
)	O
;	O
if	O
(	O
il_too_small	int
)	O
normal_static_length	int
=	O
il_hide_static	function
(	O
)	O
;	O
scroll	int
=	O
il_compute_scroll	function
(	O
)	O
;	O
len	long
=	O
(	O
(	O
il	pointer
->	O
point	long
>=	O
il	pointer
->	O
columns	int
)	O
?	O
il	pointer
->	O
point	long
-	O
il	pointer
->	O
columns	int
+	O
1	int
+	O
(	O
scroll	int
-	O
1	int
)	O
-	O
(	O
(	O
il	pointer
->	O
point	long
-	O
il	pointer
->	O
columns	int
)	O
%	O
scroll	int
)	O
:	O
0	int
)	O
;	O
window_goto	function
(	O
il	pointer
->	O
window	pointer
,	O
0	int
,	O
il	pointer
->	O
point	long
-	O
len	long
)	O
;	O
if	O
(	O
il_too_small	int
)	O
il_restore_static	function
(	O
normal_static_length	int
)	O
;	O
}	O
void	O
il_update	function
(	O
)	O
{	O
int	O
scroll	int
;	O
char	O
*	O
temp	pointer
;	O
unsigned	O
len	long
;	O
tty_status_t	char
status	int
;	O
size_t	long
normal_static_length	int
=	O
0	int
;	O
int	O
il_too_small	int
=	O
il	pointer
->	O
columns	int
<	O
il	pointer
->	O
static_length	long
+	O
3	int
;	O
tty_save	function
(	O
&	O
status	int
)	O
;	O
tty_colors	function
(	O
il	pointer
->	O
error	int
?	O
InputLineErrorBrightness	O
:	O
InputLineBrightness	O
,	O
il	pointer
->	O
error	int
?	O
InputLineErrorForeground	O
:	O
InputLineForeground	O
,	O
il	pointer
->	O
error	int
?	O
InputLineErrorBackground	O
:	O
InputLineBackground	O
)	O
;	O
if	O
(	O
il_too_small	int
)	O
normal_static_length	int
=	O
il_hide_static	function
(	O
)	O
;	O
scroll	int
=	O
il_compute_scroll	function
(	O
)	O
;	O
len	long
=	O
(	O
(	O
il	pointer
->	O
point	long
>=	O
il	pointer
->	O
columns	int
)	O
?	O
il	pointer
->	O
point	long
-	O
il	pointer
->	O
columns	int
+	O
1	int
+	O
(	O
scroll	int
-	O
1	int
)	O
-	O
(	O
(	O
il	pointer
->	O
point	long
-	O
il	pointer
->	O
columns	int
)	O
%	O
scroll	int
)	O
:	O
0	int
)	O
;	O
temp	pointer
=	O
xmalloc	function
(	O
il	pointer
->	O
columns	int
)	O
;	O
memset	function
(	O
temp	pointer
,	O
' '	O
,	O
il	pointer
->	O
columns	int
)	O
;	O
if	O
(	O
il	pointer
->	O
echo	int
)	O
memcpy	function
(	O
temp	pointer
,	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
static_length	long
+	O
len	long
,	O
min	O
(	O
il	pointer
->	O
length	int
-	O
il	pointer
->	O
static_length	long
-	O
len	long
,	O
il	pointer
->	O
columns	int
-	O
il	pointer
->	O
static_length	long
)	O
)	O
;	O
else	O
memset	function
(	O
temp	pointer
,	O
'*'	O
,	O
min	O
(	O
il	pointer
->	O
length	int
-	O
il	pointer
->	O
static_length	long
-	O
len	long
,	O
il	pointer
->	O
columns	int
-	O
il	pointer
->	O
static_length	long
)	O
)	O
;	O
window_goto	function
(	O
il	pointer
->	O
window	pointer
,	O
0	int
,	O
0	int
)	O
;	O
if	O
(	O
!	O
il_too_small	int
)	O
window_puts	function
(	O
il	pointer
->	O
window	pointer
,	O
il	pointer
->	O
buffer	pointer
,	O
il	pointer
->	O
static_length	long
)	O
;	O
window_puts	function
(	O
il	pointer
->	O
window	pointer
,	O
temp	pointer
,	O
il	pointer
->	O
columns	int
-	O
il	pointer
->	O
static_length	long
)	O
;	O
window_goto	function
(	O
il	pointer
->	O
window	pointer
,	O
0	int
,	O
il	pointer
->	O
point	long
-	O
len	long
)	O
;	O
if	O
(	O
il_too_small	int
)	O
il_restore_static	function
(	O
normal_static_length	int
)	O
;	O
xfree	function
(	O
temp	pointer
)	O
;	O
tty_restore	function
(	O
&	O
status	int
)	O
;	O
}	O
int	O
il_get_contents	function
(	O
dest	pointer
)	O
char	O
*	O
*	O
dest	pointer
;	O
{	O
*	O
dest	pointer
=	O
xrealloc	function
(	O
*	O
dest	pointer
,	O
il	pointer
->	O
dynamic_length	long
+	O
1	int
)	O
;	O
memcpy	function
(	O
*	O
dest	pointer
,	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
static_length	long
,	O
il	pointer
->	O
dynamic_length	long
+	O
1	int
)	O
;	O
return	O
il	pointer
->	O
dynamic_length	long
;	O
}	O
void	O
il_message	function
(	O
message	pointer
)	O
char	O
*	O
message	pointer
;	O
{	O
il_reset_line	function
(	O
)	O
;	O
il_set_static_text	function
(	O
message	pointer
?	O
message	pointer
:	O
"Wait...."	pointer
)	O
;	O
il_update	function
(	O
)	O
;	O
il_update_point	function
(	O
)	O
;	O
}	O
void	O
il_set_error_flag	function
(	O
flag	int
)	O
int	O
flag	int
;	O
{	O
il	pointer
->	O
error	int
=	O
flag	int
;	O
}	O
void	O
il_history	function
(	O
dir	int
)	O
int	O
dir	int
;	O
{	O
static	O
int	O
browsing	int
=	O
0	int
;	O
static	O
int	O
last_history_position	int
;	O
HIST_ENTRY	struct
*	O
hist	pointer
;	O
switch	O
(	O
dir	int
)	O
{	O
case	O
IL_PREVIOUS	int
:	O
if	O
(	O
!	O
browsing	int
)	O
{	O
browsing	int
=	O
1	int
;	O
last_history_position	int
=	O
where_history	function
(	O
)	O
;	O
}	O
if	O
(	O
(	O
hist	pointer
=	O
previous_history	function
(	O
)	O
)	O
)	O
{	O
il	pointer
->	O
dynamic_length	long
=	O
strlen	function
(	O
hist	pointer
->	O
line	pointer
)	O
;	O
il	pointer
->	O
length	int
=	O
il	pointer
->	O
static_length	long
+	O
il	pointer
->	O
dynamic_length	long
;	O
il	pointer
->	O
point	long
=	O
il	pointer
->	O
length	int
;	O
if	O
(	O
il	pointer
->	O
length	int
+	O
1	int
>	O
il	pointer
->	O
size	int
)	O
IL_RESIZE	O
(	O
il	pointer
->	O
length	int
+	O
1	int
)	O
;	O
strcpy	function
(	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
static_length	long
,	O
hist	pointer
->	O
line	pointer
)	O
;	O
il_update	function
(	O
)	O
;	O
}	O
break	O
;	O
case	O
IL_NEXT	int
:	O
if	O
(	O
!	O
browsing	int
)	O
{	O
browsing	int
=	O
1	int
;	O
last_history_position	int
=	O
where_history	function
(	O
)	O
;	O
}	O
if	O
(	O
(	O
hist	pointer
=	O
next_history	function
(	O
)	O
)	O
)	O
{	O
il	pointer
->	O
dynamic_length	long
=	O
strlen	function
(	O
hist	pointer
->	O
line	pointer
)	O
;	O
il	pointer
->	O
length	int
=	O
il	pointer
->	O
static_length	long
+	O
il	pointer
->	O
dynamic_length	long
;	O
il	pointer
->	O
point	long
=	O
il	pointer
->	O
length	int
;	O
if	O
(	O
il	pointer
->	O
length	int
+	O
1	int
>	O
il	pointer
->	O
size	int
)	O
IL_RESIZE	O
(	O
il	pointer
->	O
length	int
+	O
1	int
)	O
;	O
strcpy	function
(	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
static_length	long
,	O
hist	pointer
->	O
line	pointer
)	O
;	O
}	O
else	O
il_kill_line	function
(	O
IL_DONT_STORE	int
)	O
;	O
il_update	function
(	O
)	O
;	O
break	O
;	O
case	O
IL_RECORD	int
:	O
if	O
(	O
browsing	int
)	O
{	O
history_set_pos	function
(	O
last_history_position	int
)	O
;	O
browsing	int
=	O
0	int
;	O
}	O
if	O
(	O
(	O
hist	pointer
=	O
previous_history	function
(	O
)	O
)	O
)	O
{	O
if	O
(	O
strcmp	function
(	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
static_length	long
,	O
hist	pointer
->	O
line	pointer
)	O
!=	O
0	int
)	O
{	O
add_history	function
(	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
static_length	long
)	O
;	O
next_history	function
(	O
)	O
;	O
}	O
}	O
else	O
add_history	function
(	O
il	pointer
->	O
buffer	pointer
+	O
il	pointer
->	O
static_length	long
)	O
;	O
next_history	function
(	O
)	O
;	O
break	O
;	O
default	O
:	O
break	O
;	O
}	O
}	O
