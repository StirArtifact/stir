int	O
_API_pentype	O
(	O
R___	O
(	O
Plotter	struct
*	O
_plotter	pointer
)	O
int	O
level	int
)	O
{	O
if	O
(	O
!	O
_plotter	pointer
->	O
data	pointer
->	O
open	enum
)	O
{	O
_plotter	pointer
->	O
error	pointer
(	O
R___	O
(	O
_plotter	pointer
)	O
"pentype: invalid operation"	pointer
)	O
;	O
return	O
-	O
1	int
;	O
}	O
_API_endpath	O
(	O
S___	O
(	O
_plotter	pointer
)	O
)	O
;	O
if	O
(	O
(	O
level	int
<	O
0	int
)	O
||	O
(	O
level	int
>	O
0xffff	int
)	O
)	O
level	int
=	O
_default_drawstate	struct
.	O
pen_type	int
;	O
_plotter	pointer
->	O
drawstate	pointer
->	O
pen_type	int
=	O
level	int
;	O
return	O
0	int
;	O
}	O
int	O
_API_filltype	O
(	O
R___	O
(	O
Plotter	struct
*	O
_plotter	pointer
)	O
int	O
level	int
)	O
{	O
int	O
red	int
,	O
green	int
,	O
blue	int
;	O
double	O
red_d	double
,	O
green_d	double
,	O
blue_d	double
;	O
double	O
desaturate	double
;	O
plColor	struct
new_rgb	struct
;	O
if	O
(	O
!	O
_plotter	pointer
->	O
data	pointer
->	O
open	enum
)	O
{	O
_plotter	pointer
->	O
error	pointer
(	O
R___	O
(	O
_plotter	pointer
)	O
"filltype: invalid operation"	pointer
)	O
;	O
return	O
-	O
1	int
;	O
}	O
_API_endpath	O
(	O
S___	O
(	O
_plotter	pointer
)	O
)	O
;	O
if	O
(	O
(	O
level	int
<	O
0	int
)	O
||	O
(	O
level	int
>	O
0xffff	int
)	O
)	O
level	int
=	O
_default_drawstate	struct
.	O
fill_type	int
;	O
_plotter	pointer
->	O
drawstate	pointer
->	O
fill_type	int
=	O
level	int
;	O
if	O
(	O
level	int
==	O
0	int
)	O
return	O
0	int
;	O
red	int
=	O
_plotter	pointer
->	O
drawstate	pointer
->	O
fillcolor_base	struct
.	O
red	int
;	O
green	int
=	O
_plotter	pointer
->	O
drawstate	pointer
->	O
fillcolor_base	struct
.	O
green	int
;	O
blue	int
=	O
_plotter	pointer
->	O
drawstate	pointer
->	O
fillcolor_base	struct
.	O
blue	int
;	O
red_d	double
=	O
(	O
(	O
double	O
)	O
red	int
)	O
/	O
0xFFFF	int
;	O
green_d	double
=	O
(	O
(	O
double	O
)	O
green	int
)	O
/	O
0xFFFF	int
;	O
blue_d	double
=	O
(	O
(	O
double	O
)	O
blue	int
)	O
/	O
0xFFFF	int
;	O
desaturate	double
=	O
(	O
(	O
double	O
)	O
_plotter	pointer
->	O
drawstate	pointer
->	O
fill_type	int
-	O
1.	int
)	O
/	O
0xFFFE	int
;	O
red_d	double
=	O
red_d	double
+	O
desaturate	double
*	O
(	O
1.0	int
-	O
red_d	double
)	O
;	O
green_d	double
=	O
green_d	double
+	O
desaturate	double
*	O
(	O
1.0	int
-	O
green_d	double
)	O
;	O
blue_d	double
=	O
blue_d	double
+	O
desaturate	double
*	O
(	O
1.0	int
-	O
blue_d	double
)	O
;	O
new_rgb	struct
.	O
red	int
=	O
IROUND	O
(	O
0xFFFF	int
*	O
red_d	double
)	O
;	O
new_rgb	struct
.	O
green	int
=	O
IROUND	O
(	O
0xFFFF	int
*	O
green_d	double
)	O
;	O
new_rgb	struct
.	O
blue	int
=	O
IROUND	O
(	O
0xFFFF	int
*	O
blue_d	double
)	O
;	O
_plotter	pointer
->	O
drawstate	pointer
->	O
fillcolor	struct
=	O
new_rgb	struct
;	O
return	O
0	int
;	O
}	O
