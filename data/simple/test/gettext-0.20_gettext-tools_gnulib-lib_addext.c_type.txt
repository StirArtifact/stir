void	O
addext	function
(	O
char	O
*	O
filename	pointer
,	O
char	O
const	O
*	O
ext	pointer
,	O
char	O
e	char
)	O
{	O
char	O
*	O
s	pointer
=	O
basename	function
(	O
filename	pointer
)	O
;	O
size_t	long
slen	long
=	O
strlen	function
(	O
s	pointer
)	O
,	O
extlen	long
=	O
strlen	function
(	O
ext	pointer
)	O
;	O
long	O
slen_max	long
=	O
-	O
1	int
;	O
if	O
(	O
slen	long
+	O
extlen	long
<=	O
_POSIX_NAME_MAX	int
&&	O
!	O
HAVE_DOS_FILE_NAMES	int
)	O
slen_max	long
=	O
_POSIX_NAME_MAX	int
;	O
else	O
if	O
(	O
s	pointer
==	O
filename	pointer
)	O
slen_max	long
=	O
pathconf	function
(	O
"."	pointer
,	O
_PC_NAME_MAX	int
)	O
;	O
else	O
{	O
char	O
c	char
=	O
*	O
s	pointer
;	O
*	O
s	pointer
=	O
0	int
;	O
slen_max	long
=	O
pathconf	function
(	O
filename	pointer
,	O
_PC_NAME_MAX	int
)	O
;	O
*	O
s	pointer
=	O
c	char
;	O
}	O
if	O
(	O
slen_max	long
<	O
0	int
)	O
slen_max	long
=	O
HAVE_LONG_FILE_NAMES	int
?	O
255	int
:	O
14	int
;	O
if	O
(	O
HAVE_DOS_FILE_NAMES	int
&&	O
slen_max	long
<=	O
12	int
)	O
{	O
char	O
*	O
dot	pointer
=	O
strchr	function
(	O
s	pointer
,	O
'.'	O
)	O
;	O
if	O
(	O
dot	pointer
)	O
{	O
slen	long
-=	O
dot	pointer
+	O
1	int
-	O
s	pointer
;	O
s	pointer
=	O
dot	pointer
+	O
1	int
;	O
slen_max	long
=	O
3	int
;	O
}	O
else	O
slen_max	long
=	O
8	int
;	O
extlen	long
=	O
9	int
;	O
}	O
if	O
(	O
slen	long
+	O
extlen	long
<=	O
slen_max	long
)	O
strcpy	function
(	O
s	pointer
+	O
slen	long
,	O
ext	pointer
)	O
;	O
else	O
{	O
if	O
(	O
slen_max	long
<=	O
slen	long
)	O
slen	long
=	O
slen_max	long
-	O
1	int
;	O
s	pointer
[	O
slen	long
]	O
=	O
e	char
;	O
s	pointer
[	O
slen	long
+	O
1	int
]	O
=	O
0	int
;	O
}	O
}	O
