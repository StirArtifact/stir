const	O
typeinfo_t	O
memory_ostream_typeinfo	O
=	O
{	O
"memory_ostream"	pointer
}	O
;	O
static	O
const	O
typeinfo_t	O
*	O
const	O
memory_ostream_superclasses	array
[	O
]	O
=	O
{	O
memory_ostream_SUPERCLASSES	O
}	O
;	O
static	O
void	O
memory_ostream__write_mem	function
(	O
memory_ostream_t	O
stream	int
,	O
const	O
void	O
*	O
data	pointer
,	O
size_t	O
len	int
)	O
{	O
if	O
(	O
len	int
>	O
0	int
)	O
{	O
if	O
(	O
len	int
>	O
stream	int
->	O
allocated	O
-	O
stream	int
->	O
buflen	O
)	O
{	O
size_t	O
new_allocated	O
=	O
xmax	O
(	O
xsum	O
(	O
stream	int
->	O
buflen	O
,	O
len	int
)	O
,	O
xsum	O
(	O
stream	int
->	O
allocated	O
,	O
stream	int
->	O
allocated	O
)	O
)	O
;	O
if	O
(	O
size_overflow_p	function
(	O
new_allocated	O
)	O
)	O
error	function
(	O
EXIT_FAILURE	O
,	O
0	int
,	O
_	O
(	O
"%s: too much output, buffer size overflow"	pointer
)	O
,	O
"memory_ostream"	pointer
)	O
;	O
stream	int
->	O
buffer	O
=	O
(	O
char	O
*	O
)	O
xrealloc	O
(	O
stream	int
->	O
buffer	O
,	O
new_allocated	O
)	O
;	O
stream	int
->	O
allocated	O
=	O
new_allocated	O
;	O
}	O
memcpy	O
(	O
stream	int
->	O
buffer	O
+	O
stream	int
->	O
buflen	O
,	O
data	pointer
,	O
len	int
)	O
;	O
stream	int
->	O
buflen	O
+=	O
len	int
;	O
}	O
}	O
static	O
void	O
memory_ostream__flush	function
(	O
memory_ostream_t	O
stream	int
,	O
ostream_flush_scope_t	O
scope	int
)	O
{	O
}	O
static	O
void	O
memory_ostream__free	function
(	O
memory_ostream_t	O
stream	int
)	O
{	O
free	function
(	O
stream	int
->	O
buffer	O
)	O
;	O
free	function
(	O
stream	int
)	O
;	O
}	O
void	O
memory_ostream__contents	O
(	O
memory_ostream_t	O
stream	int
,	O
const	O
void	O
*	O
*	O
bufp	pointer
,	O
size_t	O
*	O
buflenp	pointer
)	O
{	O
*	O
bufp	pointer
=	O
stream	int
->	O
buffer	O
;	O
*	O
buflenp	pointer
=	O
stream	int
->	O
buflen	O
;	O
}	O
memory_ostream_t	O
memory_ostream_create	function
(	O
void	O
)	O
{	O
memory_ostream_t	O
stream	int
=	O
XMALLOC	O
(	O
struct	O
memory_ostream_representation	O
)	O
;	O
stream	int
->	O
base	O
.	O
vtable	pointer
=	O
&	O
memory_ostream_vtable	O
;	O
stream	int
->	O
allocated	O
=	O
250	int
;	O
stream	int
->	O
buffer	O
=	O
XNMALLOC	function
(	O
stream	int
->	O
allocated	O
,	O
char	O
)	O
;	O
stream	int
->	O
buflen	O
=	O
0	int
;	O
return	O
stream	int
;	O
}	O
const	O
struct	O
memory_ostream_implementation	O
memory_ostream_vtable	O
=	O
{	O
memory_ostream_superclasses	array
,	O
sizeof	O
(	O
memory_ostream_superclasses	array
)	O
/	O
sizeof	O
(	O
memory_ostream_superclasses	array
[	O
0	int
]	O
)	O
,	O
sizeof	O
(	O
struct	O
memory_ostream_representation	O
)	O
,	O
memory_ostream__write_mem	function
,	O
memory_ostream__flush	function
,	O
memory_ostream__free	function
,	O
memory_ostream__contents	O
,	O
}	O
;	O
void	O
memory_ostream_write_mem	function
(	O
memory_ostream_t	O
first_arg	int
,	O
const	O
void	O
*	O
data	pointer
,	O
size_t	O
len	int
)	O
{	O
const	O
struct	O
memory_ostream_implementation	O
*	O
vtable	pointer
=	O
(	O
(	O
struct	O
memory_ostream_representation_header	O
*	O
)	O
(	O
struct	O
memory_ostream_representation	O
*	O
)	O
first_arg	int
)	O
->	O
vtable	pointer
;	O
vtable	pointer
->	O
write_mem	O
(	O
first_arg	int
,	O
data	pointer
,	O
len	int
)	O
;	O
}	O
void	O
memory_ostream_flush	function
(	O
memory_ostream_t	O
first_arg	int
,	O
ostream_flush_scope_t	O
scope	int
)	O
{	O
const	O
struct	O
memory_ostream_implementation	O
*	O
vtable	pointer
=	O
(	O
(	O
struct	O
memory_ostream_representation_header	O
*	O
)	O
(	O
struct	O
memory_ostream_representation	O
*	O
)	O
first_arg	int
)	O
->	O
vtable	pointer
;	O
vtable	pointer
->	O
flush	O
(	O
first_arg	int
,	O
scope	int
)	O
;	O
}	O
void	O
memory_ostream_free	function
(	O
memory_ostream_t	O
first_arg	int
)	O
{	O
const	O
struct	O
memory_ostream_implementation	O
*	O
vtable	pointer
=	O
(	O
(	O
struct	O
memory_ostream_representation_header	O
*	O
)	O
(	O
struct	O
memory_ostream_representation	O
*	O
)	O
first_arg	int
)	O
->	O
vtable	pointer
;	O
vtable	pointer
->	O
free	function
(	O
first_arg	int
)	O
;	O
}	O
void	O
memory_ostream_contents	function
(	O
memory_ostream_t	O
first_arg	int
,	O
const	O
void	O
*	O
*	O
bufp	pointer
,	O
size_t	O
*	O
buflenp	pointer
)	O
{	O
const	O
struct	O
memory_ostream_implementation	O
*	O
vtable	pointer
=	O
(	O
(	O
struct	O
memory_ostream_representation_header	O
*	O
)	O
(	O
struct	O
memory_ostream_representation	O
*	O
)	O
first_arg	int
)	O
->	O
vtable	pointer
;	O
vtable	pointer
->	O
contents	O
(	O
first_arg	int
,	O
bufp	pointer
,	O
buflenp	pointer
)	O
;	O
}	O
