bool	enum
_pl_c_end_page	function
(	O
S___	O
(	O
Plotter	struct
*	O
_plotter	pointer
)	O
)	O
{	O
int	O
i	int
,	O
fullstrength	int
,	O
red	int
,	O
green	int
,	O
blue	int
;	O
{	O
plCGMCustomLineType	struct
*	O
line_type_ptr	pointer
=	O
(	O
plCGMCustomLineType	struct
*	O
)	O
_plotter	pointer
->	O
data	pointer
->	O
page	pointer
->	O
extra	pointer
;	O
int	O
num_line_types	int
=	O
0	int
;	O
bool	enum
violates_profile	enum
=	O
false	int
;	O
while	O
(	O
line_type_ptr	pointer
!=	O
(	O
plCGMCustomLineType	struct
*	O
)	O
NULL	O
)	O
{	O
if	O
(	O
line_type_ptr	pointer
->	O
dash_array_len	int
>	O
CGM_PL_MAX_DASH_ARRAY_LENGTH	int
)	O
violates_profile	enum
=	O
true	int
;	O
line_type_ptr	pointer
=	O
line_type_ptr	pointer
->	O
next	pointer
;	O
num_line_types	int
++	O
;	O
}	O
if	O
(	O
num_line_types	int
>	O
CGM_MAX_CUSTOM_LINE_TYPES	int
)	O
violates_profile	enum
=	O
true	int
;	O
if	O
(	O
violates_profile	enum
)	O
_plotter	pointer
->	O
cgm_page_profile	int
=	O
IMAX	O
(	O
_plotter	pointer
->	O
cgm_page_profile	int
,	O
CGM_PROFILE_NONE	int
)	O
;	O
}	O
if	O
(	O
_plotter	pointer
->	O
cgm_max_version	int
>=	O
3	int
)	O
{	O
for	O
(	O
i	int
=	O
0	int
;	O
i	int
<	O
PL_NUM_PS_FONTS	int
;	O
i	int
++	O
)	O
{	O
if	O
(	O
_plotter	pointer
->	O
data	pointer
->	O
page	pointer
->	O
ps_font_used	array
[	O
i	int
]	O
==	O
true	int
)	O
{	O
_plotter	pointer
->	O
cgm_page_version	int
=	O
IMAX	O
(	O
_plotter	pointer
->	O
cgm_page_version	int
,	O
3	int
)	O
;	O
break	O
;	O
}	O
}	O
}	O
_plotter	pointer
->	O
cgm_version	int
=	O
IMAX	O
(	O
_plotter	pointer
->	O
cgm_version	int
,	O
_plotter	pointer
->	O
cgm_page_version	int
)	O
;	O
_plotter	pointer
->	O
cgm_profile	int
=	O
IMAX	O
(	O
_plotter	pointer
->	O
cgm_profile	int
,	O
_plotter	pointer
->	O
cgm_page_profile	int
)	O
;	O
red	int
=	O
_plotter	pointer
->	O
cgm_bgcolor	struct
.	O
red	int
;	O
green	int
=	O
_plotter	pointer
->	O
cgm_bgcolor	struct
.	O
green	int
;	O
blue	int
=	O
_plotter	pointer
->	O
cgm_bgcolor	struct
.	O
blue	int
;	O
fullstrength	int
=	O
(	O
1	int
<<	O
(	O
8	int
*	O
CGM_BINARY_BYTES_PER_COLOR_COMPONENT	int
)	O
)	O
-	O
1	int
;	O
if	O
(	O
(	O
red	int
!=	O
0	int
||	O
green	int
!=	O
0	int
||	O
blue	int
!=	O
0	int
)	O
&&	O
(	O
red	int
!=	O
fullstrength	int
||	O
green	int
!=	O
fullstrength	int
||	O
blue	int
!=	O
fullstrength	int
)	O
)	O
_plotter	pointer
->	O
cgm_page_need_color	enum
=	O
true	int
;	O
if	O
(	O
_plotter	pointer
->	O
cgm_page_need_color	enum
)	O
_plotter	pointer
->	O
cgm_need_color	int
=	O
true	int
;	O
_plotter	pointer
->	O
data	pointer
->	O
page	pointer
->	O
bg_color	struct
=	O
_plotter	pointer
->	O
cgm_bgcolor	struct
;	O
_plotter	pointer
->	O
data	pointer
->	O
page	pointer
->	O
bg_color_suppressed	enum
=	O
_plotter	pointer
->	O
cgm_bgcolor_suppressed	enum
;	O
return	O
true	int
;	O
}	O
