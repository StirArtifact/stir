typedef	O
RETSIGTYPE	void
SigHandler	function
(	O
)	O
;	O
typedef	O
struct	O
sigaction	struct
sighandler_cxt	struct
;	O
static	O
SigHandler	function
*	O
rl_set_sighandler	function
PARAMS	O
(	O
(	O
int	O
,	O
SigHandler	function
*	O
,	O
sighandler_cxt	struct
*	O
)	O
)	O
;	O
static	O
void	O
rl_maybe_set_sighandler	function
PARAMS	O
(	O
(	O
int	O
,	O
SigHandler	function
*	O
,	O
sighandler_cxt	struct
*	O
)	O
)	O
;	O
static	O
void	O
rl_maybe_restore_sighandler	function
PARAMS	O
(	O
(	O
int	O
,	O
sighandler_cxt	struct
*	O
)	O
)	O
;	O
static	O
RETSIGTYPE	void
rl_signal_handler	function
PARAMS	O
(	O
(	O
int	O
)	O
)	O
;	O
static	O
RETSIGTYPE	void
_rl_handle_signal	function
PARAMS	O
(	O
(	O
int	O
)	O
)	O
;	O
int	O
rl_catch_signals	int
=	O
1	int
;	O
int	O
rl_catch_sigwinch	int
=	O
1	int
;	O
int	O
_rl_interrupt_immediately	int
=	O
0	int
;	O
int	O
volatile	O
_rl_caught_signal	int
=	O
0	int
;	O
int	O
_rl_echoctl	int
=	O
0	int
;	O
int	O
_rl_intr_char	int
=	O
0	int
;	O
int	O
_rl_quit_char	int
=	O
0	int
;	O
int	O
_rl_susp_char	int
=	O
0	int
;	O
static	O
int	O
signals_set_flag	int
;	O
static	O
int	O
sigwinch_set_flag	int
;	O
static	O
sighandler_cxt	struct
old_int	struct
,	O
old_term	struct
,	O
old_hup	struct
,	O
old_alrm	struct
,	O
old_quit	struct
;	O
static	O
sighandler_cxt	struct
old_tstp	struct
,	O
old_ttou	struct
,	O
old_ttin	struct
;	O
static	O
sighandler_cxt	struct
old_winch	struct
;	O
_rl_sigcleanup_func_t	function
*	O
_rl_sigcleanup	pointer
;	O
void	O
*	O
_rl_sigcleanarg	pointer
;	O
RETSIGTYPE	void
_rl_signal_handler	function
(	O
sig	int
)	O
int	O
sig	int
;	O
{	O
_rl_caught_signal	int
=	O
0	int
;	O
if	O
(	O
sig	int
==	O
SIGWINCH	int
)	O
{	O
rl_resize_terminal	function
(	O
)	O
;	O
if	O
(	O
rl_signal_event_hook	pointer
)	O
(	O
*	O
rl_signal_event_hook	pointer
)	O
(	O
)	O
;	O
}	O
else	O
_rl_handle_signal	function
(	O
sig	int
)	O
;	O
SIGHANDLER_RETURN	O
;	O
}	O
static	O
RETSIGTYPE	void
rl_signal_handler	function
(	O
sig	int
)	O
int	O
sig	int
;	O
{	O
if	O
(	O
_rl_interrupt_immediately	int
)	O
{	O
_rl_interrupt_immediately	int
=	O
0	int
;	O
_rl_handle_signal	function
(	O
sig	int
)	O
;	O
}	O
else	O
_rl_caught_signal	int
=	O
sig	int
;	O
SIGHANDLER_RETURN	O
;	O
}	O
static	O
RETSIGTYPE	void
_rl_handle_signal	function
(	O
sig	int
)	O
int	O
sig	int
;	O
{	O
sigset_t	struct
set	struct
;	O
RL_SETSTATE	O
(	O
RL_STATE_SIGHANDLER	int
)	O
;	O
if	O
(	O
_rl_sigcleanup	pointer
)	O
{	O
(	O
*	O
_rl_sigcleanup	pointer
)	O
(	O
sig	int
,	O
_rl_sigcleanarg	pointer
)	O
;	O
_rl_sigcleanup	pointer
=	O
0	int
;	O
_rl_sigcleanarg	pointer
=	O
0	int
;	O
}	O
switch	O
(	O
sig	int
)	O
{	O
case	O
SIGINT	int
:	O
_rl_reset_completion_state	function
(	O
)	O
;	O
rl_free_line_state	function
(	O
)	O
;	O
rl_callback_sigcleanup	function
(	O
)	O
;	O
case	O
SIGTSTP	int
:	O
case	O
SIGTTIN	int
:	O
sigemptyset	function
(	O
&	O
set	struct
)	O
;	O
sigaddset	function
(	O
&	O
set	struct
,	O
SIGTTOU	int
)	O
;	O
sigprocmask	function
(	O
SIG_BLOCK	int
,	O
&	O
set	struct
,	O
(	O
sigset_t	struct
*	O
)	O
NULL	O
)	O
;	O
case	O
SIGTTOU	int
:	O
case	O
SIGTERM	int
:	O
case	O
SIGHUP	int
:	O
case	O
SIGALRM	int
:	O
case	O
SIGQUIT	int
:	O
rl_echo_signal_char	function
(	O
sig	int
)	O
;	O
rl_cleanup_after_signal	function
(	O
)	O
;	O
if	O
(	O
sig	int
==	O
SIGTTIN	int
||	O
sig	int
==	O
SIGTSTP	int
)	O
sigprocmask	function
(	O
SIG_UNBLOCK	int
,	O
&	O
set	struct
,	O
(	O
sigset_t	struct
*	O
)	O
NULL	O
)	O
;	O
sigemptyset	function
(	O
&	O
set	struct
)	O
;	O
sigprocmask	function
(	O
SIG_BLOCK	int
,	O
(	O
sigset_t	struct
*	O
)	O
NULL	O
,	O
&	O
set	struct
)	O
;	O
sigdelset	function
(	O
&	O
set	struct
,	O
sig	int
)	O
;	O
kill	function
(	O
getpid	function
(	O
)	O
,	O
sig	int
)	O
;	O
sigprocmask	function
(	O
SIG_SETMASK	int
,	O
&	O
set	struct
,	O
(	O
sigset_t	struct
*	O
)	O
NULL	O
)	O
;	O
rl_reset_after_signal	function
(	O
)	O
;	O
}	O
RL_UNSETSTATE	O
(	O
RL_STATE_SIGHANDLER	int
)	O
;	O
SIGHANDLER_RETURN	O
;	O
}	O
static	O
RETSIGTYPE	void
rl_sigwinch_handler	function
(	O
sig	int
)	O
int	O
sig	int
;	O
{	O
SigHandler	function
*	O
oh	pointer
;	O
RL_SETSTATE	O
(	O
RL_STATE_SIGHANDLER	int
)	O
;	O
_rl_caught_signal	int
=	O
sig	int
;	O
oh	pointer
=	O
(	O
SigHandler	function
*	O
)	O
old_winch	struct
.	O
sa_handler	pointer
;	O
if	O
(	O
oh	pointer
&&	O
oh	pointer
!=	O
(	O
SigHandler	function
*	O
)	O
SIG_IGN	O
&&	O
oh	pointer
!=	O
(	O
SigHandler	function
*	O
)	O
SIG_DFL	O
)	O
(	O
*	O
oh	pointer
)	O
(	O
sig	int
)	O
;	O
RL_UNSETSTATE	O
(	O
RL_STATE_SIGHANDLER	int
)	O
;	O
SIGHANDLER_RETURN	O
;	O
}	O
static	O
SigHandler	function
*	O
rl_set_sighandler	function
(	O
sig	int
,	O
handler	pointer
,	O
ohandler	pointer
)	O
int	O
sig	int
;	O
SigHandler	function
*	O
handler	pointer
;	O
sighandler_cxt	struct
*	O
ohandler	pointer
;	O
{	O
sighandler_cxt	struct
old_handler	struct
;	O
struct	O
sigaction	struct
act	struct
;	O
act	struct
.	O
sa_handler	pointer
=	O
handler	pointer
;	O
act	struct
.	O
sa_flags	int
=	O
(	O
sig	int
==	O
SIGWINCH	int
)	O
?	O
SA_RESTART	int
:	O
0	int
;	O
sigemptyset	function
(	O
&	O
act	struct
.	O
sa_mask	struct
)	O
;	O
sigemptyset	function
(	O
&	O
ohandler	pointer
->	O
sa_mask	struct
)	O
;	O
sigaction	struct
(	O
sig	int
,	O
&	O
act	struct
,	O
&	O
old_handler	struct
)	O
;	O
if	O
(	O
handler	pointer
!=	O
rl_signal_handler	function
||	O
old_handler	struct
.	O
sa_handler	pointer
!=	O
rl_signal_handler	function
)	O
memcpy	function
(	O
ohandler	pointer
,	O
&	O
old_handler	struct
,	O
sizeof	O
(	O
sighandler_cxt	struct
)	O
)	O
;	O
return	O
(	O
ohandler	pointer
->	O
sa_handler	pointer
)	O
;	O
}	O
static	O
void	O
rl_maybe_set_sighandler	function
(	O
sig	int
,	O
handler	pointer
,	O
ohandler	pointer
)	O
int	O
sig	int
;	O
SigHandler	function
*	O
handler	pointer
;	O
sighandler_cxt	struct
*	O
ohandler	pointer
;	O
{	O
sighandler_cxt	struct
dummy	struct
;	O
SigHandler	function
*	O
oh	pointer
;	O
sigemptyset	function
(	O
&	O
dummy	struct
.	O
sa_mask	struct
)	O
;	O
dummy	struct
.	O
sa_flags	int
=	O
0	int
;	O
oh	pointer
=	O
rl_set_sighandler	function
(	O
sig	int
,	O
handler	pointer
,	O
ohandler	pointer
)	O
;	O
if	O
(	O
oh	pointer
==	O
(	O
SigHandler	function
*	O
)	O
SIG_IGN	O
)	O
rl_sigaction	O
(	O
sig	int
,	O
ohandler	pointer
,	O
&	O
dummy	struct
)	O
;	O
}	O
static	O
void	O
rl_maybe_restore_sighandler	function
(	O
sig	int
,	O
handler	pointer
)	O
int	O
sig	int
;	O
sighandler_cxt	struct
*	O
handler	pointer
;	O
{	O
sighandler_cxt	struct
dummy	struct
;	O
sigemptyset	function
(	O
&	O
dummy	struct
.	O
sa_mask	struct
)	O
;	O
dummy	struct
.	O
sa_flags	int
=	O
0	int
;	O
if	O
(	O
handler	pointer
->	O
sa_handler	pointer
!=	O
SIG_IGN	O
)	O
rl_sigaction	O
(	O
sig	int
,	O
handler	pointer
,	O
&	O
dummy	struct
)	O
;	O
}	O
int	O
rl_set_signals	function
(	O
)	O
{	O
sighandler_cxt	struct
dummy	struct
;	O
SigHandler	function
*	O
oh	pointer
;	O
static	O
int	O
sigmask_set	int
=	O
0	int
;	O
static	O
sigset_t	struct
bset	struct
,	O
oset	struct
;	O
if	O
(	O
rl_catch_signals	int
&&	O
sigmask_set	int
==	O
0	int
)	O
{	O
sigemptyset	function
(	O
&	O
bset	struct
)	O
;	O
sigaddset	function
(	O
&	O
bset	struct
,	O
SIGINT	int
)	O
;	O
sigaddset	function
(	O
&	O
bset	struct
,	O
SIGTERM	int
)	O
;	O
sigaddset	function
(	O
&	O
bset	struct
,	O
SIGHUP	int
)	O
;	O
sigaddset	function
(	O
&	O
bset	struct
,	O
SIGQUIT	int
)	O
;	O
sigaddset	function
(	O
&	O
bset	struct
,	O
SIGALRM	int
)	O
;	O
sigaddset	function
(	O
&	O
bset	struct
,	O
SIGTSTP	int
)	O
;	O
sigaddset	function
(	O
&	O
bset	struct
,	O
SIGTTIN	int
)	O
;	O
sigaddset	function
(	O
&	O
bset	struct
,	O
SIGTTOU	int
)	O
;	O
sigmask_set	int
=	O
1	int
;	O
}	O
if	O
(	O
rl_catch_signals	int
&&	O
signals_set_flag	int
==	O
0	int
)	O
{	O
sigemptyset	function
(	O
&	O
oset	struct
)	O
;	O
sigprocmask	function
(	O
SIG_BLOCK	int
,	O
&	O
bset	struct
,	O
&	O
oset	struct
)	O
;	O
rl_maybe_set_sighandler	function
(	O
SIGINT	int
,	O
rl_signal_handler	function
,	O
&	O
old_int	struct
)	O
;	O
rl_maybe_set_sighandler	function
(	O
SIGTERM	int
,	O
rl_signal_handler	function
,	O
&	O
old_term	struct
)	O
;	O
rl_maybe_set_sighandler	function
(	O
SIGHUP	int
,	O
rl_signal_handler	function
,	O
&	O
old_hup	struct
)	O
;	O
rl_maybe_set_sighandler	function
(	O
SIGQUIT	int
,	O
rl_signal_handler	function
,	O
&	O
old_quit	struct
)	O
;	O
oh	pointer
=	O
rl_set_sighandler	function
(	O
SIGALRM	int
,	O
rl_signal_handler	function
,	O
&	O
old_alrm	struct
)	O
;	O
if	O
(	O
oh	pointer
==	O
(	O
SigHandler	function
*	O
)	O
SIG_IGN	O
)	O
rl_sigaction	O
(	O
SIGALRM	int
,	O
&	O
old_alrm	struct
,	O
&	O
dummy	struct
)	O
;	O
if	O
(	O
oh	pointer
!=	O
(	O
SigHandler	function
*	O
)	O
SIG_DFL	O
&&	O
(	O
old_alrm	struct
.	O
sa_flags	int
&	O
SA_RESTART	int
)	O
)	O
rl_sigaction	O
(	O
SIGALRM	int
,	O
&	O
old_alrm	struct
,	O
&	O
dummy	struct
)	O
;	O
rl_maybe_set_sighandler	function
(	O
SIGTSTP	int
,	O
rl_signal_handler	function
,	O
&	O
old_tstp	struct
)	O
;	O
rl_maybe_set_sighandler	function
(	O
SIGTTOU	int
,	O
rl_signal_handler	function
,	O
&	O
old_ttou	struct
)	O
;	O
rl_maybe_set_sighandler	function
(	O
SIGTTIN	int
,	O
rl_signal_handler	function
,	O
&	O
old_ttin	struct
)	O
;	O
signals_set_flag	int
=	O
1	int
;	O
sigprocmask	function
(	O
SIG_SETMASK	int
,	O
&	O
oset	struct
,	O
(	O
sigset_t	struct
*	O
)	O
NULL	O
)	O
;	O
}	O
if	O
(	O
rl_catch_sigwinch	int
&&	O
sigwinch_set_flag	int
==	O
0	int
)	O
{	O
rl_maybe_set_sighandler	function
(	O
SIGWINCH	int
,	O
rl_sigwinch_handler	function
,	O
&	O
old_winch	struct
)	O
;	O
sigwinch_set_flag	int
=	O
1	int
;	O
}	O
return	O
0	int
;	O
}	O
int	O
rl_clear_signals	function
(	O
)	O
{	O
sighandler_cxt	struct
dummy	struct
;	O
if	O
(	O
rl_catch_signals	int
&&	O
signals_set_flag	int
==	O
1	int
)	O
{	O
sigemptyset	function
(	O
&	O
dummy	struct
.	O
sa_mask	struct
)	O
;	O
rl_maybe_restore_sighandler	function
(	O
SIGINT	int
,	O
&	O
old_int	struct
)	O
;	O
rl_maybe_restore_sighandler	function
(	O
SIGTERM	int
,	O
&	O
old_term	struct
)	O
;	O
rl_maybe_restore_sighandler	function
(	O
SIGHUP	int
,	O
&	O
old_hup	struct
)	O
;	O
rl_maybe_restore_sighandler	function
(	O
SIGQUIT	int
,	O
&	O
old_quit	struct
)	O
;	O
rl_maybe_restore_sighandler	function
(	O
SIGALRM	int
,	O
&	O
old_alrm	struct
)	O
;	O
rl_maybe_restore_sighandler	function
(	O
SIGTSTP	int
,	O
&	O
old_tstp	struct
)	O
;	O
rl_maybe_restore_sighandler	function
(	O
SIGTTOU	int
,	O
&	O
old_ttou	struct
)	O
;	O
rl_maybe_restore_sighandler	function
(	O
SIGTTIN	int
,	O
&	O
old_ttin	struct
)	O
;	O
signals_set_flag	int
=	O
0	int
;	O
}	O
if	O
(	O
rl_catch_sigwinch	int
&&	O
sigwinch_set_flag	int
==	O
1	int
)	O
{	O
sigemptyset	function
(	O
&	O
dummy	struct
.	O
sa_mask	struct
)	O
;	O
rl_sigaction	O
(	O
SIGWINCH	int
,	O
&	O
old_winch	struct
,	O
&	O
dummy	struct
)	O
;	O
sigwinch_set_flag	int
=	O
0	int
;	O
}	O
return	O
0	int
;	O
}	O
void	O
rl_cleanup_after_signal	function
(	O
)	O
{	O
_rl_clean_up_for_exit	function
(	O
)	O
;	O
if	O
(	O
rl_deprep_term_function	pointer
)	O
(	O
*	O
rl_deprep_term_function	pointer
)	O
(	O
)	O
;	O
rl_clear_pending_input	function
(	O
)	O
;	O
rl_clear_signals	function
(	O
)	O
;	O
}	O
void	O
rl_reset_after_signal	function
(	O
)	O
{	O
if	O
(	O
rl_prep_term_function	pointer
)	O
(	O
*	O
rl_prep_term_function	pointer
)	O
(	O
_rl_meta_flag	int
)	O
;	O
rl_set_signals	function
(	O
)	O
;	O
}	O
void	O
rl_free_line_state	function
(	O
)	O
{	O
register	O
HIST_ENTRY	struct
*	O
entry	pointer
;	O
rl_free_undo_list	function
(	O
)	O
;	O
entry	pointer
=	O
current_history	function
(	O
)	O
;	O
if	O
(	O
entry	pointer
)	O
entry	pointer
->	O
data	pointer
=	O
(	O
char	O
*	O
)	O
NULL	O
;	O
_rl_kill_kbd_macro	function
(	O
)	O
;	O
rl_clear_message	function
(	O
)	O
;	O
_rl_reset_argument	function
(	O
)	O
;	O
}	O
int	O
rl_pending_signal	function
(	O
)	O
{	O
return	O
(	O
_rl_caught_signal	int
)	O
;	O
}	O
static	O
sigset_t	struct
sigint_set	struct
,	O
sigint_oset	struct
;	O
static	O
sigset_t	struct
sigwinch_set	struct
,	O
sigwinch_oset	struct
;	O
static	O
int	O
sigint_blocked	int
;	O
static	O
int	O
sigwinch_blocked	int
;	O
void	O
_rl_block_sigint	function
(	O
)	O
{	O
if	O
(	O
sigint_blocked	int
)	O
return	O
;	O
sigint_blocked	int
=	O
1	int
;	O
}	O
void	O
_rl_release_sigint	function
(	O
)	O
{	O
if	O
(	O
sigint_blocked	int
==	O
0	int
)	O
return	O
;	O
sigint_blocked	int
=	O
0	int
;	O
RL_CHECK_SIGNALS	O
(	O
)	O
;	O
}	O
void	O
_rl_block_sigwinch	function
(	O
)	O
{	O
if	O
(	O
sigwinch_blocked	int
)	O
return	O
;	O
sigemptyset	function
(	O
&	O
sigwinch_set	struct
)	O
;	O
sigemptyset	function
(	O
&	O
sigwinch_oset	struct
)	O
;	O
sigaddset	function
(	O
&	O
sigwinch_set	struct
,	O
SIGWINCH	int
)	O
;	O
sigprocmask	function
(	O
SIG_BLOCK	int
,	O
&	O
sigwinch_set	struct
,	O
&	O
sigwinch_oset	struct
)	O
;	O
sigwinch_blocked	int
=	O
1	int
;	O
}	O
void	O
_rl_release_sigwinch	function
(	O
)	O
{	O
if	O
(	O
sigwinch_blocked	int
==	O
0	int
)	O
return	O
;	O
sigprocmask	function
(	O
SIG_SETMASK	int
,	O
&	O
sigwinch_oset	struct
,	O
(	O
sigset_t	struct
*	O
)	O
NULL	O
)	O
;	O
sigwinch_blocked	int
=	O
0	int
;	O
}	O
void	O
rl_echo_signal_char	function
(	O
sig	int
)	O
int	O
sig	int
;	O
{	O
char	O
cstr	array
[	O
3	int
]	O
;	O
int	O
cslen	int
,	O
c	int
;	O
if	O
(	O
_rl_echoctl	int
==	O
0	int
||	O
_rl_echo_control_chars	int
==	O
0	int
)	O
return	O
;	O
switch	O
(	O
sig	int
)	O
{	O
case	O
SIGINT	int
:	O
c	int
=	O
_rl_intr_char	int
;	O
break	O
;	O
case	O
SIGQUIT	int
:	O
c	int
=	O
_rl_quit_char	int
;	O
break	O
;	O
case	O
SIGTSTP	int
:	O
c	int
=	O
_rl_susp_char	int
;	O
break	O
;	O
default	O
:	O
return	O
;	O
}	O
if	O
(	O
CTRL_CHAR	O
(	O
c	int
)	O
||	O
c	int
==	O
RUBOUT	int
)	O
{	O
cstr	array
[	O
0	int
]	O
=	O
'^'	O
;	O
cstr	array
[	O
1	int
]	O
=	O
CTRL_CHAR	O
(	O
c	int
)	O
?	O
UNCTRL	O
(	O
c	int
)	O
:	O
'?'	O
;	O
cstr	array
[	O
cslen	int
=	O
2	int
]	O
=	O
'\0'	O
;	O
}	O
else	O
{	O
cstr	array
[	O
0	int
]	O
=	O
c	int
;	O
cstr	array
[	O
cslen	int
=	O
1	int
]	O
=	O
'\0'	O
;	O
}	O
_rl_output_some_chars	function
(	O
cstr	array
,	O
cslen	int
)	O
;	O
}	O
