transition_t	struct
nist_transition	array
[	O
10	int
]	O
=	O
{	O
{	O
NIST_PRE_TRYING	int
,	O
RCV_REQUEST	int
,	O
(	O
void	O
(	O
*	O
)	O
(	O
void	O
*	O
,	O
void	O
*	O
)	O
)	O
&	O
nist_rcv_request	function
,	O
&	O
nist_transition	array
[	O
1	int
]	O
,	O
NULL	O
}	O
,	O
{	O
NIST_TRYING	int
,	O
SND_STATUS_1XX	int
,	O
(	O
void	O
(	O
*	O
)	O
(	O
void	O
*	O
,	O
void	O
*	O
)	O
)	O
&	O
nist_snd_1xx	function
,	O
&	O
nist_transition	array
[	O
2	int
]	O
,	O
NULL	O
}	O
,	O
{	O
NIST_TRYING	int
,	O
SND_STATUS_2XX	int
,	O
(	O
void	O
(	O
*	O
)	O
(	O
void	O
*	O
,	O
void	O
*	O
)	O
)	O
&	O
nist_snd_23456xx	function
,	O
&	O
nist_transition	array
[	O
3	int
]	O
,	O
NULL	O
}	O
,	O
{	O
NIST_TRYING	int
,	O
SND_STATUS_3456XX	int
,	O
(	O
void	O
(	O
*	O
)	O
(	O
void	O
*	O
,	O
void	O
*	O
)	O
)	O
&	O
nist_snd_23456xx	function
,	O
&	O
nist_transition	array
[	O
4	int
]	O
,	O
NULL	O
}	O
,	O
{	O
NIST_PROCEEDING	int
,	O
SND_STATUS_1XX	int
,	O
(	O
void	O
(	O
*	O
)	O
(	O
void	O
*	O
,	O
void	O
*	O
)	O
)	O
&	O
nist_snd_1xx	function
,	O
&	O
nist_transition	array
[	O
5	int
]	O
,	O
NULL	O
}	O
,	O
{	O
NIST_PROCEEDING	int
,	O
SND_STATUS_2XX	int
,	O
(	O
void	O
(	O
*	O
)	O
(	O
void	O
*	O
,	O
void	O
*	O
)	O
)	O
&	O
nist_snd_23456xx	function
,	O
&	O
nist_transition	array
[	O
6	int
]	O
,	O
NULL	O
}	O
,	O
{	O
NIST_PROCEEDING	int
,	O
SND_STATUS_3456XX	int
,	O
(	O
void	O
(	O
*	O
)	O
(	O
void	O
*	O
,	O
void	O
*	O
)	O
)	O
&	O
nist_snd_23456xx	function
,	O
&	O
nist_transition	array
[	O
7	int
]	O
,	O
NULL	O
}	O
,	O
{	O
NIST_PROCEEDING	int
,	O
RCV_REQUEST	int
,	O
(	O
void	O
(	O
*	O
)	O
(	O
void	O
*	O
,	O
void	O
*	O
)	O
)	O
&	O
nist_rcv_request	function
,	O
&	O
nist_transition	array
[	O
8	int
]	O
,	O
NULL	O
}	O
,	O
{	O
NIST_COMPLETED	int
,	O
TIMEOUT_J	int
,	O
(	O
void	O
(	O
*	O
)	O
(	O
void	O
*	O
,	O
void	O
*	O
)	O
)	O
&	O
osip_nist_timeout_j_event	function
,	O
&	O
nist_transition	array
[	O
9	int
]	O
,	O
NULL	O
}	O
,	O
{	O
NIST_COMPLETED	int
,	O
RCV_REQUEST	int
,	O
(	O
void	O
(	O
*	O
)	O
(	O
void	O
*	O
,	O
void	O
*	O
)	O
)	O
&	O
nist_rcv_request	function
,	O
NULL	O
,	O
NULL	O
}	O
}	O
;	O
osip_statemachine_t	struct
nist_fsm	struct
=	O
{	O
nist_transition	array
}	O
;	O
static	O
void	O
nist_handle_transport_error	function
(	O
osip_transaction_t	struct
*	O
nist	pointer
,	O
int	O
err	int
)	O
{	O
__osip_transport_error_callback	function
(	O
OSIP_NIST_TRANSPORT_ERROR	int
,	O
nist	pointer
,	O
err	int
)	O
;	O
__osip_transaction_set_state	function
(	O
nist	pointer
,	O
NIST_TERMINATED	int
)	O
;	O
__osip_kill_transaction_callback	function
(	O
OSIP_NIST_KILL_TRANSACTION	int
,	O
nist	pointer
)	O
;	O
}	O
void	O
nist_rcv_request	function
(	O
osip_transaction_t	struct
*	O
nist	pointer
,	O
osip_event_t	struct
*	O
evt	pointer
)	O
{	O
int	O
i	int
;	O
if	O
(	O
nist	pointer
->	O
state	pointer
==	O
NIST_PRE_TRYING	int
)	O
{	O
nist	pointer
->	O
orig_request	pointer
=	O
evt	pointer
->	O
sip	pointer
;	O
if	O
(	O
MSG_IS_REGISTER	O
(	O
evt	pointer
->	O
sip	pointer
)	O
)	O
__osip_message_callback	function
(	O
OSIP_NIST_REGISTER_RECEIVED	int
,	O
nist	pointer
,	O
nist	pointer
->	O
orig_request	pointer
)	O
;	O
else	O
if	O
(	O
MSG_IS_BYE	O
(	O
evt	pointer
->	O
sip	pointer
)	O
)	O
__osip_message_callback	function
(	O
OSIP_NIST_BYE_RECEIVED	int
,	O
nist	pointer
,	O
nist	pointer
->	O
orig_request	pointer
)	O
;	O
else	O
if	O
(	O
MSG_IS_OPTIONS	O
(	O
evt	pointer
->	O
sip	pointer
)	O
)	O
__osip_message_callback	function
(	O
OSIP_NIST_OPTIONS_RECEIVED	int
,	O
nist	pointer
,	O
nist	pointer
->	O
orig_request	pointer
)	O
;	O
else	O
if	O
(	O
MSG_IS_INFO	O
(	O
evt	pointer
->	O
sip	pointer
)	O
)	O
__osip_message_callback	function
(	O
OSIP_NIST_INFO_RECEIVED	int
,	O
nist	pointer
,	O
nist	pointer
->	O
orig_request	pointer
)	O
;	O
else	O
if	O
(	O
MSG_IS_CANCEL	O
(	O
evt	pointer
->	O
sip	pointer
)	O
)	O
__osip_message_callback	function
(	O
OSIP_NIST_CANCEL_RECEIVED	int
,	O
nist	pointer
,	O
nist	pointer
->	O
orig_request	pointer
)	O
;	O
else	O
if	O
(	O
MSG_IS_NOTIFY	O
(	O
evt	pointer
->	O
sip	pointer
)	O
)	O
__osip_message_callback	function
(	O
OSIP_NIST_NOTIFY_RECEIVED	int
,	O
nist	pointer
,	O
nist	pointer
->	O
orig_request	pointer
)	O
;	O
else	O
if	O
(	O
MSG_IS_SUBSCRIBE	O
(	O
evt	pointer
->	O
sip	pointer
)	O
)	O
__osip_message_callback	function
(	O
OSIP_NIST_SUBSCRIBE_RECEIVED	int
,	O
nist	pointer
,	O
nist	pointer
->	O
orig_request	pointer
)	O
;	O
else	O
__osip_message_callback	function
(	O
OSIP_NIST_UNKNOWN_REQUEST_RECEIVED	int
,	O
nist	pointer
,	O
nist	pointer
->	O
orig_request	pointer
)	O
;	O
}	O
else	O
{	O
osip_message_free	function
(	O
evt	pointer
->	O
sip	pointer
)	O
;	O
__osip_message_callback	function
(	O
OSIP_NIST_REQUEST_RECEIVED_AGAIN	int
,	O
nist	pointer
,	O
nist	pointer
->	O
orig_request	pointer
)	O
;	O
if	O
(	O
nist	pointer
->	O
last_response	pointer
!=	O
NULL	O
)	O
{	O
i	int
=	O
__osip_transaction_snd_xxx	function
(	O
nist	pointer
,	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
if	O
(	O
i	int
!=	O
0	int
)	O
{	O
nist_handle_transport_error	function
(	O
nist	pointer
,	O
i	int
)	O
;	O
return	O
;	O
}	O
else	O
{	O
if	O
(	O
MSG_IS_STATUS_1XX	O
(	O
nist	pointer
->	O
last_response	pointer
)	O
)	O
__osip_message_callback	function
(	O
OSIP_NIST_STATUS_1XX_SENT	int
,	O
nist	pointer
,	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
else	O
if	O
(	O
MSG_IS_STATUS_2XX	O
(	O
nist	pointer
->	O
last_response	pointer
)	O
)	O
__osip_message_callback	function
(	O
OSIP_NIST_STATUS_2XX_SENT_AGAIN	int
,	O
nist	pointer
,	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
else	O
__osip_message_callback	function
(	O
OSIP_NIST_STATUS_3456XX_SENT_AGAIN	int
,	O
nist	pointer
,	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
return	O
;	O
}	O
}	O
return	O
;	O
}	O
__osip_transaction_set_state	function
(	O
nist	pointer
,	O
NIST_TRYING	int
)	O
;	O
}	O
void	O
nist_snd_1xx	function
(	O
osip_transaction_t	struct
*	O
nist	pointer
,	O
osip_event_t	struct
*	O
evt	pointer
)	O
{	O
int	O
i	int
;	O
if	O
(	O
nist	pointer
->	O
last_response	pointer
!=	O
NULL	O
)	O
{	O
osip_message_free	function
(	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
}	O
nist	pointer
->	O
last_response	pointer
=	O
evt	pointer
->	O
sip	pointer
;	O
i	int
=	O
__osip_transaction_snd_xxx	function
(	O
nist	pointer
,	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
if	O
(	O
i	int
!=	O
0	int
)	O
{	O
nist_handle_transport_error	function
(	O
nist	pointer
,	O
i	int
)	O
;	O
return	O
;	O
}	O
else	O
__osip_message_callback	function
(	O
OSIP_NIST_STATUS_1XX_SENT	int
,	O
nist	pointer
,	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
__osip_transaction_set_state	function
(	O
nist	pointer
,	O
NIST_PROCEEDING	int
)	O
;	O
}	O
void	O
nist_snd_23456xx	function
(	O
osip_transaction_t	struct
*	O
nist	pointer
,	O
osip_event_t	struct
*	O
evt	pointer
)	O
{	O
int	O
i	int
;	O
if	O
(	O
nist	pointer
->	O
last_response	pointer
!=	O
NULL	O
)	O
{	O
osip_message_free	function
(	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
}	O
nist	pointer
->	O
last_response	pointer
=	O
evt	pointer
->	O
sip	pointer
;	O
i	int
=	O
__osip_transaction_snd_xxx	function
(	O
nist	pointer
,	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
if	O
(	O
i	int
!=	O
0	int
)	O
{	O
nist_handle_transport_error	function
(	O
nist	pointer
,	O
i	int
)	O
;	O
return	O
;	O
}	O
else	O
{	O
if	O
(	O
EVT_IS_SND_STATUS_2XX	O
(	O
evt	pointer
)	O
)	O
__osip_message_callback	function
(	O
OSIP_NIST_STATUS_2XX_SENT	int
,	O
nist	pointer
,	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
else	O
if	O
(	O
MSG_IS_STATUS_3XX	O
(	O
nist	pointer
->	O
last_response	pointer
)	O
)	O
__osip_message_callback	function
(	O
OSIP_NIST_STATUS_3XX_SENT	int
,	O
nist	pointer
,	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
else	O
if	O
(	O
MSG_IS_STATUS_4XX	O
(	O
nist	pointer
->	O
last_response	pointer
)	O
)	O
__osip_message_callback	function
(	O
OSIP_NIST_STATUS_4XX_SENT	int
,	O
nist	pointer
,	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
else	O
if	O
(	O
MSG_IS_STATUS_5XX	O
(	O
nist	pointer
->	O
last_response	pointer
)	O
)	O
__osip_message_callback	function
(	O
OSIP_NIST_STATUS_5XX_SENT	int
,	O
nist	pointer
,	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
else	O
__osip_message_callback	function
(	O
OSIP_NIST_STATUS_6XX_SENT	int
,	O
nist	pointer
,	O
nist	pointer
->	O
last_response	pointer
)	O
;	O
}	O
if	O
(	O
nist	pointer
->	O
state	pointer
!=	O
NIST_COMPLETED	int
)	O
{	O
osip_gettimeofday	function
(	O
&	O
nist	pointer
->	O
nist_context	pointer
->	O
timer_j_start	struct
,	O
NULL	O
)	O
;	O
add_gettimeofday	function
(	O
&	O
nist	pointer
->	O
nist_context	pointer
->	O
timer_j_start	struct
,	O
nist	pointer
->	O
nist_context	pointer
->	O
timer_j_length	int
)	O
;	O
}	O
__osip_transaction_set_state	function
(	O
nist	pointer
,	O
NIST_COMPLETED	int
)	O
;	O
}	O
void	O
osip_nist_timeout_j_event	function
(	O
osip_transaction_t	struct
*	O
nist	pointer
,	O
osip_event_t	struct
*	O
evt	pointer
)	O
{	O
nist	pointer
->	O
nist_context	pointer
->	O
timer_j_length	int
=	O
-	O
1	int
;	O
nist	pointer
->	O
nist_context	pointer
->	O
timer_j_start	struct
.	O
tv_sec	long
=	O
-	O
1	int
;	O
__osip_transaction_set_state	function
(	O
nist	pointer
,	O
NIST_TERMINATED	int
)	O
;	O
__osip_kill_transaction_callback	function
(	O
OSIP_NIST_KILL_TRANSACTION	int
,	O
nist	pointer
)	O
;	O
}	O
