int	O
scsi_max_length	function
(	O
void	O
)	O
{	O
return	O
8	int
;	O
}	O
int	O
scsi_open	function
(	O
const	O
char	O
*	O
name	pointer
,	O
int	O
flag	pointer
UNUSEDP	O
,	O
int	O
mode	int
UNUSEDP	O
,	O
void	O
*	O
*	O
extra_data	pointer
UNUSEDP	O
)	O
{	O
return	O
open	function
(	O
name	pointer
,	O
O_RDONLY	int
|	O
O_LARGEFILE	O
|	O
O_BINARY	int
|	O
O_NDELAY	O
)	O
;	O
}	O
int	O
scsi_cmd	function
(	O
int	O
fd	int
,	O
unsigned	O
char	O
*	O
cdb	array
,	O
int	O
cmdlen	int
,	O
scsi_io_mode_t	enum
mode	int
,	O
void	O
*	O
data	pointer
,	O
size_t	long
len	long
,	O
void	O
*	O
extra_data	pointer
UNUSEDP	O
)	O
{	O
struct	O
sg_io_hdr	struct
my_scsi_cmd	struct
;	O
memset	function
(	O
&	O
my_scsi_cmd	struct
,	O
0	int
,	O
sizeof	O
(	O
my_scsi_cmd	struct
)	O
)	O
;	O
my_scsi_cmd	struct
.	O
interface_id	int
=	O
'S'	O
;	O
my_scsi_cmd	struct
.	O
dxfer_direction	int
=	O
(	O
mode	int
==	O
SCSI_IO_READ	int
)	O
?	O
(	O
SG_DXFER_FROM_DEV	O
)	O
:	O
(	O
SG_DXFER_TO_DEV	O
)	O
;	O
my_scsi_cmd	struct
.	O
cmd_len	char
=	O
cmdlen	int
;	O
my_scsi_cmd	struct
.	O
mx_sb_len	char
=	O
0	int
;	O
my_scsi_cmd	struct
.	O
dxfer_len	int
=	O
len	long
;	O
my_scsi_cmd	struct
.	O
dxferp	pointer
=	O
data	pointer
;	O
my_scsi_cmd	struct
.	O
cmdp	pointer
=	O
cdb	array
;	O
my_scsi_cmd	struct
.	O
timeout	int
=	O
~	O
0	int
;	O
if	O
(	O
ioctl	function
(	O
fd	int
,	O
SG_IO	int
,	O
&	O
my_scsi_cmd	struct
)	O
<	O
0	int
)	O
{	O
perror	function
(	O
"scsi_io"	pointer
)	O
;	O
return	O
-	O
1	int
;	O
}	O
return	O
my_scsi_cmd	struct
.	O
status	int
&	O
STATUS_MASK	int
;	O
}	O
