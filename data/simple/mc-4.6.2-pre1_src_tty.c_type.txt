static	O
volatile	O
sig_atomic_t	int
got_interrupt	int
=	O
0	int
;	O
static	O
void	O
sigintr_handler	function
(	O
int	O
signo	int
)	O
{	O
(	O
void	O
)	O
&	O
signo	int
;	O
got_interrupt	int
=	O
1	int
;	O
}	O
extern	O
void	O
tty_enable_interrupt_key	function
(	O
void	O
)	O
{	O
struct	O
sigaction	struct
act	struct
;	O
got_interrupt	int
=	O
0	int
;	O
act	struct
.	O
sa_handler	pointer
=	O
sigintr_handler	function
;	O
sigemptyset	function
(	O
&	O
act	struct
.	O
sa_mask	struct
)	O
;	O
act	struct
.	O
sa_flags	int
=	O
0	int
;	O
sigaction	struct
(	O
SIGINT	int
,	O
&	O
act	struct
,	O
NULL	O
)	O
;	O
}	O
extern	O
void	O
tty_disable_interrupt_key	function
(	O
void	O
)	O
{	O
struct	O
sigaction	struct
act	struct
;	O
act	struct
.	O
sa_handler	pointer
=	O
SIG_IGN	O
;	O
sigemptyset	function
(	O
&	O
act	struct
.	O
sa_mask	struct
)	O
;	O
act	struct
.	O
sa_flags	int
=	O
0	int
;	O
sigaction	struct
(	O
SIGINT	int
,	O
&	O
act	struct
,	O
NULL	O
)	O
;	O
}	O
extern	O
gboolean	int
tty_got_interrupt	function
(	O
void	O
)	O
{	O
gboolean	int
rv	int
;	O
rv	int
=	O
(	O
got_interrupt	int
!=	O
0	int
)	O
;	O
got_interrupt	int
=	O
0	int
;	O
return	O
rv	int
;	O
}	O
extern	O
void	O
tty_gotoyx	function
(	O
int	O
y	short
,	O
int	O
x	array
)	O
{	O
SLsmg_gotorc	function
(	O
y	short
,	O
x	array
)	O
;	O
}	O
extern	O
void	O
tty_getyx	function
(	O
int	O
*	O
py	pointer
,	O
int	O
*	O
px	pointer
)	O
{	O
*	O
px	pointer
=	O
SLsmg_get_column	function
(	O
)	O
;	O
*	O
py	pointer
=	O
SLsmg_get_row	function
(	O
)	O
;	O
}	O
extern	O
void	O
tty_setcolor	function
(	O
int	O
c	int
)	O
{	O
attrset	function
(	O
c	int
)	O
;	O
}	O
extern	O
void	O
tty_print_char	function
(	O
int	O
c	int
)	O
{	O
char	O
ch	int
;	O
ch	int
=	O
c	int
;	O
SLsmg_write_nchars	function
(	O
&	O
ch	int
,	O
1	int
)	O
;	O
}	O
extern	O
void	O
tty_print_alt_char	function
(	O
int	O
c	int
)	O
{	O
SLsmg_draw_object	function
(	O
SLsmg_get_row	function
(	O
)	O
,	O
SLsmg_get_column	function
(	O
)	O
,	O
c	int
)	O
;	O
}	O
extern	O
void	O
tty_print_string	function
(	O
const	O
char	O
*	O
s	pointer
)	O
{	O
SLsmg_write_string	function
(	O
str_unconst	function
(	O
s	pointer
)	O
)	O
;	O
}	O
extern	O
void	O
tty_print_one_hline	function
(	O
void	O
)	O
{	O
if	O
(	O
slow_terminal	int
)	O
tty_print_char	function
(	O
' '	O
)	O
;	O
else	O
tty_print_alt_char	function
(	O
ACS_HLINE	O
)	O
;	O
}	O
extern	O
void	O
tty_print_one_vline	function
(	O
void	O
)	O
{	O
if	O
(	O
slow_terminal	int
)	O
tty_print_char	function
(	O
' '	O
)	O
;	O
else	O
tty_print_alt_char	function
(	O
ACS_VLINE	O
)	O
;	O
}	O
extern	O
void	O
tty_print_hline	function
(	O
int	O
top	pointer
,	O
int	O
left	int
,	O
int	O
length	int
)	O
{	O
int	O
i	array
;	O
tty_gotoyx	function
(	O
top	pointer
,	O
left	int
)	O
;	O
for	O
(	O
i	array
=	O
0	int
;	O
i	array
<	O
length	int
;	O
i	array
++	O
)	O
tty_print_one_hline	function
(	O
)	O
;	O
}	O
extern	O
void	O
tty_print_vline	function
(	O
int	O
top	pointer
,	O
int	O
left	int
,	O
int	O
length	int
)	O
{	O
int	O
i	array
;	O
tty_gotoyx	function
(	O
top	pointer
,	O
left	int
)	O
;	O
for	O
(	O
i	array
=	O
0	int
;	O
i	array
<	O
length	int
;	O
i	array
++	O
)	O
{	O
tty_gotoyx	function
(	O
top	pointer
+	O
i	array
,	O
left	int
)	O
;	O
tty_print_one_vline	function
(	O
)	O
;	O
}	O
}	O
extern	O
void	O
tty_printf	function
(	O
const	O
char	O
*	O
fmt	pointer
,	O
...	O
)	O
{	O
va_list	array
args	array
;	O
va_start	O
(	O
args	array
,	O
fmt	pointer
)	O
;	O
SLsmg_vprintf	function
(	O
str_unconst	function
(	O
fmt	pointer
)	O
,	O
args	array
)	O
;	O
va_end	O
(	O
args	array
)	O
;	O
}	O
extern	O
char	O
*	O
tty_tgetstr	function
(	O
const	O
char	O
*	O
cap	pointer
)	O
{	O
return	O
SLtt_tgetstr	function
(	O
str_unconst	function
(	O
cap	pointer
)	O
)	O
;	O
}	O
