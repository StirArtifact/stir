extern	O
struct	O
display	struct
*	O
display	struct
;	O
int	O
RethinkDisplayViewports	function
(	O
)	O
{	O
struct	O
canvas	struct
*	O
cv	pointer
;	O
struct	O
viewport	struct
*	O
vp	pointer
,	O
*	O
vpn	pointer
;	O
for	O
(	O
cv	pointer
=	O
display	struct
->	O
d_cvlist	pointer
;	O
cv	pointer
;	O
cv	pointer
=	O
cv	pointer
->	O
c_next	pointer
)	O
{	O
for	O
(	O
vp	pointer
=	O
cv	pointer
->	O
c_vplist	pointer
;	O
vp	pointer
;	O
vp	pointer
=	O
vpn	pointer
)	O
{	O
vp	pointer
->	O
v_canvas	pointer
=	O
0	int
;	O
vpn	pointer
=	O
vp	pointer
->	O
v_next	pointer
;	O
bzero	function
(	O
(	O
char	O
*	O
)	O
vp	pointer
,	O
sizeof	O
(	O
*	O
vp	pointer
)	O
)	O
;	O
free	function
(	O
vp	pointer
)	O
;	O
}	O
cv	pointer
->	O
c_vplist	pointer
=	O
0	int
;	O
}	O
display	struct
->	O
d_vpxmin	int
=	O
-	O
1	int
;	O
display	struct
->	O
d_vpxmax	int
=	O
-	O
1	int
;	O
for	O
(	O
cv	pointer
=	O
display	struct
->	O
d_cvlist	pointer
;	O
cv	pointer
;	O
cv	pointer
=	O
cv	pointer
->	O
c_next	pointer
)	O
{	O
if	O
(	O
(	O
vp	pointer
=	O
(	O
struct	O
viewport	struct
*	O
)	O
malloc	function
(	O
sizeof	O
*	O
vp	pointer
)	O
)	O
==	O
0	int
)	O
return	O
-	O
1	int
;	O
vp	pointer
->	O
v_canvas	pointer
=	O
cv	pointer
;	O
vp	pointer
->	O
v_xs	int
=	O
cv	pointer
->	O
c_xs	int
;	O
vp	pointer
->	O
v_ys	int
=	O
cv	pointer
->	O
c_ys	int
;	O
vp	pointer
->	O
v_xe	int
=	O
cv	pointer
->	O
c_xe	int
;	O
vp	pointer
->	O
v_ye	int
=	O
cv	pointer
->	O
c_ye	int
;	O
vp	pointer
->	O
v_xoff	int
=	O
cv	pointer
->	O
c_xoff	int
;	O
vp	pointer
->	O
v_yoff	int
=	O
cv	pointer
->	O
c_yoff	int
;	O
vp	pointer
->	O
v_next	pointer
=	O
cv	pointer
->	O
c_vplist	pointer
;	O
cv	pointer
->	O
c_vplist	pointer
=	O
vp	pointer
;	O
if	O
(	O
cv	pointer
->	O
c_xs	int
<	O
display	struct
->	O
d_vpxmin	int
||	O
display	struct
->	O
d_vpxmin	int
==	O
-	O
1	int
)	O
display	struct
->	O
d_vpxmin	int
=	O
cv	pointer
->	O
c_xs	int
;	O
if	O
(	O
cv	pointer
->	O
c_xe	int
>	O
display	struct
->	O
d_vpxmax	int
||	O
display	struct
->	O
d_vpxmax	int
==	O
-	O
1	int
)	O
display	struct
->	O
d_vpxmax	int
=	O
cv	pointer
->	O
c_xe	int
;	O
}	O
return	O
0	int
;	O
}	O
void	O
RethinkViewportOffsets	function
(	O
struct	O
canvas	struct
*	O
cv	pointer
)	O
{	O
struct	O
viewport	struct
*	O
vp	pointer
;	O
for	O
(	O
vp	pointer
=	O
cv	pointer
->	O
c_vplist	pointer
;	O
vp	pointer
;	O
vp	pointer
=	O
vp	pointer
->	O
v_next	pointer
)	O
{	O
vp	pointer
->	O
v_xoff	int
=	O
cv	pointer
->	O
c_xoff	int
;	O
vp	pointer
->	O
v_yoff	int
=	O
cv	pointer
->	O
c_yoff	int
;	O
}	O
}	O
