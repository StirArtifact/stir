int	O
close_stream	function
(	O
FILE	struct
*	O
stream	pointer
)	O
{	O
const	O
bool	bool
some_pending	bool
=	O
(	O
__fpending	function
(	O
stream	pointer
)	O
!=	O
0	int
)	O
;	O
const	O
bool	bool
prev_fail	bool
=	O
(	O
ferror	function
(	O
stream	pointer
)	O
!=	O
0	int
)	O
;	O
const	O
bool	bool
fclose_fail	bool
=	O
(	O
fclose	function
(	O
stream	pointer
)	O
!=	O
0	int
)	O
;	O
if	O
(	O
prev_fail	bool
||	O
(	O
fclose_fail	bool
&&	O
(	O
some_pending	bool
||	O
errno	O
!=	O
EBADF	int
)	O
)	O
)	O
{	O
if	O
(	O
!	O
fclose_fail	bool
)	O
errno	O
=	O
0	int
;	O
return	O
EOF	O
;	O
}	O
return	O
0	int
;	O
}	O
