int	O
sentence_end_required_spaces	int
=	O
1	int
;	O
const	O
char	O
*	O
sentence_end	function
(	O
const	O
char	O
*	O
string	pointer
,	O
ucs4_t	int
*	O
ending_charp	pointer
)	O
{	O
const	O
char	O
*	O
str	pointer
=	O
string	pointer
;	O
const	O
char	O
*	O
str_limit	pointer
=	O
string	pointer
+	O
strlen	function
(	O
str	pointer
)	O
;	O
int	O
state	pointer
=	O
0	int
;	O
ucs4_t	int
ending_char	int
=	O
0xfffd	int
;	O
const	O
char	O
*	O
match_start	pointer
=	O
NULL	O
,	O
*	O
match_next	pointer
=	O
NULL	O
;	O
int	O
spaces	int
=	O
0	int
;	O
while	O
(	O
str	pointer
<=	O
str_limit	pointer
)	O
{	O
ucs4_t	int
uc	int
;	O
size_t	long
length	long
;	O
length	long
=	O
u8_mbtouc	function
(	O
&	O
uc	int
,	O
(	O
const	O
unsigned	O
char	O
*	O
)	O
str	pointer
,	O
str_limit	pointer
-	O
str	pointer
)	O
;	O
if	O
(	O
state	pointer
==	O
0	int
)	O
{	O
switch	O
(	O
uc	int
)	O
{	O
case	O
'.'	O
:	O
case	O
'?'	O
:	O
case	O
'!'	O
:	O
case	O
0x2026	int
:	O
state	pointer
=	O
1	int
;	O
match_start	pointer
=	O
str	pointer
;	O
match_next	pointer
=	O
str	pointer
+	O
length	long
;	O
ending_char	int
=	O
uc	int
;	O
spaces	int
=	O
0	int
;	O
break	O
;	O
default	O
:	O
break	O
;	O
}	O
str	pointer
+=	O
length	long
;	O
continue	O
;	O
}	O
if	O
(	O
state	pointer
==	O
1	int
)	O
{	O
switch	O
(	O
uc	int
)	O
{	O
case	O
']'	O
:	O
case	O
'"'	O
:	O
case	O
'\''	O
:	O
case	O
')'	O
:	O
case	O
'}'	O
:	O
case	O
0x201d	int
:	O
state	pointer
=	O
2	int
;	O
break	O
;	O
case	O
'\0'	O
:	O
case	O
'\n'	O
:	O
*	O
ending_charp	pointer
=	O
ending_char	int
;	O
return	O
match_start	pointer
;	O
case	O
' '	O
:	O
case	O
0x00a0	int
:	O
if	O
(	O
++	O
spaces	int
==	O
sentence_end_required_spaces	int
)	O
{	O
*	O
ending_charp	pointer
=	O
ending_char	int
;	O
return	O
match_start	pointer
;	O
}	O
state	pointer
=	O
4	int
;	O
break	O
;	O
case	O
'\t'	O
:	O
*	O
ending_charp	pointer
=	O
ending_char	int
;	O
return	O
match_start	pointer
;	O
default	O
:	O
str	pointer
=	O
match_next	pointer
;	O
state	pointer
=	O
0	int
;	O
continue	O
;	O
}	O
str	pointer
+=	O
length	long
;	O
continue	O
;	O
}	O
if	O
(	O
state	pointer
==	O
2	int
)	O
{	O
switch	O
(	O
uc	int
)	O
{	O
case	O
']'	O
:	O
case	O
'"'	O
:	O
case	O
'\''	O
:	O
case	O
')'	O
:	O
case	O
'}'	O
:	O
case	O
0x201d	int
:	O
break	O
;	O
case	O
'\0'	O
:	O
case	O
'\n'	O
:	O
*	O
ending_charp	pointer
=	O
ending_char	int
;	O
return	O
match_start	pointer
;	O
case	O
' '	O
:	O
case	O
0x00a0	int
:	O
if	O
(	O
++	O
spaces	int
==	O
sentence_end_required_spaces	int
)	O
{	O
*	O
ending_charp	pointer
=	O
ending_char	int
;	O
return	O
match_start	pointer
;	O
}	O
state	pointer
=	O
4	int
;	O
break	O
;	O
case	O
'\t'	O
:	O
*	O
ending_charp	pointer
=	O
ending_char	int
;	O
return	O
match_start	pointer
;	O
default	O
:	O
state	pointer
=	O
0	int
;	O
str	pointer
=	O
match_next	pointer
;	O
continue	O
;	O
}	O
str	pointer
+=	O
length	long
;	O
continue	O
;	O
}	O
if	O
(	O
state	pointer
==	O
4	int
)	O
{	O
switch	O
(	O
uc	int
)	O
{	O
case	O
'\0'	O
:	O
case	O
'\n'	O
:	O
*	O
ending_charp	pointer
=	O
ending_char	int
;	O
return	O
match_start	pointer
;	O
case	O
' '	O
:	O
case	O
0x00a0	int
:	O
if	O
(	O
++	O
spaces	int
==	O
sentence_end_required_spaces	int
)	O
{	O
*	O
ending_charp	pointer
=	O
ending_char	int
;	O
return	O
match_start	pointer
;	O
}	O
break	O
;	O
default	O
:	O
state	pointer
=	O
0	int
;	O
str	pointer
=	O
match_next	pointer
;	O
continue	O
;	O
}	O
str	pointer
+=	O
length	long
;	O
continue	O
;	O
}	O
}	O
*	O
ending_charp	pointer
=	O
0xfffd	int
;	O
return	O
str_limit	pointer
;	O
}	O
